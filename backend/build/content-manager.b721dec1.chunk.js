(self.webpackChunkbackend=self.webpackChunkbackend||[]).push([[994],{33629:(Ec,st)=>{var p=function(){var r={trace:function(){},yy:{},symbols_:{error:2,JSONString:3,STRING:4,JSONNumber:5,NUMBER:6,JSONNullLiteral:7,NULL:8,JSONBooleanLiteral:9,TRUE:10,FALSE:11,JSONText:12,JSONValue:13,EOF:14,JSONObject:15,JSONArray:16,"{":17,"}":18,JSONMemberList:19,JSONMember:20,":":21,",":22,"[":23,"]":24,JSONElementList:25,$accept:0,$end:1},terminals_:{2:"error",4:"STRING",6:"NUMBER",8:"NULL",10:"TRUE",11:"FALSE",14:"EOF",17:"{",18:"}",21:":",22:",",23:"[",24:"]"},productions_:[0,[3,1],[5,1],[7,1],[9,1],[9,1],[12,2],[13,1],[13,1],[13,1],[13,1],[13,1],[13,1],[15,2],[15,3],[20,3],[19,1],[19,3],[16,2],[16,3],[25,1],[25,3]],performAction:function(g,te,oe,A,Ee,ie,De){var me=ie.length-1;switch(Ee){case 1:this.$=g.replace(/\\(\\|")/g,"$1").replace(/\\n/g,`
`).replace(/\\r/g,"\r").replace(/\\t/g,"	").replace(/\\v/g,"\v").replace(/\\f/g,"\f").replace(/\\b/g,"\b");break;case 2:this.$=Number(g);break;case 3:this.$=null;break;case 4:this.$=!0;break;case 5:this.$=!1;break;case 6:return this.$=ie[me-1];case 13:this.$={};break;case 14:this.$=ie[me-1];break;case 15:this.$=[ie[me-2],ie[me]];break;case 16:this.$={},this.$[ie[me][0]]=ie[me][1];break;case 17:this.$=ie[me-2],ie[me-2][ie[me][0]]=ie[me][1];break;case 18:this.$=[];break;case 19:this.$=ie[me-1];break;case 20:this.$=[ie[me]];break;case 21:this.$=ie[me-2],ie[me-2].push(ie[me]);break}},table:[{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],12:1,13:2,15:7,16:8,17:[1,14],23:[1,15]},{1:[3]},{14:[1,16]},{14:[2,7],18:[2,7],22:[2,7],24:[2,7]},{14:[2,8],18:[2,8],22:[2,8],24:[2,8]},{14:[2,9],18:[2,9],22:[2,9],24:[2,9]},{14:[2,10],18:[2,10],22:[2,10],24:[2,10]},{14:[2,11],18:[2,11],22:[2,11],24:[2,11]},{14:[2,12],18:[2,12],22:[2,12],24:[2,12]},{14:[2,3],18:[2,3],22:[2,3],24:[2,3]},{14:[2,4],18:[2,4],22:[2,4],24:[2,4]},{14:[2,5],18:[2,5],22:[2,5],24:[2,5]},{14:[2,1],18:[2,1],21:[2,1],22:[2,1],24:[2,1]},{14:[2,2],18:[2,2],22:[2,2],24:[2,2]},{3:20,4:[1,12],18:[1,17],19:18,20:19},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:23,15:7,16:8,17:[1,14],23:[1,15],24:[1,21],25:22},{1:[2,6]},{14:[2,13],18:[2,13],22:[2,13],24:[2,13]},{18:[1,24],22:[1,25]},{18:[2,16],22:[2,16]},{21:[1,26]},{14:[2,18],18:[2,18],22:[2,18],24:[2,18]},{22:[1,28],24:[1,27]},{22:[2,20],24:[2,20]},{14:[2,14],18:[2,14],22:[2,14],24:[2,14]},{3:20,4:[1,12],20:29},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:30,15:7,16:8,17:[1,14],23:[1,15]},{14:[2,19],18:[2,19],22:[2,19],24:[2,19]},{3:5,4:[1,12],5:6,6:[1,13],7:3,8:[1,9],9:4,10:[1,10],11:[1,11],13:31,15:7,16:8,17:[1,14],23:[1,15]},{18:[2,17],22:[2,17]},{18:[2,15],22:[2,15]},{22:[2,21],24:[2,21]}],defaultActions:{16:[2,6]},parseError:function(g,te){throw new Error(g)},parse:function(g){var te=this,oe=[0],A=[null],Ee=[],ie=this.table,De="",me=0,v=0,Te=0,xe=2,o=1;this.lexer.setInput(g),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,typeof this.lexer.yylloc=="undefined"&&(this.lexer.yylloc={});var Et=this.lexer.yylloc;Ee.push(Et),typeof this.yy.parseError=="function"&&(this.parseError=this.yy.parseError);function jt(L){oe.length=oe.length-2*L,A.length=A.length-L,Ee.length=Ee.length-L}function $t(){var L;return L=te.lexer.lex()||1,typeof L!="number"&&(L=te.symbols_[L]||L),L}for(var Pe,Ye,we,Ie,oo,vt,Ve={},Je,Oe,k,D;;){we=oe[oe.length-1],this.defaultActions[we]?Ie=this.defaultActions[we]:(Pe==null&&(Pe=$t()),Ie=ie[we]&&ie[we][Pe]);e:if(typeof Ie=="undefined"||!Ie.length||!Ie[0]){if(!Te){D=[];for(Je in ie[we])this.terminals_[Je]&&Je>2&&D.push("'"+this.terminals_[Je]+"'");var j="";this.lexer.showPosition?j="Parse error on line "+(me+1)+`:
`+this.lexer.showPosition()+`
Expecting `+D.join(", ")+", got '"+this.terminals_[Pe]+"'":j="Parse error on line "+(me+1)+": Unexpected "+(Pe==1?"end of input":"'"+(this.terminals_[Pe]||Pe)+"'"),this.parseError(j,{text:this.lexer.match,token:this.terminals_[Pe]||Pe,line:this.lexer.yylineno,loc:Et,expected:D})}if(Te==3){if(Pe==o)throw new Error(j||"Parsing halted.");v=this.lexer.yyleng,De=this.lexer.yytext,me=this.lexer.yylineno,Et=this.lexer.yylloc,Pe=$t()}for(;!(xe.toString()in ie[we]);){if(we==0)throw new Error(j||"Parsing halted.");jt(1),we=oe[oe.length-1]}Ye=Pe,Pe=xe,we=oe[oe.length-1],Ie=ie[we]&&ie[we][xe],Te=3}if(Ie[0]instanceof Array&&Ie.length>1)throw new Error("Parse Error: multiple actions possible at state: "+we+", token: "+Pe);switch(Ie[0]){case 1:oe.push(Pe),A.push(this.lexer.yytext),Ee.push(this.lexer.yylloc),oe.push(Ie[1]),Pe=null,Ye?(Pe=Ye,Ye=null):(v=this.lexer.yyleng,De=this.lexer.yytext,me=this.lexer.yylineno,Et=this.lexer.yylloc,Te>0&&Te--);break;case 2:if(Oe=this.productions_[Ie[1]][1],Ve.$=A[A.length-Oe],Ve._$={first_line:Ee[Ee.length-(Oe||1)].first_line,last_line:Ee[Ee.length-1].last_line,first_column:Ee[Ee.length-(Oe||1)].first_column,last_column:Ee[Ee.length-1].last_column},vt=this.performAction.call(Ve,De,v,me,this.yy,Ie[1],A,Ee),typeof vt!="undefined")return vt;Oe&&(oe=oe.slice(0,-1*Oe*2),A=A.slice(0,-1*Oe),Ee=Ee.slice(0,-1*Oe)),oe.push(this.productions_[Ie[1]][0]),A.push(Ve.$),Ee.push(Ve._$),k=ie[oe[oe.length-2]][oe[oe.length-1]],oe.push(k);break;case 3:return!0}}return!0}},at=function(){var X={EOF:1,parseError:function(te,oe){if(this.yy.parseError)this.yy.parseError(te,oe);else throw new Error(te)},setInput:function(g){return this._input=g,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var g=this._input[0];this.yytext+=g,this.yyleng++,this.match+=g,this.matched+=g;var te=g.match(/\n/);return te&&this.yylineno++,this._input=this._input.slice(1),g},unput:function(g){return this._input=g+this._input,this},more:function(){return this._more=!0,this},less:function(g){this._input=this.match.slice(g)+this._input},pastInput:function(){var g=this.matched.substr(0,this.matched.length-this.match.length);return(g.length>20?"...":"")+g.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var g=this.match;return g.length<20&&(g+=this._input.substr(0,20-g.length)),(g.substr(0,20)+(g.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var g=this.pastInput(),te=new Array(g.length+1).join("-");return g+this.upcomingInput()+`
`+te+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var g,te,oe,A,Ee,ie;this._more||(this.yytext="",this.match="");for(var De=this._currentRules(),me=0;me<De.length&&(oe=this._input.match(this.rules[De[me]]),!(oe&&(!te||oe[0].length>te[0].length)&&(te=oe,A=me,!this.options.flex)));me++);if(te)return ie=te[0].match(/\n.*/g),ie&&(this.yylineno+=ie.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ie?ie[ie.length-1].length-1:this.yylloc.last_column+te[0].length},this.yytext+=te[0],this.match+=te[0],this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(te[0].length),this.matched+=te[0],g=this.performAction.call(this,this.yy,this,De[A],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),g||void 0;if(this._input==="")return this.EOF;this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var te=this.next();return typeof te!="undefined"?te:this.lex()},begin:function(te){this.conditionStack.push(te)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(te){this.begin(te)}};return X.options={},X.performAction=function(te,oe,A,Ee){var ie=Ee;switch(A){case 0:break;case 1:return 6;case 2:return oe.yytext=oe.yytext.substr(1,oe.yyleng-2),4;break;case 3:return 17;case 4:return 18;case 5:return 23;case 6:return 24;case 7:return 22;case 8:return 21;case 9:return 10;case 10:return 11;case 11:return 8;case 12:return 14;case 13:return"INVALID"}},X.rules=[/^(?:\s+)/,/^(?:(-?([0-9]|[1-9][0-9]+))(\.[0-9]+)?([eE][-+]?[0-9]+)?\b)/,/^(?:"(?:\\[\\"bfnrt/]|\\u[a-fA-F0-9]{4}|[^\\\0-\x09\x0a-\x1f"])*")/,/^(?:\{)/,/^(?:\})/,/^(?:\[)/,/^(?:\])/,/^(?:,)/,/^(?::)/,/^(?:true\b)/,/^(?:false\b)/,/^(?:null\b)/,/^(?:$)/,/^(?:.)/],X.conditions={INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13],inclusive:!0}},X}();return r.lexer=at,r}();st.parser=p,st.parse=function(){return p.parse.apply(p,arguments)},st.main=function(at){if(!at[1])throw new Error("Usage: "+at[0]+" FILE")}},77064:(Ec,st,p)=>{"use strict";p.r(st),p.d(st,{App:()=>hc,default:()=>VC});var r=p(67294),at=p(15482),X=p(49656),g=p(68547),te=p(78862),oe=p(62031),A=p(97132),Ee=p(89734),ie=p.n(Ee),De=p(87751);const v=e=>`content-manager.${e}`;var Te=p(99168),xe=p(45697),o=p.n(xe);const jt=(0,r.createContext)();var $t=Object.defineProperty,Pe=Object.getOwnPropertySymbols,Ye=Object.prototype.hasOwnProperty,we=Object.prototype.propertyIsEnumerable,Ie=(e,t,n)=>t in e?$t(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oo=(e,t)=>{for(var n in t||(t={}))Ye.call(t,n)&&Ie(e,n,t[n]);if(Pe)for(var n of Pe(t))we.call(t,n)&&Ie(e,n,t[n]);return e},vt=(e,t)=>{var n={};for(var s in e)Ye.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Pe)for(var s of Pe(e))t.indexOf(s)<0&&we.call(e,s)&&(n[s]=e[s]);return n};function Ve(e){var t=e,{attributes:n,buttonData:s,children:a,goTo:c,layout:i,metadatas:u,moveItem:l,moveRow:d,onAddData:m,relationsLayout:f,removeField:y,selectedItemName:h,setEditFieldToSelect:b}=t,E=vt(t,["attributes","buttonData","children","goTo","layout","metadatas","moveItem","moveRow","onAddData","relationsLayout","removeField","selectedItemName","setEditFieldToSelect"]);return r.createElement(jt.Provider,{value:oo({attributes:n,buttonData:s,goTo:c,layout:i,metadatas:u,moveItem:l,moveRow:d,onAddData:m,relationsLayout:f,removeField:y,selectedItemName:h,setEditFieldToSelect:b},E)},a)}Ve.defaultProps={attributes:{},buttonData:[],goTo(){},layout:[],metadatas:{},moveItem(){},moveRow(){},onAddData(){},relationsLayout:[],removeField(){},selectedItemName:null,setEditFieldToSelect(){}},Ve.propTypes={attributes:o().object,buttonData:o().array,children:o().node.isRequired,goTo:o().func,layout:o().array,metadatas:o().object,moveItem:o().func,moveRow:o().func,onAddData:o().func,relationsLayout:o().array,removeField:o().func,selectedItemName:o().string,setEditFieldToSelect:o().func};const Je=Ve,Oe={COMPONENT:"component",EDIT_FIELD:"editField",EDIT_RELATION:"editRelation",FIELD:"field",RELATION:"relation"};var k=p(78384),D=p(5493),j=p(67826),L=p(49425),Me=p(30741),vc=p(18568),Be=p.n(vc),Cc=p(88049),Xe=p.n(Cc),Pc=p(99962),so=p.n(Pc);const Oc=(0,k.default)(D.Box)`
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Rc=(0,k.default)(D.Box)`
  height: ${32/16}rem;
  width: ${32/16}rem;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;

  svg {
    height: ${6/16}rem;
    width: ${11/16}rem;
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
`,Mc=k.default.button`
  border: none;
  background: transparent;
  display: block;
  width: 100%;
  text-align: unset;
  padding: 0;
`,ao=({displayedValue:e})=>r.createElement(Oc,{paddingLeft:3,paddingRight:3,paddingTop:3,paddingBottom:3,hasRadius:!0,background:"neutral0",width:(0,g.pxToRem)(300)},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(Mc,{type:"button"},r.createElement(j.Flex,null,r.createElement(Rc,{background:"neutral200"},r.createElement(so(),null)),r.createElement(D.Box,{paddingLeft:6,maxWidth:(0,g.pxToRem)(150)},r.createElement(L.Typography,{textColor:"neutral700",ellipsis:!0},e)))),r.createElement(D.Box,{paddingLeft:3},r.createElement(j.Flex,null,r.createElement(Me.IconButton,{icon:r.createElement(Be(),null)}),r.createElement(D.Box,{paddingLeft:2},r.createElement(Me.IconButton,{icon:r.createElement(Xe(),null)}))))));ao.propTypes={displayedValue:o().string.isRequired};const Tc=ao;var se=p(9008),wc=p(19352),it=p.n(wc),Ic=p(84040),io=p.n(Ic);const lo=e=>e.length>20?`${e.substring(0,20)}...`:e,bn=(0,k.default)(j.Flex)`
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,co=(0,k.default)(bn)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Dc=(0,k.default)(j.Flex)`
  display: inline-flex;
  max-height: ${32/16}rem;
  opacity: ${({transparent:e})=>e?0:1};
  background-color: ${({theme:e,isSibling:t})=>t?e.colors.neutral100:e.colors.primary100};
  border: 1px solid
    ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
    }
  }

  ${L.Typography} {
    color: ${({theme:e,isSibling:t})=>t?void 0:e.colors.primary600};
  }

  ${co} {
    border-right: 1px solid
      ${({theme:e,isSibling:t})=>t?e.colors.neutral150:e.colors.primary200};
  }
`,En=({labelField:e,transparent:t,isSibling:n})=>{const s=lo(e);return r.createElement(Dc,{hasRadius:!0,justifyContent:"space-between",transparent:t,isSibling:n},r.createElement(se.Stack,{horizontal:!0,spacing:3},r.createElement(co,{alignItems:"center"},r.createElement(Xe(),null)),r.createElement(L.Typography,{fontWeight:"bold"},s)),r.createElement(j.Flex,{paddingLeft:3},r.createElement(bn,{alignItems:"center"},r.createElement(it(),null)),r.createElement(bn,{alignItems:"center"},r.createElement(io(),null))))};En.defaultProps={isSibling:!1,transparent:!1},En.propTypes={isSibling:o().bool,labelField:o().string.isRequired,transparent:o().bool};const vn=En,xc={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"};function Sc(e,t,n){if(!e||!t)return{display:"none"};const{x:s,y:a}=n,c=`translate(${s}px, ${a}px)`;return{transform:c,WebkitTransform:c}}const Lc=()=>{const{itemType:e,isDragging:t,item:n,initialOffset:s,currentOffset:a,mouseOffset:c}=(0,Te.useDragLayer)(i=>({item:i.getItem(),itemType:i.getItemType(),initialOffset:i.getInitialSourceClientOffset(),currentOffset:i.getSourceClientOffset(),isDragging:i.isDragging(),mouseOffset:i.getClientOffset()}));return t?r.createElement(Je,null,r.createElement("div",{style:xc},r.createElement("div",{style:Sc(s,a,c),className:"col-md-2"},[Oe.EDIT_RELATION,Oe.EDIT_FIELD,Oe.FIELD].includes(e)&&r.createElement(vn,{labelField:n.labelField}),e===Oe.COMPONENT&&r.createElement(Tc,{displayedValue:n.displayedValue})))):null},uo=(0,r.createContext)();var Fc=p(66730),N=p(96486);const po=(0,r.createContext)(),HC=(0,r.createContext)(),GC=null;var fe=p(37424);const mo=e=>e["content-manager_editViewLayoutManager"].currentLayout;var kc=Object.defineProperty,Ac=Object.defineProperties,jc=Object.getOwnPropertyDescriptors,fo=Object.getOwnPropertySymbols,$c=Object.prototype.hasOwnProperty,Bc=Object.prototype.propertyIsEnumerable,go=(e,t,n)=>t in e?kc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nc=(e,t)=>{for(var n in t||(t={}))$c.call(t,n)&&go(e,n,t[n]);if(fo)for(var n of fo(t))Bc.call(t,n)&&go(e,n,t[n]);return e},Vc=(e,t)=>Ac(e,jc(t));const lt=()=>{const e=(0,fe.useSelector)(mo),t=(0,r.useCallback)(n=>(0,N.get)(e,["components",n],{}),[e]);return Vc(Nc({},e),{getComponentLayout:t})};var qc=p(9669),Se=p.n(qc),ge=p(23998),Wc=p(50361),qe=p.n(Wc);const Ct=(e,t,n)=>{if(Array.isArray(e)&&t>=0&&n>=0&&t<=e.length-1&&n<=e.length-1){const s=qe()(e),a=s.splice(t,1);return s.splice(n,0,a[0]),s}return e},yo=e=>{const t=e.type;return t==="relation"?!(0,N.toLower)(e.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(t)&&!!t},ho=(e,t)=>Object.keys(e).reduce((n,s)=>{const a=(0,N.get)(e,[s],{}),{default:c,component:i,type:u,required:l,min:d,repeatable:m}=a;if(u==="json"&&(n[s]=null),u==="json"&&l===!0&&(n[s]={}),c!==void 0&&(n[s]=c),u==="component"){const f=(0,N.get)(t,[i,"attributes"],{}),y=ho(f,t);if(l===!0&&(n[s]=m===!0?[]:y),d&&m===!0&&l){n[s]=[];for(let h=0;h<d;h+=1)n[s].push(y)}}return u==="dynamiczone"&&l===!0&&(n[s]=[]),n},{}),Bt=ho;var zc=Object.defineProperty,Uc=Object.defineProperties,Hc=Object.getOwnPropertyDescriptors,Nt=Object.getOwnPropertySymbols,bo=Object.prototype.hasOwnProperty,Eo=Object.prototype.propertyIsEnumerable,vo=(e,t,n)=>t in e?zc(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Cn=(e,t)=>{for(var n in t||(t={}))bo.call(t,n)&&vo(e,n,t[n]);if(Nt)for(var n of Nt(t))Eo.call(t,n)&&vo(e,n,t[n]);return e},Pn=(e,t)=>Uc(e,Hc(t)),Gc=(e,t)=>{var n={};for(var s in e)bo.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Nt)for(var s of Nt(e))t.indexOf(s)<0&&Eo.call(e,s)&&(n[s]=e[s]);return n};const Vt=e=>{var t=e,{layouts:n,metadatas:s}=t,a=Gc(t,["layouts","metadatas"]);const c=n.list.map(d=>d.name?d.name:d),i=n.editRelations.map(({name:d})=>d),u=Object.keys(s).reduce((d,m)=>{const f=(0,N.get)(s,[m],{});let y=f.edit;return y.mainField&&(y=Pn(Cn({},y),{mainField:f.edit.mainField.name})),Pn(Cn({},d),{[m]:{edit:y,list:(0,N.omit)(f.list,["mainField"])}})},{}),l=n.edit.map(d=>d.map(({name:m,size:f})=>({name:m,size:f})));return Pn(Cn({},a),{layouts:{edit:l,editRelations:i,list:c},metadatas:u})};var _c=Object.defineProperty,Zc=Object.defineProperties,Qc=Object.getOwnPropertyDescriptors,Co=Object.getOwnPropertySymbols,Kc=Object.prototype.hasOwnProperty,Yc=Object.prototype.propertyIsEnumerable,Po=(e,t,n)=>t in e?_c(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Jc=(e,t)=>{for(var n in t||(t={}))Kc.call(t,n)&&Po(e,n,t[n]);if(Co)for(var n of Co(t))Yc.call(t,n)&&Po(e,n,t[n]);return e},Xc=(e,t)=>Zc(e,Qc(t));const eu=(e,t)=>e.map(n=>Xc(Jc({},n),{subject:t})),Oo=e=>{const t={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(t).reduce((n,s)=>(n[s]=eu(t[s],e),n),{})},Ro=e=>e.split(".").filter(t=>(0,N.isNaN)(parseInt(t,10))),Mo=e=>e.length===0?-1:Math.max.apply(Math,e.map(t=>t.__temp_key__)),ve=e=>`/content-manager/${e}`;var tu=Object.defineProperty,To=Object.getOwnPropertySymbols,nu=Object.prototype.hasOwnProperty,ru=Object.prototype.propertyIsEnumerable,wo=(e,t,n)=>t in e?tu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,qt=(e,t)=>{for(var n in t||(t={}))nu.call(t,n)&&wo(e,n,t[n]);if(To)for(var n of To(t))ru.call(t,n)&&wo(e,n,t[n]);return e};const Io=(e,t,n)=>{const s=u=>t.find(l=>l.uid===u),a=Object.assign({},e),c=e[n].uid,i=s(c);return(0,N.set)(a,[n],qt(qt({},e[n]),i)),Object.keys(e.components).forEach(u=>{const l=s(u);(0,N.set)(a,["components",u],qt(qt({},e.components[u]),l))}),a};var ou=Object.defineProperty,su=Object.defineProperties,au=Object.getOwnPropertyDescriptors,Do=Object.getOwnPropertySymbols,iu=Object.prototype.hasOwnProperty,lu=Object.prototype.propertyIsEnumerable,xo=(e,t,n)=>t in e?ou(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,So=(e,t)=>{for(var n in t||(t={}))iu.call(t,n)&&xo(e,n,t[n]);if(Do)for(var n of Do(t))lu.call(t,n)&&xo(e,n,t[n]);return e},Lo=(e,t)=>su(e,au(t));const Pt=(e,t)=>e&&Object.keys(e).reduce((n,s)=>{const a=n[s];return a===null?n:Array.isArray(a)?Array.isArray(n)?(n[s]=Pt(a,t),n):Lo(So({},n),{[s]:a.map(c=>Pt(c,t))}):typeof a=="object"?Array.isArray(n)?(n[s]=Pt(a,t),n):Lo(So({},n),{[s]:Pt(a,t)}):(s===t&&delete n[s],n)},e),cu=Pt,Fo=(e,t,n)=>{const s=(a,c)=>Object.keys(a).reduce((i,u)=>{const l=(0,g.getType)(c,u),d=(0,N.get)(a,u),m=(0,g.getOtherInfos)(c,[u,"component"]),f=(0,g.getOtherInfos)(c,[u,"repeatable"]);return l==="dynamiczone"?(i[u]=d.map(y=>s(y,n[y.__component])),i):l==="component"?(f?i[u]=d&&d.map(y=>s(y,n[m])):i[u]=d&&s(d,n[m]),i):(l!=="password"&&(i[u]=d),i)},{});return s(e,t)};var uu=Object.defineProperty,du=Object.defineProperties,pu=Object.getOwnPropertyDescriptors,ko=Object.getOwnPropertySymbols,mu=Object.prototype.hasOwnProperty,fu=Object.prototype.propertyIsEnumerable,Ao=(e,t,n)=>t in e?uu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ot=(e,t)=>{for(var n in t||(t={}))mu.call(t,n)&&Ao(e,n,t[n]);if(ko)for(var n of ko(t))fu.call(t,n)&&Ao(e,n,t[n]);return e},Rt=(e,t)=>du(e,pu(t));const On=(e,t)=>t.find(n=>n.uid===e),gu=(e,t)=>e.layouts.editRelations.reduce((s,a)=>{const c=(0,N.get)(e,["attributes",a],{}),i=(0,N.get)(e,["attributes",a,"targetModel"],null),l=On(i,t).pluginOptions||{},d=(0,N.get)(e,["metadatas",a,"edit"],{}),m=6,f=$o(e,a,t);return s.push({name:a,size:m,fieldSchema:c,metadatas:d,queryInfos:f,targetModelPluginOptions:l}),s},[]),yu=(e,t)=>{const n=hu(e,t),s=jo(n.contentType,null,t),a=n.contentType.uid,c=gu(n.contentType,t),i=bu(n.contentType,n.components);return(0,N.set)(n,["contentType","layouts","edit"],s),(0,N.set)(n,["contentType","layouts","editRelations"],c),(0,N.set)(n,["contentType","layouts","list"],i),Object.keys(n.components).forEach(u=>{const l=jo(n.components[u],a,t);(0,N.set)(n,["components",u,"layouts","edit"],l)}),n},hu=(e,t)=>{const n=Io((0,N.cloneDeep)(e),t,"contentType"),{components:s,contentType:a}=n,c=i=>Object.keys(i.metadatas).reduce((u,l)=>{const d=(0,N.get)(i,["attributes",l],{});let m=i.metadatas[l];if(d.type==="relation"){const f=On(d.targetModel,t),y=m.edit.mainField,h={name:y,schema:(0,N.get)(f,["attributes",y])};m={list:Rt(Ot({},m.list),{mainField:h}),edit:Rt(Ot({},m.edit),{mainField:h})}}return u[l]=m,u},{});return(0,N.set)(n,["contentType","metadatas"],c(a)),Object.keys(s).forEach(i=>{const u=s[i],l=c(u);(0,N.set)(n,["components",i,"metadatas"],l)}),n},jo=(e,t,n)=>e.layouts.edit.reduce((a,c)=>{const i=c.map(u=>{const l=(0,N.get)(e,["attributes",u.name],{}),d=Rt(Ot({},u),{fieldSchema:l,metadatas:(0,N.get)(e,["metadatas",u.name,"edit"],{})});if(l.type==="relation"){const m=l.targetModel,y=On(m,n).pluginOptions||{},h=t?Eu(e,u.name,t,n):$o(e,u.name,n);(0,N.set)(d,"targetModelPluginOptions",y),(0,N.set)(d,"queryInfos",h)}return d});return a.push(i),a},[]),bu=(e,t)=>e.layouts.list.reduce((s,a)=>{const c=(0,N.get)(e,["attributes",a],{}),i=(0,N.get)(e,["metadatas",a,"list"],{}),u=c.type;if(u==="relation"){const l={endPoint:`collection-types/${e.uid}`,defaultParams:{}};return s.push({key:`__${a}_key__`,name:a,fieldSchema:c,metadatas:i,queryInfos:l}),s}if(u==="component"){const l=t[c.component],d=l.settings.mainField,m=l.attributes[d];return s.push({key:`__${a}_key__`,name:a,fieldSchema:c,metadatas:Rt(Ot({},i),{mainField:Rt(Ot({},m),{name:d})})}),s}return s.push({key:`__${a}_key__`,name:a,fieldSchema:c,metadatas:i}),s},[]),$o=(e,t,n)=>{const s=e.uid,a=ve(`relations/${s}/${t}`),c=(0,N.get)(e,["metadatas",t,"edit","mainField","name"],""),i=(0,N.get)(e,["attributes",t,"targetModel"],""),u=Bo(n).indexOf(i)!==-1;return{endPoint:a,containsKey:`${c}`,defaultParams:{},shouldDisplayRelationLink:u}},Eu=(e,t,n,s)=>{const a=ve(`relations/${n}/${t}`),c=(0,N.get)(e,["metadatas",t,"edit","mainField","name"],""),i=(0,N.get)(e,["attributes",t,"targetModel"],""),u=Bo(s).indexOf(i)!==-1;return{endPoint:a,containsKey:`${c}`,defaultParams:{_component:e.uid},shouldDisplayRelationLink:u}},Bo=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t),No=yu;var Wt=p(8041),vu=Object.defineProperty,Cu=Object.defineProperties,Pu=Object.getOwnPropertyDescriptors,Vo=Object.getOwnPropertySymbols,Ou=Object.prototype.hasOwnProperty,Ru=Object.prototype.propertyIsEnumerable,qo=(e,t,n)=>t in e?vu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,zt=(e,t)=>{for(var n in t||(t={}))Ou.call(t,n)&&qo(e,n,t[n]);if(Vo)for(var n of Vo(t))Ru.call(t,n)&&qo(e,n,t[n]);return e},Wo=(e,t)=>Cu(e,Pu(t));const Mu={error:null,isLoading:!0,layout:{},layouts:{}},Tu=(e,t)=>(0,Wt.default)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const s=t.data.contentType.uid;n.layout=t.data,n.layouts[s]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const s=e.layout;n.layout=Wo(zt({},s),{contentType:zt({uid:s.contentType.uid},t.newLayout.contentType)}),n.layouts[s.contentType.uid]=Wo(zt({},s),{contentType:zt({uid:s.contentType.uid},t.newLayout.contentType)});break}default:return n}});var Rn=p(42279),wu=p(14506);const Mt=()=>e=>e["content-manager_app"]||wu.E,sP=()=>createSelector(Mt(),e=>e),aP=()=>createSelector(Mt(),e=>e.models),Iu=()=>(0,Rn.P1)(Mt(),e=>({collectionTypeLinks:e.collectionTypeLinks,singleTypeLinks:e.singleTypeLinks})),Mn=()=>(0,Rn.P1)(Mt(),({components:e,models:t})=>({schemas:[...e,...t]})),iP=null;var Du=p(25108),xu=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const zo=e=>{const[{error:t,isLoading:n,layout:s,layouts:a},c]=(0,r.useReducer)(Tu,Mu),i=(0,r.useMemo)(Mn,[]),{schemas:u}=(0,fe.useSelector)(f=>i(f),fe.shallowEqual),l=(0,r.useRef)(!0),d=(0,r.useCallback)((f,y)=>xu(void 0,null,function*(){if(a[f]){c({type:"SET_LAYOUT_FROM_STATE",uid:f});return}c({type:"GET_DATA"});try{const h=ve(`content-types/${f}/configuration`),{data:{data:b}}=yield ge.be.get(h,{cancelToken:y.token});c({type:"GET_DATA_SUCCEEDED",data:No(b,u)})}catch(h){if(Se().isCancel(h))return;l.current&&Du.error(h),l.current&&c({type:"GET_DATA_ERROR",error:h})}}),[a,u]);(0,r.useEffect)(()=>()=>{l.current=!1},[]),(0,r.useEffect)(()=>{const y=Se().CancelToken.source();return d(e,y),()=>{y.cancel("Operation canceled by the user.")}},[e,d]);const m=(0,r.useCallback)(f=>{c({type:"UPDATE_LAYOUT",newLayout:No(f,u)})},[u]);return{error:t,isLoading:n,layout:s,updateLayout:m}},Su=e=>e["content-manager_app"].collectionTypeLinks;var Ne=p(36232),Lu=p(27361),T=p.n(Lu),Fu=p(13218),Uo=p.n(Fu),ku=Object.defineProperty,Au=Object.defineProperties,ju=Object.getOwnPropertyDescriptors,Ho=Object.getOwnPropertySymbols,$u=Object.prototype.hasOwnProperty,Bu=Object.prototype.propertyIsEnumerable,Go=(e,t,n)=>t in e?ku(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Nu=(e,t)=>{for(var n in t||(t={}))$u.call(t,n)&&Go(e,n,t[n]);if(Ho)for(var n of Ho(t))Bu.call(t,n)&&Go(e,n,t[n]);return e},Vu=(e,t)=>Au(e,ju(t));const _o=(e,t)=>Object.keys(e).reduce((n,s)=>{const a=e[s],c=T()(t,[s],a);return Uo()(a)?Vu(Nu({},n),{[s]:_o(a,c)}):(n[s]=c,n)},{}),qu=(e,t,n)=>{const s=e.find(({to:m})=>m.includes(t));if(!s)return"/";const{to:a,search:c}=s,i=(0,Ne.parse)(c),u=(0,Ne.parse)(n.substring(1)),l=_o(i,u);return`${a}?${(0,Ne.stringify)(l,{encode:!1})}`},Zo=e=>{const[{rawQuery:t}]=(0,g.useQueryParams)(),n=(0,fe.useSelector)(Su);return qu(n,e,t)},He=()=>(0,r.useContext)(jt),Qo=()=>{const{search:e}=(0,X.useLocation)(),t=e?(0,Ne.parse)(e.substring(1)):{};return t.plugins?(0,Ne.stringify)({plugins:t.plugins},{encode:!1}):""};var Ko=p(80015);const Wu=(e,t,n)=>({type:Ko.m,permissions:e,__meta__:{plugins:t,containerName:n}}),zu=()=>({type:Ko.Q}),Uu=e=>e["content-manager_rbacManager"].permissions,Hu=e=>e.rbacProvider.collectionTypesRelatedPermissions,Yo=(e,t,n="listView")=>{const s=(0,fe.useSelector)(Hu),a=(0,fe.useSelector)(Uu),c=(0,fe.useDispatch)(),i=s[t];return(0,r.useEffect)(()=>i?(c(Wu(i,e?e.plugins:null,n)),()=>{c(zu())}):()=>{},[i,c,e,n]),a},gP=()=>useContext(WysiwygContext),yP=null;var Ut=p(80660),Jo=p(15113);const Gu=()=>({type:Jo.c}),_u=(e,t)=>({type:Jo.O,layout:e,query:t});var Zu=p(69590),We=p.n(Zu),Ht=p(14276),le=p(34626),Qu=p(85557),Ku=p.n(Qu),Yu=p(47713);const Ju=()=>(0,r.useContext)(Yu.ux),Xo=e=>{const{getAdminInjectedComponents:t}=Ju(),[n,s,a]=e.split(".");return t(n,s,a)};var Xu=Object.defineProperty,Gt=Object.getOwnPropertySymbols,es=Object.prototype.hasOwnProperty,ts=Object.prototype.propertyIsEnumerable,ns=(e,t,n)=>t in e?Xu(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ed=(e,t)=>{for(var n in t||(t={}))es.call(t,n)&&ns(e,n,t[n]);if(Gt)for(var n of Gt(t))ts.call(t,n)&&ns(e,n,t[n]);return e},td=(e,t)=>{var n={};for(var s in e)es.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&Gt)for(var s of Gt(e))t.indexOf(s)<0&&ts.call(e,s)&&(n[s]=e[s]);return n};const rs=e=>{var t=e,{area:n}=t,s=td(t,["area"]);return Xo(n).map(c=>r.createElement(c.Component,ed({key:c.name},s)))};rs.propTypes={area:o().string.isRequired};const _t=rs;var nd=Object.defineProperty,os=Object.getOwnPropertySymbols,rd=Object.prototype.hasOwnProperty,od=Object.prototype.propertyIsEnumerable,ss=(e,t,n)=>t in e?nd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,as=(e,t)=>{for(var n in t||(t={}))rd.call(t,n)&&ss(e,n,t[n]);if(os)for(var n of os(t))od.call(t,n)&&ss(e,n,t[n]);return e};function sd(e,t){return n=>{const s=t(n.name);return r.createElement(e,as(as({},n),s))}}const ad=sd;function id(e){const{addComponentToDynamicZone:t,createActionAllowedFields:n,isCreatingEntry:s,formErrors:a,modifiedData:c,moveComponentUp:i,moveComponentDown:u,removeComponentFromDynamicZone:l,readActionAllowedFields:d,updateActionAllowedFields:m}=(0,g.useCMEditViewDataManager)(),f=(0,r.useMemo)(()=>(0,N.get)(c,[e],[]).map(b=>b.__component),[c,e]),y=(0,r.useMemo)(()=>(s?n:m).includes(e),[e,s,n,m]),h=(0,r.useMemo)(()=>(s?[]:d).includes(e),[e,s,d]);return{addComponentToDynamicZone:t,formErrors:a,isCreatingEntry:s,isFieldAllowed:y,isFieldReadable:h,moveComponentUp:i,moveComponentDown:u,removeComponentFromDynamicZone:l,dynamicDisplayedComponents:f}}const ld=id;var cd=p(83784),is=p.n(cd),Tn=p(18445);const wn=(0,k.default)(is())`
  transform: ${({$isOpen:e})=>e?"rotate(45deg)":"rotate(0deg)"};
  > circle {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger200:e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e,$hasError:t})=>t?e.colors.danger600:e.colors.neutral600};
  }
`,ud=(0,k.default)(Tn.BaseButton)`
  border-radius: 26px;
  border-color: ${({theme:e})=>e.colors.neutral150};
  background: ${({theme:e})=>e.colors.neutral0};
  padding-top: ${({theme:e})=>e.spaces[3]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  padding-bottom: ${({theme:e})=>e.spaces[3]};
  padding-left: ${({theme:e})=>e.spaces[4]};

  box-shadow: ${({theme:e})=>e.shadows.filterShadow};

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};
    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }
  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${wn} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
  &:active {
    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
    ${wn} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`,dd=(0,k.default)(D.Box)`
  height: 100%;
`,In=({hasError:e,hasMaxError:t,hasMinError:n,isDisabled:s,isOpen:a,label:c,missingComponentNumber:i,name:u,onClick:l})=>{const{formatMessage:d}=(0,A.useIntl)(),m=d({id:v("components.DynamicZone.add-component"),defaultMessage:"Add a component to {componentName}"},{componentName:c||u}),f=d({id:"app.utils.close-label",defaultMessage:"Close"});let y=a?f:m;return t&&!a&&(y=d({id:"components.Input.error.validation.max",defaultMessage:"The value is too high."})),n&&!a&&(y=d({id:v("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}"},{number:i})),r.createElement(j.Flex,{justifyContent:"center"},r.createElement(D.Box,{style:{cursor:s?"not-allowed":"pointer"}},r.createElement(ud,{type:"button",onClick:l,disabled:s,hasError:e},r.createElement(j.Flex,null,r.createElement(dd,{"aria-hidden":!0,paddingRight:2},r.createElement(wn,{$isOpen:a,$hasError:e&&!a})),r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:e&&!a?"danger600":"neutral500"},y)))))};In.defaultProps={label:"",missingComponentNumber:0},In.propTypes={label:o().string,hasError:o().bool.isRequired,hasMaxError:o().bool.isRequired,hasMinError:o().bool.isRequired,isDisabled:o().bool.isRequired,isOpen:o().bool.isRequired,missingComponentNumber:o().number,name:o().string.isRequired,onClick:o().func.isRequired};const pd=In,md=(0,k.default)(D.Box)`
  border-radius: ${(0,g.pxToRem)(26)};
`,Dn=({label:e,labelAction:t,name:n,numberOfComponents:s,required:a,intlDescription:c})=>{const{formatMessage:i}=(0,A.useIntl)(),u=i({id:e||n,defaultMessage:e||n});return r.createElement(j.Flex,{justifyContent:"center"},r.createElement(D.Box,null,r.createElement(md,{paddingTop:3,paddingBottom:3,paddingRight:4,paddingLeft:4,background:"neutral0",shadow:"filterShadow",color:"neutral500"},r.createElement(j.Flex,{direction:"column",justifyContent:"center"},r.createElement(j.Flex,{maxWidth:(0,g.pxToRem)(356)},r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold",ellipsis:!0},u,"\xA0"),r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",fontWeight:"bold"},"(",s,")"),a&&r.createElement(L.Typography,{textColor:"danger600"},"*"),t&&r.createElement(D.Box,{paddingLeft:1},t)),c&&r.createElement(D.Box,{paddingTop:1,maxWidth:(0,g.pxToRem)(356)},r.createElement(L.Typography,{variant:"pi",textColor:"neutral600",ellipsis:!0},i(c)))))))};Dn.defaultProps={intlDescription:void 0,label:"",labelAction:void 0,required:!1},Dn.propTypes={intlDescription:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),label:o().string,labelAction:o().element,name:o().string.isRequired,numberOfComponents:o().number.isRequired,required:o().bool};const fd=Dn;var xn=p(67814),ze=p(96654),Sn=p(24824),ls=p(40064),gd=p(31513),yd=p.n(gd),hd=p(43888),bd=p.n(hd),Ed=p(84238),vd=p.n(Ed),Cd=Object.defineProperty,cs=Object.getOwnPropertySymbols,Pd=Object.prototype.hasOwnProperty,Od=Object.prototype.propertyIsEnumerable,us=(e,t,n)=>t in e?Cd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Rd=(e,t)=>{for(var n in t||(t={}))Pd.call(t,n)&&us(e,n,t[n]);if(cs)for(var n of cs(t))Od.call(t,n)&&us(e,n,t[n]);return e};const Md=k.default.span`
  > svg {
    width: ${(0,g.pxToRem)(24)};
    height: ${(0,g.pxToRem)(24)};
    > circle {
      fill: ${({theme:e})=>e.colors.primary200};
    }
    > path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Ln=({error:e,isReadOnly:t,onClick:n})=>{const{formatMessage:s}=(0,A.useIntl)();return r.createElement(r.Fragment,null,r.createElement(D.Box,{as:"button",background:"neutral100",borderColor:e?"danger600":"neutral200",disabled:t,hasRadius:!0,onClick:n,paddingTop:9,paddingBottom:9,type:"button"},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{cursor:t?"not-allowed":"inherit"}},r.createElement(Md,null,r.createElement(is(),null))),r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{textColor:"primary600",variant:"pi",fontWeight:"bold"},s({id:v("components.empty-repeatable"),defaultMessage:"No entry yet. Click on the button below to add one."}))))),(e==null?void 0:e.id)&&r.createElement(L.Typography,{textColor:"danger600",variant:"pi"},s({id:e.id,defaultMessage:e.id},Rd({},e.values))))};Ln.defaultProps={error:void 0,isReadOnly:!1},Ln.propTypes={error:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),isReadOnly:o().bool,onClick:o().func.isRequired};const ds=Ln;var Td=p(57557),wd=p.n(Td),Id=p(69572),Zt=p.n(Id),Dd=p(4631),Qt=p.n(Dd),EP=p(88386),xd=p(9980),Sd=p.n(xd),Fn=p(77869),Ld=p(79411),Fd=p.n(Ld),kd=p(40591),ps=p.n(kd),Ad=p(30645),jd=p.n(Ad),$d=p(46635),Bd=p.n($d),Nd=p(52384),Vd=p.n(Nd),qd=p(44266),Wd=p.n(qd),zd=p(94574),Ud=p.n(zd),Hd=p(40700),Gd=p.n(Hd),_d=p(97003),Zd=p.n(_d),Qd=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});(()=>Qd(void 0,null,function*(){yield p.e(7347).then(p.bind(p,24840))}))();const ct=new(Sd())({html:!0,xhtmlOut:!1,breaks:!0,langPrefix:"language-",linkify:!0,typographer:!0,highlight(e,t){if(t&&t!=="auto"&&(0,Fn.getLanguage)(t))return'<pre class="hljs language-'+ct.utils.escapeHtml(t.toLowerCase())+'"><code>'+(0,Fn.highlight)(t,e,!0).value+"</code></pre>";if(t==="auto"){const n=(0,Fn.highlightAuto)(e);return'<pre class="hljs language-'+ct.utils.escapeHtml(n.language)+'"><code>'+n.value+"</code></pre>"}return'<pre class="hljs"><code>'+ct.utils.escapeHtml(e)+"</code></pre>"}}).use(Fd()).use(ps(),"warning").use(ps(),"tip").use(jd()).use(Bd()).use(Vd()).use(Wd()).use(Ud()).use(Gd()).use(Zd());ct.renderer.rules.footnote_ref=(e,t,n,s,a)=>'<sup class="footnote-ref"><span>'+a.rules.footnote_caption(e,t,n,s,a)+"</span></sup>",ct.renderer.rules.footnote_anchor=()=>' <span class="footnote-backref">\u21A9\uFE0E</span>';const Kd=ct;var Yd=p(91036),ms=p.n(Yd),Jd=Object.defineProperty,Xd=Object.defineProperties,ep=Object.getOwnPropertyDescriptors,fs=Object.getOwnPropertySymbols,tp=Object.prototype.hasOwnProperty,np=Object.prototype.propertyIsEnumerable,gs=(e,t,n)=>t in e?Jd(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rp=(e,t)=>{for(var n in t||(t={}))tp.call(t,n)&&gs(e,n,t[n]);if(fs)for(var n of fs(t))np.call(t,n)&&gs(e,n,t[n]);return e},op=(e,t)=>Xd(e,ep(t));const sp=op(rp({},ms().defaults),{allowedTags:!1,allowedAttributes:{"*":["href","align","alt","center","width","height","type","controls","target"],img:["src","alt"],source:["src","type"]}}),ap=e=>ms()(e,sp),ip=k.default.div`
  position: absolute;
  top: 0;
  width: 100%;
  height: 100%;
  overflow: auto;
  padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
  font-size: ${14/16}rem;
  background-color: ${({theme:e})=>e.colors.neutral0};
  z-index: 2;
  cursor: not-allowed;
  color: ${({theme:e})=>e.colors.neutral800};

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-block-start: 10px;
    margin-block-end: 10px;
  }

  p {
    margin-bottom: 10px;
  }

  h1 {
    font-size: ${36/16}rem;
    font-weight: 600;
  }

  h2 {
    font-size: ${30/16}rem;
    font-weight: 500;
  }

  h3 {
    font-size: ${24/16}rem;
    font-weight: 500;
  }

  h4 {
    font-size: ${20/16}rem;
    font-weight: 500;
  }

  strong {
    font-weight: 800;
  }

  em {
    font-style: italic;
  }

  blockquote {
    margin-top: 41px;
    margin-bottom: 34px;
    font-size: ${14/16}rem;
    font-weight: 400;
    border-left: 5px solid #eee;
    font-style: italic;
    padding: 10px 20px;
  }

  img {
    max-width: 100%;
  }

  table {
    thead {
      background: ${({theme:e})=>e.colors.neutral150};

      th {
        padding: ${({theme:e})=>e.spaces[4]};
      }
    }
    tr {
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    th,
    td {
      padding: ${({theme:e})=>e.spaces[4]};
      border: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 0;
      border-top: 0;
    }
  }

  pre,
  code {
    font-size: 13px;
    border-radius: 3px;
    background-color: #002b36;
  }

  /* Inline code */
  p,
  pre,
  td {
    > code {
      color: #839496;
    }
  }

  .warning {
    background-color: #faa684;
    padding: 30px;
    border-radius: 3px;
  }
  .tip {
    padding: 30px;
    border-radius: 3px;
  }

  .footnote-ref,
  .footnote-backref {
    color: #007bff;
  }

  ol {
    list-style-type: decimal;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ol,
    ul {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }

  ul {
    list-style-type: disc;
    margin-block-start: ${({theme:e})=>e.spaces[4]};
    margin-block-end: ${({theme:e})=>e.spaces[4]};
    margin-inline-start: 0px;
    margin-inline-end: 0px;
    padding-inline-start: ${({theme:e})=>e.spaces[4]};
    ul,
    ol {
      margin-block-start: 0px;
      margin-block-end: 0px;
    }
  }
`,kn=({data:e})=>{const t=(0,r.useMemo)(()=>ap(Kd.render(e.replaceAll("\\n",`
`)||"")),[e]);return r.createElement(ip,null,r.createElement("div",{dangerouslySetInnerHTML:{__html:t}}))};kn.defaultProps={data:""},kn.propTypes={data:o().string};const ys=(0,r.memo)(kn),lp=k.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  height: 100%;
  /* BASICS */
  .CodeMirror-placeholder {
    color: ${({theme:e})=>e.colors.neutral600} !important;
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    height: ${({isExpandMode:e})=>e?"100%":"290px"};
    color: ${({theme:e})=>e.colors.neutral800};
    direction: ltr;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell,
      'Open Sans', 'Helvetica Neue', sans-serif;
  }

  /* PADDING */

  .CodeMirror-lines {
    padding: ${({theme:e})=>`${e.spaces[3]} ${e.spaces[4]}`};
    /* Vertical padding around content */
  }

  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    /* The little square between H and V scrollbars */
    background-color: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  /* GUTTER */

  .CodeMirror-gutters {
    border-right: 1px solid #ddd;
    background-color: #f7f7f7;
    white-space: nowrap;
  }
  .CodeMirror-linenumbers {
  }
  .CodeMirror-linenumber {
    padding: 0 3px 0 5px;
    min-width: 20px;
    text-align: right;
    color: #999;
    white-space: nowrap;
  }

  .CodeMirror-guttermarker {
    color: black;
  }
  .CodeMirror-guttermarker-subtle {
    color: #999;
  }

  /* CURSOR */

  .CodeMirror-cursor {
    border-left: 1px solid black;
    border-right: none;
    width: 0;
  }
  /* Shown when moving in bi-directional text */
  .CodeMirror div.CodeMirror-secondarycursor {
    border-left: 1px solid silver;
  }
  .cm-fat-cursor .CodeMirror-cursor {
    width: auto;
    border: 0 !important;
    background: #7e7;
  }
  .cm-fat-cursor div.CodeMirror-cursors {
    /* z-index: 1; */
  }

  .cm-fat-cursor-mark {
    background-color: rgba(20, 255, 20, 0.5);
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
  }
  .cm-animate-fat-cursor {
    width: auto;
    border: 0;
    -webkit-animation: blink 1.06s steps(1) infinite;
    -moz-animation: blink 1.06s steps(1) infinite;
    animation: blink 1.06s steps(1) infinite;
    background-color: #7e7;
  }

  /* Can style cursor different in overwrite (non-insert) mode */
  .CodeMirror-overwrite .CodeMirror-cursor {
  }

  .cm-tab {
    display: inline-block;
    text-decoration: inherit;
  }

  .CodeMirror-rulers {
    position: absolute;
    left: 0;
    right: 0;
    top: -50px;
    bottom: 0;
    overflow: hidden;
  }
  .CodeMirror-ruler {
    border-left: 1px solid #ccc;
    top: 0;
    bottom: 0;
    position: absolute;
  }

  /* DEFAULT THEME */

  .cm-header,
  .cm-strong {
    font-weight: bold;
  }
  .cm-em {
    font-style: italic;
  }
  .cm-link {
    text-decoration: underline;
  }
  .cm-strikethrough {
    text-decoration: line-through;
  }

  .CodeMirror-composing {
    border-bottom: 2px solid;
  }

  /* Default styles for common addons */

  div.CodeMirror span.CodeMirror-matchingbracket {
    color: #0b0;
  }
  div.CodeMirror span.CodeMirror-nonmatchingbracket {
    color: #a22;
  }
  .CodeMirror-matchingtag {
    background: rgba(255, 150, 0, 0.3);
  }
  .CodeMirror-activeline-background {
    background: #e8f2ff;
  }

  /* STOP */

  /* The rest of this file contains styles related to the mechanics of
    the editor. You probably shouldn't touch them. */

  .CodeMirror {
    position: relative;
    overflow: hidden;
    background: ${({theme:e})=>`${e.colors.neutral0}`};
  }

  .CodeMirror-scroll {
    overflow: scroll !important; /* Things will break if this is overridden */
    /* 50px is the magic margin used to hide the element's real scrollbars */
    /* See overflow: hidden in .CodeMirror */
    margin-bottom: -50px;
    margin-right: -50px;
    padding-bottom: 50px;
    height: 100%;
    outline: none; /* Prevent dragging from highlighting the element */
    position: relative;
  }
  .CodeMirror-sizer {
    position: relative;
    border-right: 50px solid transparent;
  }

  /* The fake, visible scrollbars. Used to force redraw during scrolling
    before actual scrolling happens, thus preventing shaking and
    flickering artifacts. */
  .CodeMirror-vscrollbar,
  .CodeMirror-hscrollbar,
  .CodeMirror-scrollbar-filler,
  .CodeMirror-gutter-filler {
    position: absolute;
    z-index: 1;
    display: none;
    outline: none;
  }

  .CodeMirror-vscrollbar {
    right: 0;
    top: 0;
    overflow-x: hidden;
    overflow-y: scroll;
  }
  .CodeMirror-hscrollbar {
    bottom: 0;
    left: 0;
    overflow-y: hidden;
    overflow-x: scroll;
  }
  .CodeMirror-scrollbar-filler {
    right: 0;
    bottom: 0;
  }

  .CodeMirror-lines {
    cursor: text;
    min-height: 1px; /* prevents collapsing before first draw */
  }
  /* Reset some styles that the rest of the page might have set */
  .CodeMirror pre.CodeMirror-line,
  .CodeMirror pre.CodeMirror-line-like {
    -moz-border-radius: 0;
    -webkit-border-radius: 0;
    border-radius: 0;
    border-width: 0;
    background: transparent;
    font-family: inherit;
    font-size: inherit;
    margin: 0;
    white-space: pre;
    word-wrap: normal;
    line-height: 1.5;
    color: inherit;
    /* z-index: 2; */
    position: relative;
    overflow: visible;
    -webkit-tap-highlight-color: transparent;
    -webkit-font-variant-ligatures: contextual;
    font-variant-ligatures: contextual;
  }

  .CodeMirror pre.CodeMirror-line-like {
    z-index: 2;
  }

  .CodeMirror-wrap pre.CodeMirror-line,
  .CodeMirror-wrap pre.CodeMirror-line-like {
    word-wrap: break-word;
    white-space: pre-wrap;
    word-break: normal;
  }

  .CodeMirror-linebackground {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    bottom: 0;
    z-index: 0;
  }

  .CodeMirror-linewidget {
    position: relative;
    /* z-index: 2; */
    padding: 0.1px; /* Force widget margins to stay inside of the container */
  }

  .CodeMirror-widget {
  }

  .CodeMirror-rtl pre {
    direction: rtl;
  }

  .CodeMirror-code {
    outline: none;
  }

  /* Force content-box sizing for the elements where we expect it */
  .CodeMirror-scroll,
  .CodeMirror-sizer,
  .CodeMirror-gutter,
  .CodeMirror-gutters,
  .CodeMirror-linenumber {
    -moz-box-sizing: content-box;
    box-sizing: content-box;
  }

  .CodeMirror-measure {
    position: absolute;
    width: 100%;
    height: 0;
    overflow: hidden;
    visibility: hidden;
  }

  .CodeMirror-cursor {
    position: absolute;
    pointer-events: none;
    border-color: ${({theme:e})=>`${e.colors.neutral800}`};
  }
  .CodeMirror-measure pre {
    position: static;
  }

  div.CodeMirror-cursors {
    visibility: hidden;
    position: relative;
    + div {
      z-index: 0 !important;
    }
  }

  div.CodeMirror-dragcursors {
    visibility: visible;
  }

  .CodeMirror-focused div.CodeMirror-cursors {
    visibility: visible;
  }

  .CodeMirror-selected {
    background: ${({theme:e})=>e.colors.neutral200};
    /* z-index: -10; */
  }
  .CodeMirror-crosshair {
    cursor: crosshair;
  }

  /* Used to force a border model for a node */
  .cm-force-border {
    padding-right: 0.1px;
  }

  /* See issue #2901 */
  .cm-tab-wrap-hack:after {
    content: '';
  }

  /* Help users use markselection to safely style text background */
  span.CodeMirror-selectedtext {
    background: none;
  }

  span {
    color: ${({theme:e})=>e.colors.neutral800} !important;
  }
`,Le=(0,k.default)(Me.IconButton)`
  padding: ${({theme:e})=>e.spaces[2]};
  /* Trick to prevent the outline from overflowing because of the general outline-offset */
  outline-offset: -2px !important;

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,cp=(0,k.default)(Le)`
  svg {
    width: ${8/16}rem;
    height: ${8/16}rem;
  }
`,hs=(0,k.default)(Me.IconButtonGroup)`
  margin-left: ${({theme:e})=>e.spaces[4]};
`,bs=(0,k.default)(Me.IconButton)`
  margin: ${({theme:e})=>`0 ${e.spaces[2]}`};
  padding: ${({theme:e})=>e.spaces[2]};

  svg {
    width: ${18/16}rem;
    height: ${18/16}rem;
  }
`,up=(0,k.default)(Me.IconButtonGroup)`
  margin-right: ${({theme:e})=>`${e.spaces[2]}`};
`,dp=k.default.div`
  position: relative;
  height: calc(100% - 48px);
`,pp=(0,k.default)(Tn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`;var Kt=/^(\s*)(>[> ]*|[*+-] \[[x ]\]\s|[*+-]\s|(\d+)([.)]))(\s*)/,mp=/^(\s*)(>[> ]*|[*+-] \[[x ]\]|[*+-]|(\d+)[.)])(\s*)$/,fp=/[*+-]\s/;function gp(e){if(e.getOption("disableInput"))return Qt().Pass;for(var t=e.listSelections(),n=[],s=0;s<t.length;s++){var a=t[s].head,c=e.getStateAfter(a.line),i=c.list!==!1,u=c.quote!==0,l=e.getLine(a.line),d=Kt.exec(l),m=/^\s*$/.test(l.slice(0,a.ch));if(!t[s].empty()||!i&&!u||!d||m){e.execCommand("newlineAndIndent");return}if(mp.test(l)){var f=u&&/>\s*$/.test(l),y=!/>\s*$/.test(l);(f||y)&&e.replaceRange("",{line:a.line,ch:0},{line:a.line,ch:a.ch+1}),n[s]=`
`}else{var h=d[1],b=d[5],E=!(fp.test(d[2])||d[2].indexOf(">")>=0),F=E?parseInt(d[3],10)+1+d[4]:d[2].replace("x"," ");n[s]=`
`+h+F+b,E&&yp(e,a)}}e.replaceSelections(n)}function yp(e,t){var n=t.line,s=0,a=0,c=Kt.exec(e.getLine(n)),i=c[1];do{s+=1;var u=n+s,l=e.getLine(u),d=Kt.exec(l);if(d){var m=d[1],f=parseInt(c[3],10)+s-a,y=parseInt(d[3],10),h=y;if(i===m&&!isNaN(y))f===y&&(h=y+1),f>y&&(h=f+1),e.replaceRange(l.replace(Kt,m+h+d[4]+d[5]),{line:u,ch:0},{line:u,ch:l.length});else{if(i.length>m.length||i.length<m.length&&s===1)return;a+=1}}}while(d)}const hp=gp,An=({disabled:e,editorRef:t,error:n,isPreviewMode:s,isExpandMode:a,name:c,onChange:i,placeholder:u,textareaRef:l,value:d})=>{const m=(0,r.useRef)(i);return(0,r.useEffect)(()=>{t.current=Qt().fromTextArea(l.current,{lineWrapping:!0,extraKeys:{Enter:"newlineAndIndentContinueMarkdownList",Tab:!1,"Shift-Tab":!1},readOnly:!1,smartIndent:!1,placeholder:u,spellcheck:!0,inputStyle:"contenteditable"}),Qt().commands.newlineAndIndentContinueMarkdownList=hp,t.current.on("change",f=>{m.current({target:{name:c,value:f.getValue(),type:"wysiwyg"}})})},[t,l,c,u]),(0,r.useEffect)(()=>{d&&!t.current.state.focused&&t.current.setValue(d)},[t,d]),(0,r.useEffect)(()=>{s||e?t.current.setOption("readOnly","nocursor"):t.current.setOption("readOnly",!1)},[e,s,t]),(0,r.useEffect)(()=>{n?t.current.setOption("screenReaderLabel",n):t.current.setOption("screenReaderLabel","Editor")},[t,n]),r.createElement(dp,null,r.createElement(lp,{isExpandMode:a,disabled:e||s},r.createElement("textarea",{ref:l})),s&&r.createElement(ys,{data:d}))};An.defaultProps={disabled:!1,error:void 0,isPreviewMode:!1,isExpandMode:!1,placeholder:"",value:""},An.propTypes={disabled:o().bool,editorRef:o().shape({current:o().any}).isRequired,error:o().string,isPreviewMode:o().bool,isExpandMode:o().bool,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().string,textareaRef:o().shape({current:o().any}).isRequired,value:o().string};const bp=An;var ye=p(19408),de=p(43808),Ep=p(24955),vp=p(53418),Es=p.n(vp),Cp=p(36531),vs=p.n(Cp),Pp=p(89084),Cs=p.n(Pp),Op=p(52245),Rp=p.n(Op),Mp=p(61517),Tp=p.n(Mp),wp=p(24509),Ip=p.n(wp),Dp=p(74389),xp=p.n(Dp),Sp=p(16305),Lp=p.n(Sp),Fp=p(42724),kp=p.n(Fp),Ap=p(50086),jp=p.n(Ap),$p=p(83657),Ps=p.n($p);const jn=({disabled:e,editorRef:t,isExpandMode:n,isPreviewMode:s,onActionClick:a,onToggleMediaLib:c,onTogglePreviewMode:i})=>{const[u,l]=(0,r.useState)(!1),{formatMessage:d}=(0,A.useIntl)(),m=d({id:"components.Wysiwyg.selectOptions.title",defaultMessage:"Add a title"}),f=(0,r.useRef)(),y=()=>{l(h=>!h)};return e||s?r.createElement(D.Box,{padding:2,background:"neutral100"},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(de.Select,{disabled:!0,id:"selectTitle",placeholder:m,size:"S","aria-label":m},r.createElement(de.Option,{value:"h1"},"h1"),r.createElement(de.Option,{value:"h2"},"h2"),r.createElement(de.Option,{value:"h3"},"h3"),r.createElement(de.Option,{value:"h4"},"h4"),r.createElement(de.Option,{value:"h5"},"h5"),r.createElement(de.Option,{value:"h6"},"h6")),r.createElement(hs,null,r.createElement(Le,{disabled:!0,id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(Es(),null)}),r.createElement(Le,{disabled:!0,id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(vs(),null)}),r.createElement(Le,{disabled:!0,id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(Cs(),null)})),r.createElement(bs,{disabled:!0,id:"more",label:"More",icon:r.createElement(Ps(),null)})),!n&&r.createElement(ye.Button,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.markdown-mode",defaultMessage:"Markdown mode"})))):r.createElement(D.Box,{padding:2,background:"neutral100"},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(de.Select,{id:"selectTitle",placeholder:m,size:"S",onChange:h=>a(h,t)},r.createElement(de.Option,{value:"h1"},"h1"),r.createElement(de.Option,{value:"h2"},"h2"),r.createElement(de.Option,{value:"h3"},"h3"),r.createElement(de.Option,{value:"h4"},"h4"),r.createElement(de.Option,{value:"h5"},"h5"),r.createElement(de.Option,{value:"h6"},"h6")),r.createElement(hs,null,r.createElement(Le,{onClick:()=>a("Bold",t),id:"Bold",label:"Bold",name:"Bold",icon:r.createElement(Es(),null)}),r.createElement(Le,{onClick:()=>a("Italic",t),id:"Italic",label:"Italic",name:"Italic",icon:r.createElement(vs(),null)}),r.createElement(Le,{onClick:()=>a("Underline",t),id:"Underline",label:"Underline",name:"Underline",icon:r.createElement(Cs(),null)})),r.createElement(bs,{ref:f,onClick:y,id:"more",label:"More",icon:r.createElement(Ps(),null)}),u&&r.createElement(Ep.Popover,{centered:!0,source:f,spacing:4,id:"popover"},r.createElement(Sn.FocusTrap,{onEscape:y,restoreFocus:!1},r.createElement(j.Flex,null,r.createElement(up,null,r.createElement(Le,{onClick:()=>a("Strikethrough",t,y),id:"Strikethrough",label:"Strikethrough",name:"Strikethrough",icon:r.createElement(Rp(),null)}),r.createElement(Le,{onClick:()=>a("BulletList",t,y),id:"BulletList",label:"BulletList",name:"BulletList",icon:r.createElement(Tp(),null)}),r.createElement(Le,{onClick:()=>a("NumberList",t,y),id:"NumberList",label:"NumberList",name:"NumberList",icon:r.createElement(Ip(),null)})),r.createElement(Me.IconButtonGroup,null,r.createElement(Le,{onClick:()=>a("Code",t,y),id:"Code",label:"Code",name:"Code",icon:r.createElement(xp(),null)}),r.createElement(Le,{onClick:()=>{y(),c()},id:"Image",label:"Image",name:"Image",icon:r.createElement(Lp(),null)}),r.createElement(cp,{onClick:()=>a("Link",t,y),id:"Link",label:"Link",name:"Link",icon:r.createElement(kp(),null)}),r.createElement(Le,{onClick:()=>a("Quote",t,y),id:"Quote",label:"Quote",name:"Quote",icon:r.createElement(jp(),null)})))))),i&&r.createElement(ye.Button,{onClick:i,variant:"tertiary",id:"preview"},d({id:"components.Wysiwyg.ToggleMode.preview-mode",defaultMessage:"Preview mode"}))))};jn.defaultProps={isPreviewMode:!1,onActionClick(){},onToggleMediaLib(){},onTogglePreviewMode:void 0},jn.propTypes={disabled:o().bool.isRequired,editorRef:o().shape({current:o().any}).isRequired,isExpandMode:o().bool.isRequired,isPreviewMode:o().bool,onActionClick:o().func,onToggleMediaLib:o().func,onTogglePreviewMode:o().func};const Bp=jn;var Np=p(52286),Vp=p.n(Np);const $n=({onToggleExpand:e})=>{const{formatMessage:t}=(0,A.useIntl)();return r.createElement(D.Box,{padding:2,background:"neutral100",hasRadius:!0},r.createElement(j.Flex,{justifyContent:"flex-end",alignItems:"flex-end"},r.createElement(pp,{id:"expand",onClick:e},r.createElement(L.Typography,null,t({id:"components.WysiwygBottomControls.fullscreen",defaultMessage:"Expand"})),r.createElement(Vp(),null))))};$n.defaultProps={onToggleExpand(){}},$n.propTypes={onToggleExpand:o().func};const qp=$n;var Wp=Object.defineProperty,Os=Object.getOwnPropertySymbols,zp=Object.prototype.hasOwnProperty,Up=Object.prototype.propertyIsEnumerable,Rs=(e,t,n)=>t in e?Wp(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hp=(e,t)=>{for(var n in t||(t={}))zp.call(t,n)&&Rs(e,n,t[n]);if(Os)for(var n of Os(t))Up.call(t,n)&&Rs(e,n,t[n]);return e};const Bn=({id:e,error:t,name:n,description:s})=>{const{formatMessage:a}=(0,A.useIntl)(),c=s?a({id:s.id,defaultMessage:s.defaultMessage},Hp({},s.values)):"";return!c||t?null:r.createElement(L.Typography,{as:"p",variant:"pi",id:`${e||n}-hint`,textColor:"neutral600"},c)};Bn.defaultProps={id:void 0,description:void 0,error:void 0},Bn.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),error:o().string,id:o().string,name:o().string.isRequired};const Gp=Bn,Ms=(e,t)=>{let n;switch(e){case"Strikethrough":n=`~~${t}~~`;break;case"Bold":n=`**${t}**`;break;case"Italic":n=`_${t}_`;break;case"Underline":n=`<u>${t}</u>`;break;case"Code":n=`\`\`\`
${t}
\`\`\``;break;case"Link":n=`[${t}](link)`;break;case"Quote":n=`>${t}`;break;default:n=t}return n},Ts=e=>{let t,n={start:e.length,end:0};switch(e){case"Strikethrough":t=`~~${e}~~`,n.end=2;break;case"Bold":t=`**${e}**`,n.end=2;break;case"Italic":t=`_${e}_`,n.end=1;break;case"alt":t=`[${e}]()`,n.end=3;break;case"Underline":t=`<u>${e}</u>`,n.end=4;break;case"Code":t=`\`\`\`
${e}
\`\`\``,n.end=3;break;case"Link":t=`[${e}](link)`,n.end=7;break;case"Quote":t=`>${e}`,n.end=0;break;default:t=""}return{editedText:t,selection:n}},ws=e=>{let t;switch(e){case"BulletList":t="- ";break;case"NumberList":t="1. ";break;case"h1":t="# ";break;case"h2":t="## ";break;case"h3":t="### ";break;case"h4":t="#### ";break;case"h5":t="##### ";break;case"h6":t="###### ";break;default:return""}return t},Is=(e,t)=>{const n=e.current.getSelection();let s;if(n){const a=Ms(t,n);e.current.replaceSelection(a),e.current.focus()}else{s=Ts(t),e.current.replaceSelection(s.editedText),e.current.focus();const{line:a,ch:c}=e.current.getCursor(),i=c-s.selection.end,u=c-s.selection.end-s.selection.start;e.current.setSelection({line:a,ch:u},{line:a,ch:i})}},_p=(e,t)=>{const n=e.current.getDoc(),s=t==="BulletList"?"- ":"1. ";if(n.somethingSelected()){const a=n.listSelections();let c=null;e.current.operation(function(){a.forEach(function(i){const u=[i.head.line,i.anchor.line].sort();c==null&&(c=n.getLine(u[0]).startsWith(s));for(let l=u[0];l<=u[1];l++)if(c)n.getLine(l).startsWith(s)&&n.replaceRange("",{line:l,ch:0},{line:l,ch:s.length});else{const d=t==="BulletList"?"- ":`${l+1}. `;n.replaceRange(d,{line:l,ch:0})}})})}else{let{line:a}=n.getCursor();const c=ws(t),i=e.current.getLine(a),u=c+i;e.current.setSelection({line:a,ch:0},{line:a,ch:i.length}),e.current.replaceSelection(u)}e.current.focus()},Zp=(e,t)=>{let{line:n}=e.current.getCursor();const s=ws(t),a=e.current.getLine(n),c=a.replace(/#{1,6}\s/g,"").trim(),i=s+c;e.current.setSelection({line:n,ch:0},{line:n,ch:a.length}),e.current.replaceSelection(i),setTimeout(()=>{const u=e.current.getLine(n).length;e.current.focus(),e.current.setCursor({line:n,ch:u})},0)},Qp=(e,t)=>{let{line:n,ch:s}=e.current.getCursor();t.forEach((a,c)=>{let i=e.current.getLine(n).length;e.current.setCursor({line:n,ch:i}),(c>0||c===0&&s!==0)&&(i=e.current.getLine(n).length,e.current.setCursor({line:n,ch:i}),n++,e.current.replaceSelection(`
`)),a.mime.includes("image")?e.current.replaceSelection(`![${a.alt}](${a.url})`):e.current.replaceSelection(`[${a.alt}](${a.url})`)}),setTimeout(()=>e.current.focus(),0)},Kp=(e,t,n,s,a)=>{const c=Ms(t,a),i=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.replaceSelection(""),e.current.setCursor({line:n,ch:s}),e.current.replaceSelection(`
`),e.current.replaceSelection(c),t==="Code"){let{line:u}=e.current.getCursor();e.current.setCursor({line:u-1,ch:a.length})}e.current.replaceRange(i,{line:n+4,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Yp=(e,t,n,s)=>{const a=Ts(t),c=e.current.getRange({line:n+1,ch:0},{line:1/0,ch:1/0});if(e.current.replaceRange("",{line:n+1,ch:0},{line:1/0,ch:1/0}),e.current.setCursor({line:n,ch:s}),e.current.replaceSelection(`
`),e.current.replaceSelection(a.editedText),t==="Code")n+=2,e.current.setSelection({line:n,ch:0},{line:n,ch:4});else{n+=1;let{ch:i}=e.current.getCursor(),u=i-a.selection.end,l=i-a.selection.end-a.selection.start;e.current.setSelection({line:n,ch:l},{line:n,ch:u})}e.current.replaceRange(c,{line:n+2,ch:0},{line:1/0,ch:1/0}),e.current.focus()},Jp=(e,t)=>{const n=e.current.getSelection();let{line:s}=e.current.getCursor(),a=e.current.getLine(s).length;n?Kp(e,t,s,a,n):Yp(e,t,s,a)};var Xp=p(59471),em=p(76149),tm=p.n(em);const nm=(e,t)=>`${e}${Math.floor(t*255).toString(16).padStart(2,0)}`,rm=(0,k.default)(j.Flex)`
  background: ${({theme:e})=>nm(e.colors.neutral800,.2)};
`,om=(0,k.default)(D.Box)`
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,sm=(0,k.default)(Tn.BaseButton)`
  background-color: transparent;
  border: none;
  align-items: center;

  svg {
    margin-left: ${({theme:e})=>`${e.spaces[2]}`};
    path {
      fill: ${({theme:e})=>e.colors.neutral700};
      width: ${12/16}rem;
      height: ${12/16}rem;
    }
  }
`,Nn=({children:e,isExpandMode:t,error:n,previewContent:s,onCollapse:a})=>{const{formatMessage:c}=(0,A.useIntl)();return(0,r.useEffect)(()=>{const i=document.body;return t&&i.classList.add("lock-body-scroll"),()=>{t&&i.classList.remove("lock-body-scroll")}},[t]),t?r.createElement(Xp.Portal,{role:"dialog","aria-modal":!1},r.createElement(Sn.FocusTrap,{onEscape:a},r.createElement(rm,{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:4,justifyContent:"center",onClick:a},r.createElement(D.Box,{id:"wysiwyg-expand",background:"neutral0",hasRadius:!0,shadow:"popupShadow",overflow:"hidden",width:"70%",height:"70%",onClick:i=>i.stopPropagation()},r.createElement(j.Flex,{height:"100%",alignItems:"flex-start"},r.createElement(om,{flex:"1",height:"100%"},e),r.createElement(D.Box,{flex:"1",height:"100%"},r.createElement(j.Flex,{height:(0,g.pxToRem)(48),background:"neutral100",justifyContent:"flex-end"},r.createElement(sm,{id:"collapse",onClick:a},r.createElement(L.Typography,null,c({id:"components.Wysiwyg.collapse",defaultMessage:"Collapse"})),r.createElement(tm(),null))),r.createElement(D.Box,{position:"relative",height:"100%"},r.createElement(ys,{data:s})))))))):r.createElement(D.Box,{borderColor:n?"danger600":"neutral200",borderStyle:"solid",borderWidth:"1px",hasRadius:!0},e)};Nn.defaultProps={error:void 0,previewContent:""},Nn.propTypes={children:o().node.isRequired,error:o().string,isExpandMode:o().bool.isRequired,previewContent:o().string,onCollapse:o().func.isRequired};var am=Object.defineProperty,Ds=Object.getOwnPropertySymbols,im=Object.prototype.hasOwnProperty,lm=Object.prototype.propertyIsEnumerable,xs=(e,t,n)=>t in e?am(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ss=(e,t)=>{for(var n in t||(t={}))im.call(t,n)&&xs(e,n,t[n]);if(Ds)for(var n of Ds(t))lm.call(t,n)&&xs(e,n,t[n]);return e};const cm=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,um=(0,k.default)(L.Typography)`
  line-height: 0;
`,Vn=({description:e,disabled:t,error:n,intlLabel:s,labelAction:a,name:c,onChange:i,placeholder:u,value:l,required:d})=>{const{formatMessage:m}=(0,A.useIntl)(),f=(0,r.useRef)(null),y=(0,r.useRef)(null),[h,b]=(0,r.useState)(!1),[E,F]=(0,r.useState)(!1),[C,P]=(0,r.useState)(!1),{components:I}=(0,g.useLibrary)(),R=I["media-library"],z=()=>F(S=>!S),M=()=>b(S=>!S),V=()=>{b(!1),P(S=>!S)},B=(S,_,W)=>{switch(S){case"Link":case"Strikethrough":{Is(_,S),W();break}case"Code":case"Quote":{Jp(_,S),W();break}case"Bold":case"Italic":case"Underline":{Is(_,S);break}case"BulletList":case"NumberList":{_p(_,S),W();break}case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":{Zp(_,S);break}default:}},Z=S=>{const _=S.map(W=>({alt:W.alternativeText||W.name,url:(0,g.prefixFileUrlWithBackendUrl)(W.url),mime:W.mime}));Qp(y,_),F(!1)},U=u?m({id:u.id,defaultMessage:u.defaultMessage},Ss({},u.values)):"",q=s.id?m({id:s.id,defaultMessage:s.defaultMessage},Ss({},s.values)):c;return r.createElement(r.Fragment,null,r.createElement(se.Stack,{spacing:1},r.createElement(se.Stack,{horizontal:!0,spacing:1},r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral800"},q,d&&r.createElement(um,{textColor:"danger600"},"*")),a&&r.createElement(cm,{paddingLeft:1},a)),r.createElement(Nn,{isExpandMode:C,error:n,previewContent:l,onCollapse:V},r.createElement(Bp,{isExpandMode:C,editorRef:y,isPreviewMode:h,onActionClick:B,onToggleMediaLib:z,onTogglePreviewMode:C?void 0:M,disabled:t}),r.createElement(bp,{disabled:t,isExpandMode:C,editorRef:y,error:n,isPreviewMode:h,name:c,onChange:i,placeholder:U,textareaRef:f,value:l}),!C&&r.createElement(qp,{onToggleExpand:V})),r.createElement(Gp,{description:e,name:c,error:n})),n&&r.createElement(D.Box,{paddingTop:1},r.createElement(L.Typography,{variant:"pi",textColor:"danger600","data-strapi-field-error":!0},n)),E&&r.createElement(R,{onClose:z,onSelectAssets:Z}))};Vn.defaultProps={description:null,disabled:!1,error:"",labelAction:void 0,placeholder:null,required:!1,value:""},Vn.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,onChange:o().func.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),required:o().bool,value:o().string};const dm=Vn;var pm=p(95659),mm=p.n(pm),Tt=p(91767),fm=p(33629);const gm=k.default.div`
  cursor: ${({disabled:e})=>e?"not-allowed !important":"auto"};
  /* BASICS */

  .colored {
    background-color: yellow;
    color: black !important;
  }

  > div {
    border-radius: 3px;
    > div:last-of-type {
      min-height: 253px;
      max-height: 506px;
    }
  }

  .CodeMirror {
    /* Set height, width, borders, and global font properties here */
    font-size: ${14/16}rem;
    direction: ltr;
    z-index: 0;
  }
`,ym=(0,k.default)(D.Box)`
  border-radius: ${({theme:e})=>e.borderRadius};
  border: 1px solid ${({theme:e,error:t})=>t?e.colors.danger600:"transparent"};
`;var hm=Object.defineProperty,Ls=Object.getOwnPropertySymbols,bm=Object.prototype.hasOwnProperty,Em=Object.prototype.propertyIsEnumerable,Fs=(e,t,n)=>t in e?hm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vm=(e,t)=>{for(var n in t||(t={}))bm.call(t,n)&&Fs(e,n,t[n]);if(Ls)for(var n of Ls(t))Em.call(t,n)&&Fs(e,n,t[n]);return e};const Cm=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,qn=({intlLabel:e,labelAction:t,name:n,required:s})=>{const{formatMessage:a}=(0,A.useIntl)(),c=e!=null&&e.id?a({id:e.id,defaultMessage:e.defaultMessage},vm({},e.values)):n;return r.createElement(j.Flex,null,r.createElement(Tt.FieldLabel,{required:s},c),t&&r.createElement(Cm,{paddingLeft:1},t))};qn.defaultProps={id:void 0,intlLabel:void 0,labelAction:void 0,required:!1},qn.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,name:o().string.isRequired,required:o().bool};const Pm=qn,Wn=({name:e,hint:t,error:n,children:s})=>{const{formatMessage:a}=(0,A.useIntl)(),c=n?a({id:n,defaultMessage:n}):"";return r.createElement(Tt.Field,{name:e,hint:t&&a(t),error:c,id:e},s)};Wn.defaultProps={hint:void 0,error:""},Wn.propTypes={name:o().string.isRequired,hint:o().shape({id:o().string,defaultMessage:o().string}),error:o().string,children:o().node.isRequired};const Om=Wn;var Rm=Object.defineProperty,Mm=(e,t,n)=>t in e?Rm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,et=(e,t,n)=>(Mm(e,typeof t!="symbol"?t+"":t,n),n),Tm=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const wm=600,Im="blackboard";(()=>Tm(void 0,null,function*(){yield p.e(3860).then(p.t.bind(p,96876,23)),yield p.e(2781).then(p.t.bind(p,3256,23)),yield p.e(953).then(p.t.bind(p,96477,23)),yield p.e(5178).then(p.t.bind(p,82801,23)),yield p.e(5509).then(p.t.bind(p,64020,23)),yield p.e(3973).then(p.bind(p,91380)),yield p.e(2218).then(p.bind(p,69039))}))();class zn extends r.Component{constructor(t){super(t),et(this,"timer",null),et(this,"setInitValue",()=>{const{value:n}=this.props;try{return n===null?this.codeMirror.setValue(""):n===0?this.codeMirror.setValue("0"):this.codeMirror.setValue(n)}catch(s){return this.setState({error:!0})}}),et(this,"setSize",()=>this.codeMirror.setSize("100%","auto")),et(this,"getContentAtLine",n=>this.codeMirror.getLine(n)),et(this,"markSelection",({message:n})=>{let s=parseInt(n.split(":")[0].split("line ")[1],10)-1,a=this.getContentAtLine(s);a==="{"&&(s+=1,a=this.getContentAtLine(s));const c=a.length,i=c-mm()(a," ").length,u=this.codeMirror.markText({line:s,ch:i},{line:s,ch:c},{className:"colored"});this.setState({markedText:u})}),et(this,"handleChange",(n,s)=>{if(s.origin==="setValue")return;const{name:a,onChange:c}=this.props;let i=n.getValue();i===""&&(i=null),c({target:{name:a,value:i,type:"json"}}),this.state.markedText&&(this.state.markedText.clear(),this.setState({markedText:null,error:null})),clearTimeout(this.timer),this.timer=setTimeout(()=>this.testJSON(n.getValue()),wm)}),et(this,"testJSON",n=>{try{fm.parse(n)}catch(s){this.markSelection(s)}}),this.editor=r.createRef(),this.state={error:!1,markedText:null}}componentDidMount(){this.codeMirror=Qt().fromTextArea(this.editor.current,{autoCloseBrackets:!0,lineNumbers:!0,matchBrackets:!0,mode:"application/json",readOnly:this.props.disabled,smartIndent:!0,styleSelectedText:!0,tabSize:2,theme:Im,fontSize:"13px"}),this.codeMirror.on("change",this.handleChange),this.setSize(),this.setInitValue()}componentDidUpdate(t){t.value!==this.props.value&&!this.codeMirror.state.focused&&this.setInitValue()}render(){return this.state.error?r.createElement("div",null,"error json"):r.createElement(Om,{name:this.props.name,hint:this.props.description,error:this.props.error},r.createElement(se.Stack,{spacing:1},r.createElement(Pm,{intlLabel:this.props.intlLabel,labelAction:this.props.labelAction,name:this.props.name,required:this.props.required}),r.createElement(ym,{error:this.props.error},r.createElement(gm,{disabled:this.props.disabled},r.createElement("textarea",{ref:this.editor,autoComplete:"off",id:this.props.id||this.props.name,defaultValue:""}))),r.createElement(Tt.FieldHint,null),r.createElement(Tt.FieldError,null)))}}zn.defaultProps={description:null,disabled:!1,id:void 0,error:void 0,intlLabel:void 0,labelAction:void 0,onChange(){},value:null,required:!1},zn.propTypes={description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,name:o().string.isRequired,onChange:o().func,value:o().any,required:o().bool};const Dm=zn;var Un=p(55967),xm=p(27590),Sm=p.n(xm),Lm=p(23942),Fm=p.n(Lm),km=p(51359),wt=p.n(km),Am=p(57572),jm=p.n(Am);const ks=(e,t)=>{const[n,s]=(0,r.useState)(e);return(0,r.useEffect)(()=>{const a=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(a)}},[e,t]),n},$m=/^[A-Za-z0-9-_.~]*$/,Bm=(0,k.default)(D.Box)`
  position: relative;
`,Nm=(0,k.default)(Tt.FieldAction)`
  svg {
    height: 1rem;
    width: 1rem;
    path {
      fill: ${({theme:e})=>e.colors.neutral400};
    }
  }

  svg:hover {
    path {
      fill: ${({theme:e})=>e.colors.primary600};
    }
  }
`,Hn=(0,k.default)(j.Flex)`
  position: absolute;
  right: ${({theme:e})=>e.spaces[6]};
  width: 100px;
  pointer-events: none;

  svg {
    margin-right: ${({theme:e})=>e.spaces[1]};
    height: ${12/16}rem;
    width: ${12/16}rem;
    path {
      fill: ${({theme:e,notAvailable:t})=>t?e.colors.danger600:e.colors.success600};
    }
  }
`,Vm=k.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(359deg);
  }
`,qm=(0,k.default)(j.Flex)`
  animation: ${Vm} 2s infinite linear;
`;var Wm=Object.defineProperty,As=Object.getOwnPropertySymbols,zm=Object.prototype.hasOwnProperty,Um=Object.prototype.propertyIsEnumerable,js=(e,t,n)=>t in e?Wm(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gn=(e,t)=>{for(var n in t||(t={}))zm.call(t,n)&&js(e,n,t[n]);if(As)for(var n of As(t))Um.call(t,n)&&js(e,n,t[n]);return e},$s=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const _n=({attribute:e,contentTypeUID:t,description:n,disabled:s,error:a,intlLabel:c,labelAction:i,name:u,onChange:l,value:d,placeholder:m,required:f})=>{const{modifiedData:y,initialData:h,layout:b}=(0,g.useCMEditViewDataManager)(),[E,F]=(0,r.useState)(!1),[C,P]=(0,r.useState)(null),I=ks(d,300),R=(0,r.useRef)(),z=h[u],{formatMessage:M}=(0,A.useIntl)(),V=T()(b,["options","timestamps",0]),B=!h[V],Z=ks(y[e.targetField],300),[U,q]=(0,r.useState)(!1),[S,_]=(0,r.useState)(null),W=c.id?M({id:c.id,defaultMessage:c.defaultMessage},Gn({},c.values)):u,ee=n?M({id:n.id,defaultMessage:n.defaultMessage},Gn({},n.values)):"",w=m?M({id:m.id,defaultMessage:m.defaultMessage},Gn({},m.values)):"";R.current=(O=!1)=>$s(void 0,null,function*(){F(!0);const G=ve("uid/generate");try{const{data:{data:K}}=yield ge.be.post(G,{contentTypeUID:t,field:u,data:y});l({target:{name:u,value:K,type:"text"}},O),F(!1)}catch(K){F(!1)}});const $=()=>$s(void 0,null,function*(){F(!0);const O=ve("uid/check-availability");if(!!d)try{const{data:G}=yield ge.be.post(O,{contentTypeUID:t,field:u,value:d?d.trim():""});P(G),F(!1)}catch(G){F(!1)}});(0,r.useEffect)(()=>{!d&&e.required&&R.current(!0)},[]),(0,r.useEffect)(()=>{I&&I.trim().match($m)&&I!==z&&$(),I||P(null)},[I,z]),(0,r.useEffect)(()=>{let O;return C&&C.isAvailable&&(O=setTimeout(()=>{P(null)},4e3)),()=>{O&&clearTimeout(O)}},[C]),(0,r.useEffect)(()=>{!U&&B&&Z&&y[e.targetField]&&!d&&R.current(!0)},[Z,U,B]);const Y=()=>{_(M({id:"content-manager.components.uid.regenerate",defaultMessage:"Regenerate"}))},Q=()=>{_(null)},x=O=>{O.target.value&&B&&q(!0),l(O)};return r.createElement(Un.TextInput,{disabled:s,error:a,endAction:r.createElement(Bm,null,C&&C.isAvailable&&!S&&r.createElement(Hn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(Fm(),null),r.createElement(L.Typography,{textColor:"success600",variant:"pi"},M({id:"content-manager.components.uid.available",defaultMessage:"Available"}))),C&&!C.isAvailable&&!S&&r.createElement(Hn,{notAvailable:!0,alignItems:"center",justifyContent:"flex-end"},r.createElement(wt(),null),r.createElement(L.Typography,{textColor:"danger600",variant:"pi"},M({id:"content-manager.components.uid.unavailable",defaultMessage:"Unavailable"}))),S&&r.createElement(Hn,{alignItems:"center",justifyContent:"flex-end"},r.createElement(L.Typography,{textColor:"primary600",variant:"pi"},S)),r.createElement(Nm,{onClick:()=>R.current(),label:"regenerate",onMouseEnter:Y,onMouseLeave:Q},E?r.createElement(qm,null,r.createElement(jm(),null)):r.createElement(Sm(),null))),hint:ee,label:W,labelAction:i,name:u,onChange:x,placeholder:w,value:d||"",required:f})};_n.propTypes={attribute:o().shape({targetField:o().string,required:o().bool}).isRequired,contentTypeUID:o().string.isRequired,description:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),disabled:o().bool,error:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,onChange:o().func.isRequired,value:o().string,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),required:o().bool},_n.defaultProps={description:void 0,disabled:!1,error:void 0,labelAction:void 0,placeholder:void 0,value:"",required:!1};const Hm=_n;var Gm=p(30998),_m=p.n(Gm),Zm=p(1469),Bs=p.n(Zm),Qm=p(41609),Re=p.n(Qm),Km=p(36968),ne=p.n(Km);const Ym=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,Zn=({intlLabel:e,id:t,labelAction:n,link:s,name:a,numberOfEntries:c,isSingle:i})=>{const{formatMessage:u}=(0,A.useIntl)(),l=e!=null&&e.id?u(e):a;return r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(j.Flex,null,r.createElement(L.Typography,{textColor:"neutral800",htmlFor:t||a,variant:"pi",fontWeight:"bold",as:"label"},l,!i&&r.createElement(r.Fragment,null,"\xA0(",c,")")),n&&r.createElement(Ym,{paddingLeft:1},n)),s)};Zn.defaultProps={id:void 0,labelAction:void 0,link:null,numberOfEntries:0},Zn.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,isSingle:o().bool.isRequired,labelAction:o().element,link:o().element,name:o().string.isRequired,numberOfEntries:o().number};const Jm=Zn;var Xm=p(45220),ef=p.n(Xm),Qn=p(38010),tf=p(18721),Ns=p.n(tf),It=p(93355),nf=Object.defineProperty,Vs=Object.getOwnPropertySymbols,rf=Object.prototype.hasOwnProperty,of=Object.prototype.propertyIsEnumerable,qs=(e,t,n)=>t in e?nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ws=(e,t)=>{for(var n in t||(t={}))rf.call(t,n)&&qs(e,n,t[n]);if(Vs)for(var n of Vs(t))of.call(t,n)&&qs(e,n,t[n]);return e};const sf=k.default.div`
  flex-shrink: 0;
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`,zs=e=>{var t,n,s;const{formatMessage:a}=(0,A.useIntl)(),c=Qn.components.SingleValue,i=Ns()(T()(e,"data.value"),"publishedAt"),u=Re()(T()(e,"data.value.publishedAt"));if(i){const l={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},d={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},m=a(u?l:d);return r.createElement(c,Ws({},e),r.createElement(j.Flex,null,r.createElement(sf,{title:m,isDraft:u}),r.createElement(It.Tooltip,{description:(t=e.data.label)!=null?t:"-"},r.createElement(L.Typography,{ellipsis:!0},(n=e.data.label)!=null?n:"-"))))}return r.createElement(c,Ws({},e),(s=e.data.label)!=null?s:"-")};zs.propTypes={data:o().object.isRequired,selectProps:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired}).isRequired};const af=zs;var lf=Object.defineProperty,cf=Object.defineProperties,uf=Object.getOwnPropertyDescriptors,Us=Object.getOwnPropertySymbols,df=Object.prototype.hasOwnProperty,pf=Object.prototype.propertyIsEnumerable,Hs=(e,t,n)=>t in e?lf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mf=(e,t)=>{for(var n in t||(t={}))df.call(t,n)&&Hs(e,n,t[n]);if(Us)for(var n of Us(t))pf.call(t,n)&&Hs(e,n,t[n]);return e},ff=(e,t)=>cf(e,uf(t));function Kn({components:e,mainField:t,name:n,isDisabled:s,isLoading:a,loadingMessage:c,onChange:i,onInputChange:u,onMenuClose:l,onMenuOpen:d,onMenuScrollToBottom:m,options:f,placeholder:y,value:h,description:b}){const{formatMessage:E}=(0,A.useIntl)();return r.createElement(se.Stack,{spacing:1},r.createElement(g.ReactSelect,{components:ff(mf({},e),{SingleValue:af}),id:n,isClearable:!0,isDisabled:s,isLoading:a,loadingMessage:c,mainField:t,options:f,onChange:i,onInputChange:u,onMenuClose:l,onMenuOpen:d,onMenuScrollToBottom:m,placeholder:E(y||{id:"global.select",defaultMessage:"Select..."}),value:ef()(h)?null:{label:T()(h,[t.name],""),value:h}}),b&&r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},b))}Kn.defaultProps={description:"",components:{},placeholder:null,value:null},Kn.propTypes={components:o().object,isDisabled:o().bool.isRequired,isLoading:o().bool.isRequired,loadingMessage:o().func.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,onChange:o().func.isRequired,onInputChange:o().func.isRequired,onMenuClose:o().func.isRequired,onMenuOpen:o().func.isRequired,onMenuScrollToBottom:o().func.isRequired,options:o().array.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),value:o().object,description:o().string};const gf=(0,r.memo)(Kn),yf=k.default.div`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  background: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`;function Yn({data:e,displayNavigationLink:t,isDisabled:n,mainField:s,onRemove:a,searchToPersist:c,targetModel:i}){const{formatMessage:u}=(0,A.useIntl)(),l=`/content-manager/collectionType/${i}/${e.id}`;let d="pointer";n&&(d="not-allowed"),t||(d="default");const m=Ns()(e,"publishedAt"),f=Re()(e.publishedAt),y=e[s.name],h={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},b={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},E=u(f?h:b),{pathname:F}=(0,X.useLocation)();return r.createElement(j.Flex,{as:"li",alignItems:"center"},r.createElement(j.Flex,{style:{flex:1},alignItems:"center"},m&&r.createElement(D.Box,{paddingRight:2},r.createElement(yf,{isDraft:f,title:E})),t?r.createElement(g.Link,{to:{pathname:l,state:{from:F},search:c},style:{textTransform:"none"}},y||e.id):r.createElement(L.Typography,{variant:"pi"},y||e.id)),r.createElement(g.RemoveRoundedButton,{onClick:a,label:"Remove",style:{cursor:d}}))}Yn.defaultProps={onRemove(){},searchToPersist:null,targetModel:""},Yn.propTypes={data:o().object.isRequired,displayNavigationLink:o().bool.isRequired,isDisabled:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,onRemove:o().func,searchToPersist:o().string,targetModel:o().string};const hf=(0,r.memo)(Yn);function Jn({addRelation:e,components:t,displayNavigationLink:n,mainField:s,name:a,isDisabled:c,isLoading:i,loadingMessage:u,onInputChange:l,onMenuClose:d,onMenuOpen:m,onMenuScrollToBottom:f,onRemove:y,options:h,placeholder:b,searchToPersist:E,targetModel:F,value:C,description:P}){const{formatMessage:I}=(0,A.useIntl)(),R={ignoreCase:!0,ignoreAccents:!0,trim:!1,matchFrom:"any"};return r.createElement(se.Stack,{spacing:1},r.createElement(g.ReactSelect,{components:t,isDisabled:c,id:a,filterOption:(z,M)=>!Re()(C)&&C.findIndex(B=>B.id===z.value.id)!==-1?!1:M?(0,Qn.createFilter)(R)(z,M):!0,mainField:s,isLoading:i,loadingMessage:u,isMulti:!0,isSearchable:!0,options:h,onChange:e,onInputChange:l,onMenuClose:d,onMenuOpen:m,onMenuScrollToBottom:f,placeholder:I(b||{id:"global.select",defaultMessage:"Select..."}),value:[]}),r.createElement(D.Box,{paddingTop:3,style:{overflow:"auto"}},r.createElement(se.Stack,{as:"ul",spacing:4,style:{maxHeight:"128px",overflowX:"hidden"}},C==null?void 0:C.map((z,M)=>r.createElement(hf,{key:z.id,data:z,displayNavigationLink:n,isDisabled:c,mainField:s,onRemove:()=>{c||y(`${a}.${M}`)},searchToPersist:E,targetModel:F})))),P&&r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},P))}Jn.defaultProps={description:"",components:{},placeholder:null,searchToPersist:null,value:null},Jn.propTypes={addRelation:o().func.isRequired,components:o().object,displayNavigationLink:o().bool.isRequired,isDisabled:o().bool.isRequired,isLoading:o().bool.isRequired,loadingMessage:o().func.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,onInputChange:o().func.isRequired,onMenuClose:o().func.isRequired,onMenuOpen:o().func.isRequired,onMenuScrollToBottom:o().func.isRequired,onRemove:o().func.isRequired,options:o().array.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}),searchToPersist:o().string,targetModel:o().string.isRequired,value:o().array,description:o().string};const bf=(0,r.memo)(Jn);var Ef=Object.defineProperty,Gs=Object.getOwnPropertySymbols,vf=Object.prototype.hasOwnProperty,Cf=Object.prototype.propertyIsEnumerable,_s=(e,t,n)=>t in e?Ef(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Zs=(e,t)=>{for(var n in t||(t={}))vf.call(t,n)&&_s(e,n,t[n]);if(Gs)for(var n of Gs(t))Cf.call(t,n)&&_s(e,n,t[n]);return e};const Pf=k.default.div`
  flex-shrink: 0;
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  margin-right: ${({theme:e})=>e.spaces[2]};
  background-color: ${({theme:e,isDraft:t})=>e.colors[t?"secondary600":"success600"]};
  border-radius: 50%;
  cursor: pointer;
`,Xn=e=>{var t,n;const{formatMessage:s}=(0,A.useIntl)(),a=Qn.components.Option;if((0,N.has)((0,N.get)(e,"data.value"),"publishedAt")){const i=(0,N.isEmpty)((0,N.get)(e,"data.value.publishedAt")),u={id:v("components.Select.draft-info-title"),defaultMessage:"State: Draft"},l={id:v("components.Select.publish-info-title"),defaultMessage:"State: Published"},d=s(i?u:l);return r.createElement(a,Zs({},e),r.createElement(j.Flex,null,r.createElement(Pf,{title:d,isDraft:i}),r.createElement(L.Typography,{ellipsis:!0},(t=e.label)!=null?t:"-")))}return r.createElement(a,Zs({},e),(n=e.label)!=null?n:"-")};Xn.defaultProps={label:""},Xn.propTypes={label:o().oneOfType([o().string,o().number]),isFocused:o().bool.isRequired,selectProps:o().shape({hasDraftAndPublish:o().bool,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired}).isRequired};const Of=Xn;var Rf=Object.defineProperty,Qs=Object.getOwnPropertySymbols,Mf=Object.prototype.hasOwnProperty,Tf=Object.prototype.propertyIsEnumerable,Ks=(e,t,n)=>t in e?Rf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ys=(e,t)=>{for(var n in t||(t={}))Mf.call(t,n)&&Ks(e,n,t[n]);if(Qs)for(var n of Qs(t))Tf.call(t,n)&&Ks(e,n,t[n]);return e};function wf(e,t){return n=>{const s=t(n);return r.createElement(e,Ys(Ys({},n),s))}}const If=wf;function Df({isUserAllowedToEditField:e,isUserAllowedToReadField:t,name:n}){const{isCreatingEntry:s,createActionAllowedFields:a,readActionAllowedFields:c,updateActionAllowedFields:i}=(0,g.useCMEditViewDataManager)(),u=(0,r.useMemo)(()=>e===!0?!0:(s?a:i).includes(n),[s,a,n,e,i]),l=(0,r.useMemo)(()=>t?!0:(s?[]:c).includes(n),[s,t,n,c]);return{isCreatingEntry:s,isFieldAllowed:u,isFieldReadable:l}}const xf=Df;var Sf=Object.defineProperty,Lf=Object.defineProperties,Ff=Object.getOwnPropertyDescriptors,Js=Object.getOwnPropertySymbols,kf=Object.prototype.hasOwnProperty,Af=Object.prototype.propertyIsEnumerable,Xs=(e,t,n)=>t in e?Sf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,er=(e,t)=>{for(var n in t||(t={}))kf.call(t,n)&&Xs(e,n,t[n]);if(Js)for(var n of Js(t))Af.call(t,n)&&Xs(e,n,t[n]);return e},tr=(e,t)=>Lf(e,Ff(t)),jf=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const ea={contains:"",limit:20,start:0},$f=(e,t)=>t?t.reduce((n,s)=>{const a=T()(e,s,null);return a&&ne()(n,s,a),n},{}):{};function nr({description:e,editable:t,labelAction:n,intlLabel:s,isCreatingEntry:a,isFieldAllowed:c,isFieldReadable:i,mainField:u,name:l,relationType:d,targetModel:m,placeholder:f,queryInfos:y}){const{formatMessage:h}=(0,A.useIntl)(),[{query:b}]=(0,g.useQueryParams)(),E=(0,r.useMemo)(()=>d.toLowerCase().includes("morph"),[d]),{addRelation:F,modifiedData:C,moveRelation:P,onChange:I,onRemoveRelation:R}=(0,g.useCMEditViewDataManager)(),{pathname:z}=(0,X.useLocation)(),M=T()(C,l,null),[V,B]=(0,r.useState)(ea),[Z,U]=(0,r.useState)([]),[q,S]=(0,r.useState)(!1),[_,W]=(0,r.useState)(!1),ee=(0,r.useMemo)(()=>Z.filter(Ce=>Re()(M)?!0:Array.isArray(M)?_m()(M,$e=>$e.id===Ce.value.id)===-1:T()(M,"id","")!==Ce.value.id),[Z,M]),{endPoint:w,containsKey:$,defaultParams:Y,shouldDisplayRelationLink:Q,paramsToKeep:x}=y,O=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(d),G=(0,r.useMemo)(()=>M?O?[M.id]:M.map(Ce=>Ce.id):[],[O,M]),K=(0,r.useCallback)(Ce=>jf(this,null,function*(){if(E){S(!1);return}if(!c){S(!1);return}S(!0);const $e=tr(er({limit:V.limit},Y),{start:V.start});V.contains&&($e[`filters[${$}][$containsi]`]=V.contains);try{const{data:Qe}=yield ge.be.post(w,{idsToOmit:G},{params:$e,cancelToken:Ce.token}),to=Qe.map(Ke=>({value:Ke,label:Ke[u.name]}));U(Ke=>Ke.concat(to).filter((yn,no)=>Ke.findIndex(J=>J.value.id===yn.value.id)===-1?!0:Ke.findIndex(J=>J.value.id===yn.value.id)===no)),S(!1)}catch(Qe){S(!1)}}),[$,Y,w,G,c,E,u.name,V.contains,V.limit,V.start]);(0,r.useEffect)(()=>{const $e=Se().CancelToken.source();return _&&K($e),()=>$e.cancel("Operation canceled by the user.")},[K,_]);const ae=(Ce,{action:$e})=>($e==="input-change"&&B(Qe=>Qe.contains===Ce?Qe:tr(er({},Qe),{contains:Ce,start:0})),Ce),ce=()=>{B(Ce=>tr(er({},Ce),{start:Ce.start+20}))},Fe=()=>{B(ea),W(!1)},rt=Ce=>{I({target:{name:l,value:Ce&&Ce.value}})},H=Ce=>{Re()(Ce)||F({target:{name:l,value:Ce}})},pe=()=>{W(!0)},je=`/content-manager/collectionType/${m}/${M?M.id:null}`,Ue=(0,Ne.stringify)($f(b,x),{encode:!1});let bt=null;O&&M&&Q&&(bt=r.createElement(g.Link,{to:{pathname:je,state:{from:z},search:Ue}},h({id:v("containers.Edit.seeDetails"),defaultMessage:"Details"})));const Ze=O?gf:bf,Xr=Bs()(M)?M.length:0,eo=(0,r.useMemo)(()=>E?!0:a?!t:!c&&i||!t,[E,a,t,c,i]);return!c&&a?r.createElement(g.NotAllowedInput,{intlLabel:s,labelAction:n}):!a&&!c&&!i?r.createElement(g.NotAllowedInput,{intlLabel:s,labelAction:n}):r.createElement(se.Stack,{spacing:1},r.createElement(Jm,{intlLabel:s,isSingle:O,labelAction:n,link:bt,name:l,numberOfEntries:Xr}),r.createElement(Ze,{addRelation:H,components:{Option:Of},displayNavigationLink:Q,id:l,isDisabled:eo,isLoading:q,isClearable:!0,loadingMessage:()=>h({id:v("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}),mainField:u,move:P,name:l,options:ee,onChange:rt,onInputChange:ae,onMenuClose:Fe,onMenuOpen:pe,onMenuScrollToBottom:ce,onRemove:R,placeholder:f,searchToPersist:Ue,targetModel:m,value:M,description:e}))}nr.defaultProps={editable:!0,description:"",labelAction:null,isFieldAllowed:!0,placeholder:null},nr.propTypes={editable:o().bool,description:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,isCreatingEntry:o().bool.isRequired,isFieldAllowed:o().bool,isFieldReadable:o().bool.isRequired,mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired}).isRequired,name:o().string.isRequired,placeholder:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),relationType:o().string.isRequired,targetModel:o().string.isRequired,queryInfos:o().shape({containsKey:o().string.isRequired,defaultParams:o().object,endPoint:o().string.isRequired,shouldDisplayRelationLink:o().bool.isRequired,paramsToKeep:o().array}).isRequired};const Bf=(0,r.memo)(nr),ta=If(Bf,xf);var Nf=Object.defineProperty,na=Object.getOwnPropertySymbols,Vf=Object.prototype.hasOwnProperty,qf=Object.prototype.propertyIsEnumerable,ra=(e,t,n)=>t in e?Nf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,oa=(e,t)=>{for(var n in t||(t={}))Vf.call(t,n)&&ra(e,n,t[n]);if(na)for(var n of na(t))qf.call(t,n)&&ra(e,n,t[n]);return e};function Wf(e,t){return n=>{const s=t(n.keys);return r.createElement(e,oa(oa({},n),s))}}const zf=Wf,Uf=(e,t=!1)=>[{metadatas:{intlLabel:{id:"components.InputSelect.option.placeholder",defaultMessage:"Choose here"},disabled:t,hidden:t},key:"__enum_option_null",value:""},...e.map(n=>({metadatas:{intlLabel:{id:n,defaultMessage:n},hidden:!1,disabled:!1},key:n,value:n}))],Hf=(e="")=>{switch((0,N.toLower)(e)){case"boolean":return"bool";case"biginteger":return"text";case"decimal":case"float":case"integer":return"number";case"date":case"datetime":case"time":return e;case"email":return"email";case"enumeration":return"select";case"password":return"password";case"string":return"text";case"text":return"textarea";case"media":case"file":case"files":return"media";case"json":return"json";case"wysiwyg":case"WYSIWYG":case"richtext":return"wysiwyg";case"uid":return"uid";default:return e||"text"}},Gf=e=>{let t;return e==="float"||e==="decimal"?t=.01:t=1,t};function _f(e){const{createActionAllowedFields:t,formErrors:n,isCreatingEntry:s,modifiedData:a,onChange:c,readActionAllowedFields:i,shouldNotRunValidations:u,updateActionAllowedFields:l}=(0,g.useCMEditViewDataManager)(),d=(0,r.useMemo)(()=>s?t:l,[s,t,l]),m=(0,r.useMemo)(()=>s?[]:i,[s,i]),f=(0,N.get)(a,e,null);return{allowedFields:d,formErrors:n,isCreatingEntry:s,onChange:c,readableFields:m,shouldNotRunValidations:u,value:f}}const Zf=_f,sa=["type","model","via","collection","default","plugin","enum","regex","pluginOptions"];var Qf=Object.defineProperty,Kf=Object.defineProperties,Yf=Object.getOwnPropertyDescriptors,aa=Object.getOwnPropertySymbols,Jf=Object.prototype.hasOwnProperty,Xf=Object.prototype.propertyIsEnumerable,ia=(e,t,n)=>t in e?Qf(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,rr=(e,t)=>{for(var n in t||(t={}))Jf.call(t,n)&&ia(e,n,t[n]);if(aa)for(var n of aa(t))Xf.call(t,n)&&ia(e,n,t[n]);return e},eg=(e,t)=>Kf(e,Yf(t));function or({allowedFields:e,fieldSchema:t,formErrors:n,isCreatingEntry:s,keys:a,labelAction:c,metadatas:i,onChange:u,readableFields:l,shouldNotRunValidations:d,queryInfos:m,value:f}){const{fields:y}=(0,g.useLibrary)(),{formatMessage:h}=(0,A.useIntl)(),{contentType:b}=lt(),E=(0,g.useCustomFields)(),F=(0,r.useMemo)(()=>!T()(i,"editable",!0),[i]),{type:C,customField:P}=t,I=T()(n,[a],null),R=(0,r.useMemo)(()=>Ro(a),[a]),z=(0,r.useMemo)(()=>{const K=wd()(t,d?[...sa,"required","minLength"]:sa),ae=t.regex||null;if(ae){const ce=new RegExp(ae);ce&&(K.regex=ce)}return K},[t,d]),M=(0,r.useMemo)(()=>T()(z,["required"],!1),[z]),V=(0,r.useMemo)(()=>{const K=T()(b,["attributes"],{});return T()(K,[R[0],"type"],null)==="dynamiczone"},[b,R]),B=(0,r.useMemo)(()=>Hf(C),[C]),Z=(0,r.useMemo)(()=>C==="media"&&!f?[]:f,[C,f]),U=(0,r.useMemo)(()=>Gf(C),[C]),q=(0,r.useMemo)(()=>{const K=R.join(".");if(e.includes(K))return!0;if(V)return e.includes(R[0]);if(R.length>1){const ce=Zt()(R,R.length-1).join(".");return e.includes(ce)}return!1},[e,R,V]),S=(0,r.useMemo)(()=>{const K=R.join(".");if(l.includes(K))return!0;if(V)return l.includes(R[0]);if(R.length>1){const ce=Zt()(R,R.length-1).join(".");return l.includes(ce)}return!1},[l,R,V]),_=(0,r.useMemo)(()=>S||q,[q,S]),W=(0,r.useMemo)(()=>s?F:S&&!q?!0:F,[F,s,q,S]),ee=(0,r.useMemo)(()=>Uf(t.enum||[],M),[t,M]),{label:w,description:$,placeholder:Y,visible:Q}=i,x=(0,r.useMemo)(()=>{if(!i.step||B!=="datetime"&&B!=="time")return U;if(!Z)return i.step;let K;return B==="datetime"?K=parseInt(Z.substr(14,2),10):B==="time"&&(K=parseInt(Z.slice(-2),10)),K%i.step===0?i.step:U},[B,Z,i.step,U]),O=(0,r.useMemo)(()=>{if(P){const K=E.get(P);return r.lazy(K.components.Input)}return null},[P,E]);if(Q===!1)return null;if(!_)return r.createElement(g.NotAllowedInput,{description:$?{id:$,defaultMessage:$}:null,intlLabel:{id:w,defaultMessage:w},labelAction:c,error:I&&h(I),name:a,required:M});if(C==="relation")return r.createElement(ta,eg(rr(rr({},i),t),{description:i.description?h({id:i.description,defaultMessage:i.description}):void 0,intlLabel:{id:i.label,defaultMessage:i.label},labelAction:c,isUserAllowedToEditField:q,isUserAllowedToReadField:S,name:a,placeholder:i.placeholder?{id:i.placeholder,defaultMessage:i.placeholder}:null,queryInfos:m,value:f,error:I&&h(I)}));const G=rr({json:Dm,uid:Hm,media:y.media,wysiwyg:dm},y);return P&&(G[P]=O),r.createElement(g.GenericInput,{attribute:t,autoComplete:"new-password",intlLabel:{id:w,defaultMessage:w},isNullable:B==="bool"&&[null,void 0].includes(t.default),description:$?{id:$,defaultMessage:$}:null,disabled:W,error:I,labelAction:c,contentTypeUID:b.uid,customInputs:G,multiple:t.multiple||!1,name:a,onChange:u,options:ee,placeholder:Y?{id:Y,defaultMessage:Y}:null,required:t.required||!1,step:x,type:P||B,value:Z,withDefaultValue:!1})}or.defaultProps={formErrors:{},labelAction:void 0,queryInfos:{},value:null},or.propTypes={allowedFields:o().array.isRequired,fieldSchema:o().object.isRequired,formErrors:o().object,keys:o().string.isRequired,isCreatingEntry:o().bool.isRequired,labelAction:o().element,metadatas:o().object.isRequired,onChange:o().func.isRequired,readableFields:o().array.isRequired,shouldNotRunValidations:o().bool.isRequired,queryInfos:o().shape({containsKey:o().string,defaultParams:o().object,endPoint:o().string}),value:o().any};const tg=(0,r.memo)(or,We()),sr=zf(tg,Zf),ar=({componentUid:e,isFromDynamicZone:t,isNested:n,name:s})=>{const{getComponentLayout:a}=lt(),i=(0,r.useMemo)(()=>a(e),[e,a]).layouts.edit;return r.createElement(D.Box,{background:t?"":"neutral100",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,hasRadius:n,borderColor:n?"neutral200":""},r.createElement(se.Stack,{spacing:6},i.map((u,l)=>r.createElement(le.Grid,{gap:4,key:l},u.map(({name:d,size:m,metadatas:f,fieldSchema:y,queryInfos:h})=>{const b=y.type==="component",E=`${s}.${d}`;if(b){const F=y.component;return r.createElement(le.GridItem,{col:m,s:12,xs:12,key:d},r.createElement(Jt,{componentUid:F,intlLabel:{id:f.label,defaultMessage:f.label},isNested:!0,isRepeatable:y.repeatable,max:y.max,min:y.min,name:E,required:y.required||!1}))}return r.createElement(le.GridItem,{col:m,key:d,s:12,xs:12},r.createElement(sr,{keys:E,fieldSchema:y,metadatas:f,queryInfos:h}))})))))};ar.defaultProps={isFromDynamicZone:!1,isNested:!1},ar.propTypes={componentUid:o().string.isRequired,isFromDynamicZone:o().bool,isNested:o().bool,name:o().string.isRequired};const ng=ar;var la=p(83662),rg=p(80768),ut=p.n(rg),og=Object.defineProperty,ca=Object.getOwnPropertySymbols,sg=Object.prototype.hasOwnProperty,ag=Object.prototype.propertyIsEnumerable,ua=(e,t,n)=>t in e?og(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,da=(e,t)=>{for(var n in t||(t={}))sg.call(t,n)&&ua(e,n,t[n]);if(ca)for(var n of ca(t))ag.call(t,n)&&ua(e,n,t[n]);return e};function ig(e,t){return n=>{const s=t(n);return r.createElement(e,da(da({},n),s))}}const lg=ig;function cg(){const{addRepeatableComponentToField:e,formErrors:t}=(0,g.useCMEditViewDataManager)();return{addRepeatableComponentToField:e,formErrors:t}}const ug=cg;function dg(e,t){return Object.keys(t).filter(n=>n.startsWith(e)).map(n=>n.split(".").slice(0,e.split(".").length+1).join("."))}var Yt=p(61080),pg=p(79833),pa=p.n(pg);const mg=k.default.span`
  display: block;
  background-color: ${({theme:e})=>e.colors.primary100};
  outline: 1px dashed ${({theme:e})=>e.colors.primary500};
  outline-offset: -1px;
  padding: ${({theme:e})=>e.spaces[6]};
`,fg=()=>r.createElement(mg,{padding:6,background:"primary100"});var gg=p(15804);const yg=(0,k.default)(Me.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }

  &:hover {
    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }
  }
`,ma=(0,k.default)(Me.IconButton)`
  background-color: transparent;

  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,hg=k.default.span`
  display: flex;
  justify-content: space-between;
  padding-left: ${({theme:e})=>e.spaces[4]};
  padding-right: ${({theme:e})=>e.spaces[4]};
  background-color: ${({theme:e})=>e.colors.neutral0};
  height: ${50/16}rem;
`,bg=(0,k.default)(la.TextButton)`
  text-align: left;

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral500};
    }
  }
`,fa=({displayedValue:e})=>r.createElement(hg,null,r.createElement(se.Stack,{horizontal:!0,spacing:3,flex:1},r.createElement(j.Flex,{justifyContent:"center",borderRadius:"50%",height:`${24/16}rem}`,width:`${24/16}rem}`,"aria-hidden":!0,as:"span",background:"neutral200"},r.createElement(gg.Icon,{as:so(),width:`${8/16}rem}`,color:"neutral600"})),r.createElement(bg,{onClick:()=>{},flex:1},r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral700"},e))),r.createElement(se.Stack,{horizontal:!0,spacing:0},r.createElement(ma,{noBorder:!0,onClick:()=>{},icon:r.createElement(Be(),null)}),r.createElement(ma,{icon:r.createElement(Xe(),null),noBorder:!0})));fa.propTypes={displayedValue:o().string.isRequired};const Eg=fa;var vg=Object.defineProperty,ga=Object.getOwnPropertySymbols,Cg=Object.prototype.hasOwnProperty,Pg=Object.prototype.propertyIsEnumerable,ya=(e,t,n)=>t in e?vg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ha=(e,t)=>{for(var n in t||(t={}))Cg.call(t,n)&&ya(e,n,t[n]);if(ga)for(var n of ga(t))Pg.call(t,n)&&ya(e,n,t[n]);return e};function Og(e,t){return n=>{const s=t(n);return r.createElement(e,ha(ha({},n),s))}}const Rg=Og;function Mg({schema:e,componentFieldName:t}){const{checkFormErrors:n,modifiedData:s,moveComponentField:a,removeRepeatableField:c,triggerFormValidation:i}=(0,g.useCMEditViewDataManager)(),u=(0,r.useMemo)(()=>(0,N.get)(e,["settings","mainField"],"id"),[e]);return{displayedValue:(0,N.toString)((0,N.get)(s,[...t.split("."),u],"")),mainField:u,checkFormErrors:n,moveComponentField:a,removeRepeatableField:c,schema:e,triggerFormValidation:i}}const Tg=Mg,wg=k.default.span`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  padding: 0 ${({theme:e})=>e.spaces[3]};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,ir=({componentFieldName:e,hasErrorMessage:t,hasErrors:n,isDraggingSibling:s,isOpen:a,isReadOnly:c,onClickToggle:i,schema:u,toggleCollapses:l,moveComponentField:d,removeRepeatableField:m,setIsDraggingSibling:f,triggerFormValidation:y,displayedValue:h})=>{const b=(0,r.useRef)(null),E=(0,r.useRef)(null),[,F]=(0,r.useState)(!1),{formatMessage:C}=(0,A.useIntl)(),P=u.layouts.edit,[,I]=(0,Te.useDrop)({accept:Oe.COMPONENT,canDrop(){return!1},hover(U,q){if(!E.current)return;const S=U.originalPath,_=e,W=S.split("."),ee=W.slice().splice(-1).join(""),w=_.split(".").splice(-1).join(""),$=W.slice(0,W.length-1),Y=parseInt(ee,10),Q=parseInt(w,10);if(Y===Q)return;const x=E.current.getBoundingClientRect(),O=(x.bottom-x.top)/2,K=q.getClientOffset().y-x.top;Y<Q&&K<O||Y>Q&&K>O||S.split(".").length===_.split(".").length&&(d($,Y,Q),U.originalPath=_)}}),[{isDragging:R},z,M]=(0,Te.useDrag)({type:Oe.COMPONENT,item(){return l(-1),{displayedValue:h,originalPath:e}},end(){y(),f(!1)},collect:U=>({isDragging:U.isDragging()})});(0,r.useEffect)(()=>{M((0,Yt.rX)(),{captureDraggingState:!1})},[M]),(0,r.useEffect)(()=>{R&&f(!0)},[R,f]),(0,r.useEffect)(()=>{s||F(U=>!U)},[s]);const V={dragRef:z(b),dropRef:I(E)},B=pa()(h),Z=n?"error":void 0;return r.createElement(D.Box,{ref:V?V.dropRef:null},R&&r.createElement(fg,null),!R&&s&&r.createElement(Eg,{displayedValue:B,componentFieldName:e}),!R&&!s&&r.createElement(ze.Accordion,{error:Z,hasErrorMessage:t,expanded:a,onToggle:i,id:e,size:"S"},r.createElement(ze.AccordionToggle,{action:c?null:r.createElement(se.Stack,{horizontal:!0,spacing:0},r.createElement(yg,{expanded:a,noBorder:!0,onClick:()=>{m(e),l()},label:C({id:v("containers.Edit.delete"),defaultMessage:"Delete"}),icon:r.createElement(Be(),null)}),r.createElement(It.Tooltip,{description:C({id:v("components.DragHandle-label"),defaultMessage:"Drag"})},r.createElement(wg,{role:"button",tabIndex:-1,ref:V.dragRef,onClick:U=>U.stopPropagation()},r.createElement(Xe(),null)))),title:B,togglePosition:"left"}),r.createElement(ze.AccordionContent,null,r.createElement(se.Stack,{background:"neutral100",padding:6,spacing:6},P.map((U,q)=>r.createElement(le.Grid,{gap:4,key:q},U.map(({name:S,fieldSchema:_,metadatas:W,queryInfos:ee,size:w})=>{const $=_.type==="component",Y=`${e}.${S}`;if($){const Q=_.component;return r.createElement(le.GridItem,{col:w,s:12,xs:12,key:S},r.createElement(Jt,{componentUid:Q,intlLabel:{id:W.label,defaultMessage:W.label},isRepeatable:_.repeatable,isNested:!0,name:Y,max:_.max,min:_.min,required:_.required}))}return r.createElement(le.GridItem,{key:Y,col:w,s:12,xs:12},r.createElement(sr,{fieldSchema:_,keys:Y,metadatas:W,queryInfos:ee}))})))))))};ir.defaultProps={isDraggingSibling:!1,isOpen:!1,setIsDraggingSibling(){},toggleCollapses(){}},ir.propTypes={componentFieldName:o().string.isRequired,hasErrorMessage:o().bool.isRequired,hasErrors:o().bool.isRequired,isDraggingSibling:o().bool,isOpen:o().bool,isReadOnly:o().bool.isRequired,onClickToggle:o().func.isRequired,schema:o().object.isRequired,toggleCollapses:o().func,moveComponentField:o().func.isRequired,removeRepeatableField:o().func.isRequired,setIsDraggingSibling:o().func,triggerFormValidation:o().func.isRequired,displayedValue:o().string.isRequired};const Ig=(0,r.memo)(ir),Dg=Rg(Ig,Tg);var ba=p(65967),xg=Object.defineProperty,Ea=Object.getOwnPropertySymbols,Sg=Object.prototype.hasOwnProperty,Lg=Object.prototype.propertyIsEnumerable,va=(e,t,n)=>t in e?xg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fg=(e,t)=>{for(var n in t||(t={}))Sg.call(t,n)&&va(e,n,t[n]);if(Ea)for(var n of Ea(t))Lg.call(t,n)&&va(e,n,t[n]);return e};const kg=(0,k.default)(D.Box)`
  overflow: hidden;
  border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
  border-radius: 0 0 ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius};
`,Ag=(0,k.default)(D.Box)`
  > div {
    & > * {
      border-radius: unset;
      border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-left: 1px solid ${({theme:e})=>e.colors.neutral200};
      border-bottom: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
    > div {
      > div:first-of-type {
        border-radius: unset;
      }
    }
  }

  > div:first-of-type {
    > div {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      > div:first-of-type {
        border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      }
    }

    > div:not([data-strapi-expanded='true']) {
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};

      &:hover {
        border-top: 1px solid ${({theme:e})=>e.colors.primary600};
      }
    }

    > span {
      border-radius: ${({theme:e})=>e.borderRadius} ${({theme:e})=>e.borderRadius} 0 0;
      border-top: 1px solid ${({theme:e})=>e.colors.neutral200};
    }
  }

  & [data-strapi-expanded='true'] {
    border: 1px solid ${({theme:e})=>e.colors.primary600};
  }

  ${({theme:e,footer:t})=>`
    &:not(${t}) {
      & > *:last-of-type {
        border-radius: 0 0 ${e.borderRadius} ${e.borderRadius};
      }
    }
  `}
`,jg=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,lr=({children:e,footer:t,label:n,labelAction:s,error:a})=>{const{formatMessage:c}=(0,A.useIntl)(),i=r.Children.toArray(e).map(u=>(0,r.cloneElement)(u,{hasErrorMessage:!1}));return r.createElement(ba.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},n&&r.createElement(j.Flex,{paddingBottom:1},r.createElement(L.Typography,{as:"label",textColor:"neutral800",variant:"pi",fontWeight:"bold"},n),s&&r.createElement(jg,{paddingLeft:1},s)),r.createElement(Ag,{footer:t},i),t&&r.createElement(kg,null,t),a&&r.createElement(D.Box,{paddingTop:1},r.createElement(L.Typography,{variant:"pi",textColor:"danger600"},c({id:a.id,defaultMessage:a.id},Fg({},a.values)))))};lr.defaultProps={error:void 0,footer:null,label:null,labelAction:void 0},lr.propTypes={children:o().node.isRequired,error:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),footer:o().node,label:o().string,labelAction:o().node};const $g=lr,Bg=(0,k.default)(la.TextButton)`
  height: 100%;
  width: 100%;
  border-radius: 0 0 4px 4px;
  display: flex;
  justify-content: center;
  span {
    font-weight: 600;
    font-size: 14px;
  }
`,cr=({addRepeatableComponentToField:e,formErrors:t,componentUid:n,componentValue:s,componentValueLength:a,isReadOnly:c,max:i,min:u,name:l})=>{const d=(0,g.useNotification)(),{formatMessage:m}=(0,A.useIntl)(),[f,y]=(0,r.useState)(""),[h,b]=(0,r.useState)(!1),[,E]=(0,Te.useDrop)({accept:Oe.COMPONENT}),{getComponentLayout:F}=lt(),C=(0,r.useMemo)(()=>F(n),[n,F]),P=(0,r.useMemo)(()=>Mo(s||[])+1,[s]),I=dg(l,t),R=()=>{y("")},z=u-a,M=T()(t,l,{id:""}).id.includes("min"),V=(0,r.useCallback)(()=>{c||(a<i?(e(l,n,M),y(P)):a>=i&&d({type:"info",message:{id:v("components.notification.info.maximum-requirement")}}))},[e,n,a,M,c,i,l,P,d]);let B=t[l];return M&&(B={id:v("components.DynamicZone.missing-components"),defaultMessage:"There {number, plural, =0 {are # missing components} one {is # missing component} other {are # missing components}}",values:{number:z}}),a===0?r.createElement(ds,{error:B,isReadOnly:c,onClick:V}):(I.some(U=>U.split(".").length>1)&&!M&&(B={id:v("components.RepeatableComponent.error-message"),defaultMessage:"The component(s) contain error(s)"}),r.createElement(D.Box,{hasRadius:!0,ref:E},r.createElement($g,{error:B,footer:r.createElement(j.Flex,{justifyContent:"center",height:"48px",background:"neutral0"},r.createElement(Bg,{disabled:c,onClick:V,startIcon:r.createElement(ut(),null)},m({id:v("containers.EditView.add.new-entry"),defaultMessage:"Add an entry"})))},s.map((U,q)=>{const S=U.__temp_key__,_=f===S,W=`${l}.${q}`,ee=I.includes(W);return r.createElement(Dg,{componentFieldName:W,componentUid:n,hasErrors:ee,hasMinError:M,isDraggingSibling:h,isOpen:_,isReadOnly:c,key:S,onClickToggle:()=>{y(_?"":S)},parentName:l,schema:C,setIsDraggingSibling:b,toggleCollapses:R})}))))};cr.defaultProps={componentValue:null,componentValueLength:0,formErrors:{},max:1/0,min:0},cr.propTypes={addRepeatableComponentToField:o().func.isRequired,componentUid:o().string.isRequired,componentValue:o().oneOfType([o().array,o().object]),componentValueLength:o().number,formErrors:o().object,isReadOnly:o().bool.isRequired,max:o().number,min:o().number,name:o().string.isRequired};const Ng=(0,r.memo)(cr),Vg=lg(Ng,ug);var qg=Object.defineProperty,Ca=Object.getOwnPropertySymbols,Wg=Object.prototype.hasOwnProperty,zg=Object.prototype.propertyIsEnumerable,Pa=(e,t,n)=>t in e?qg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oa=(e,t)=>{for(var n in t||(t={}))Wg.call(t,n)&&Pa(e,n,t[n]);if(Ca)for(var n of Ca(t))zg.call(t,n)&&Pa(e,n,t[n]);return e};function Ug(e,t){return n=>{const s=t(n);return r.createElement(e,Oa(Oa({},n),s))}}const Hg=Ug;function Gg({isFromDynamicZone:e,name:t}){const{addNonRepeatableComponentToField:n,createActionAllowedFields:s,isCreatingEntry:a,modifiedData:c,removeComponentFromField:i,readActionAllowedFields:u,updateActionAllowedFields:l,formErrors:d}=(0,g.useCMEditViewDataManager)(),{contentType:m}=lt(),f=(0,r.useMemo)(()=>{const P=(0,N.get)(m,["attributes"],{});return Object.keys(P).filter(R=>(0,N.get)(P,[R,"type"],"")==="dynamiczone")},[m]),y=(0,r.useMemo)(()=>a?s:l,[a,s,l]),h=(0,N.get)(c,t,null),b=(0,r.useMemo)(()=>Ro(t),[t]),E=(0,r.useMemo)(()=>e&&a||y.filter(R=>R===b[0]).length>0?!0:y.map(R=>R.split(".")).filter(R=>R.length<b.length?!1:(0,N.take)(R,b.length).join(".")===b.join(".")).length>0,[e,a,y,b]),F=(0,r.useMemo)(()=>e||f.includes(b[0])?!0:(a?[]:u).map(R=>R.split(".")).filter(R=>R.length<b.length?!1:(0,N.take)(R,b.length).join(".")===b.join(".")).length>0,[e,f,b,a,u]),C=(0,r.useMemo)(()=>a||E?!1:F,[E,F,a]);return{addNonRepeatableComponentToField:n,formErrors:d,hasChildrenAllowedFields:E,hasChildrenReadableFields:F,isCreatingEntry:a,isReadOnly:C,removeComponentFromField:i,componentValue:h}}const _g=Gg,Zg=(0,k.default)(D.Box)`
  svg path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,ur=({intlLabel:e,id:t,labelAction:n,name:s,numberOfEntries:a,showNumberOfEntries:c,required:i})=>{const{formatMessage:u}=(0,A.useIntl)(),l=e!=null&&e.id?u(e):s;return r.createElement(D.Box,{paddingBottom:1},r.createElement(j.Flex,null,r.createElement(L.Typography,{textColor:"neutral800",htmlFor:t||s,variant:"pi",fontWeight:"bold",as:"label"},l,c&&r.createElement(r.Fragment,null,"\xA0(",a,")"),i&&r.createElement(L.Typography,{textColor:"danger600"},"*")),n&&r.createElement(Zg,{paddingLeft:1},n)))};ur.defaultProps={id:void 0,labelAction:void 0,numberOfEntries:0,required:!1,showNumberOfEntries:!1},ur.propTypes={id:o().string,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}).isRequired,labelAction:o().element,name:o().string.isRequired,numberOfEntries:o().number,required:o().bool,showNumberOfEntries:o().bool};const Qg=ur,dr=({addNonRepeatableComponentToField:e,componentUid:t,intlLabel:n,isCreatingEntry:s,isFromDynamicZone:a,isRepeatable:c,isNested:i,labelAction:u,max:l,min:d,name:m,hasChildrenAllowedFields:f,hasChildrenReadableFields:y,isReadOnly:h,componentValue:b,removeComponentFromField:E,required:F})=>{const{formatMessage:C}=(0,A.useIntl)(),P=vd()(b),I=b!==null||a,R=!c&&I&&!a&&f;if(!f&&s)return r.createElement(g.NotAllowedInput,{labelAction:u,intlLabel:n,name:m});if(!f&&!s&&!y)return r.createElement(g.NotAllowedInput,{labelAction:u,intlLabel:n,name:m});const z=()=>{e(m,t)};return r.createElement(D.Box,null,r.createElement(j.Flex,{justifyContent:"space-between"},n&&r.createElement(Qg,{intlLabel:n,labelAction:u,name:m,numberOfEntries:P,showNumberOfEntries:c,required:F}),R&&r.createElement(Me.IconButton,{label:C({id:v("components.reset-entry"),defaultMessage:"Reset Entry"}),icon:r.createElement(Be(),null),noBorder:!0,onClick:()=>{E(m,t)}})),r.createElement(se.Stack,{spacing:1},!c&&!I&&r.createElement(ds,{isReadOnly:h,onClick:z}),!c&&I&&r.createElement(ng,{componentUid:t,isFromDynamicZone:a,isNested:i,name:m}),c&&r.createElement(Vg,{componentValue:b,componentValueLength:P,componentUid:t,isReadOnly:h,max:l,min:d,name:m})))};dr.defaultProps={componentValue:null,hasChildrenAllowedFields:!1,hasChildrenReadableFields:!1,intlLabel:void 0,isFromDynamicZone:!1,isReadOnly:!1,isRepeatable:!1,isNested:!1,labelAction:void 0,max:1/0,min:-1/0,required:!1},dr.propTypes={addNonRepeatableComponentToField:o().func.isRequired,componentUid:o().string.isRequired,componentValue:o().oneOfType([o().object,o().array]),hasChildrenAllowedFields:o().bool,hasChildrenReadableFields:o().bool,isCreatingEntry:o().bool.isRequired,isFromDynamicZone:o().bool,isReadOnly:o().bool,isRepeatable:o().bool,isNested:o().bool,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired,values:o().object}),labelAction:o().element,max:o().number,min:o().number,name:o().string.isRequired,removeComponentFromField:o().func.isRequired,required:o().bool};const Kg=(0,r.memo)(dr,We()),Jt=Hg(Kg,_g),Yg=(0,k.default)(D.Box)`
  width: ${({theme:e})=>e.spaces[2]};
  height: ${({theme:e})=>e.spaces[4]};
`,Jg=()=>r.createElement(j.Flex,{justifyContent:"center"},r.createElement(Yg,{background:"neutral200"})),Xg=(0,k.default)(se.Stack)`
  svg {
    path {
      fill: ${({theme:e,expanded:t})=>t?e.colors.primary600:e.colors.neutral600};
    }
  }
`,pr=(0,k.default)(Me.IconButton)`
  background-color: transparent;
`,ey=(0,k.default)(D.Box)`
  > div:first-child {
    box-shadow: ${({theme:e})=>e.shadows.tableShadow};
  }
`,ty=(0,k.default)(D.Box)`
  border-radius: 0 0 ${({theme:e})=>e.spaces[1]} ${({theme:e})=>e.spaces[1]};
`,Ra=({componentUid:e,formErrors:t,index:n,isOpen:s,isFieldAllowed:a,moveComponentDown:c,moveComponentUp:i,name:u,onToggle:l,removeComponentFromDynamicZone:d,showDownIcon:m,showUpIcon:f})=>{const{formatMessage:y}=(0,A.useIntl)(),{getComponentLayout:h}=lt(),{icon:b,friendlyName:E}=(0,r.useMemo)(()=>{const{info:{icon:Z,displayName:U}}=h(e);return{friendlyName:U,icon:Z}},[e,h]),F=()=>c(u,n),C=()=>i(u,n),P=()=>d(u,n),I=y({id:v("components.DynamicZone.move-down-label"),defaultMessage:"Move component down"}),R=y({id:v("components.DynamicZone.move-up-label"),defaultMessage:"Move component down"}),z=y({id:v("components.DynamicZone.delete-label"),defaultMessage:"Delete {name}"},{name:E}),V=Object.keys(t).filter(Z=>{const U=Z.split(".");return`${U[0]}.${U[1]}`==`${u}.${n}`});let B;return V.length>0&&(B=y({id:v("components.DynamicZone.error-message"),defaultMessage:"The component contains error(s)"})),r.createElement(D.Box,null,r.createElement(Jg,null),r.createElement(ey,{hasRadius:!0},r.createElement(ze.Accordion,{expanded:s,onToggle:()=>l(n),size:"S",error:B},r.createElement(ze.AccordionToggle,{startIcon:r.createElement(xn.G,{icon:b}),action:r.createElement(Xg,{horizontal:!0,spacing:0,expanded:s},m&&r.createElement(pr,{noBorder:!0,label:I,onClick:F,icon:r.createElement(yd(),null)}),f&&r.createElement(pr,{noBorder:!0,label:R,onClick:C,icon:r.createElement(bd(),null)}),a&&r.createElement(pr,{noBorder:!0,label:z,onClick:P,icon:r.createElement(Be(),null)})),title:E,togglePosition:"left"}),r.createElement(ze.AccordionContent,null,r.createElement(ty,{background:"neutral0"},r.createElement(r.Suspense,{fallback:r.createElement(j.Flex,{justifyContent:"center",paddingTop:4,paddingBottom:4},r.createElement(ls.Loader,null,"Loading content."))},r.createElement(Sn.FocusTrap,{onEscape:()=>l(n)},r.createElement(Jt,{componentUid:e,icon:b,name:`${u}.${n}`,isFromDynamicZone:!0}))))))))};Ra.propTypes={componentUid:o().string.isRequired,formErrors:o().object.isRequired,index:o().number.isRequired,isFieldAllowed:o().bool.isRequired,isOpen:o().bool.isRequired,moveComponentDown:o().func.isRequired,moveComponentUp:o().func.isRequired,name:o().string.isRequired,onToggle:o().func.isRequired,removeComponentFromDynamicZone:o().func.isRequired,showDownIcon:o().bool.isRequired,showUpIcon:o().bool.isRequired};const ny=(0,r.memo)(Ra,We());var ry=p(7739),oy=p.n(ry);const Ma=(0,k.default)(xn.G)`
  width: ${(0,g.pxToRem)(32)} !important;
  height: ${(0,g.pxToRem)(32)} !important;
  padding: ${(0,g.pxToRem)(9)};
  border-radius: ${(0,g.pxToRem)(64)};
  background: ${({theme:e})=>e.colors.neutral150};
  path {
    fill: ${({theme:e})=>e.colors.neutral500};
  }
`,sy=(0,k.default)(D.Box)`
  flex-shrink: 0;
  height: ${(0,g.pxToRem)(84)};
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral100};
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;
  align-items: center;

  &.active,
  &:hover {
    border: 1px solid ${({theme:e})=>e.colors.primary200};
    background: ${({theme:e})=>e.colors.primary100};

    ${Ma} {
      background: ${({theme:e})=>e.colors.primary200};
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }
  }
`;function mr({componentUid:e,intlLabel:t,icon:n,onClick:s}){const{formatMessage:a}=(0,A.useIntl)(),c=()=>{s(e)};return r.createElement("button",{type:"button",onClick:c},r.createElement(sy,{borderRadius:"borderRadius"},r.createElement(se.Stack,{spacing:1,style:{justifyContent:"center",alignItems:"center"}},r.createElement(Ma,{icon:n}),r.createElement(L.Typography,{variant:"pi",fontWeight:"bold",textColor:"neutral600"},a(t)))))}mr.defaultProps={icon:"dice-d6",onClick(){}},mr.propTypes={componentUid:o().string.isRequired,intlLabel:o().shape({id:o().string.isRequired,defaultMessage:o().string.isRequired}).isRequired,icon:o().string,onClick:o().func};const ay=mr,iy=k.default.div`
  display: grid;
  grid-template-columns: repeat(auto-fit, ${140/16}rem);
  grid-gap: ${({theme:e})=>e.spaces[1]};
`,Ta=({category:e,components:t,isOdd:n,isOpen:s,onAddComponent:a,onToggle:c})=>{const{formatMessage:i}=(0,A.useIntl)(),u=()=>{c(e)};return r.createElement(ze.Accordion,{expanded:s,onToggle:u,size:"S"},r.createElement(ze.AccordionToggle,{variant:n?"primary":"secondary",title:i({id:e,defaultMessage:e}),togglePosition:"left"}),r.createElement(ze.AccordionContent,null,r.createElement(D.Box,{paddingTop:4,paddingBottom:4,paddingLeft:3,paddingRight:3},r.createElement(iy,null,t.map(({componentUid:l,info:{displayName:d,icon:m}})=>r.createElement(ay,{key:l,componentUid:l,intlLabel:{id:d,defaultMessage:d},icon:m,onClick:a}))))))};Ta.propTypes={category:o().string.isRequired,components:o().array.isRequired,isOdd:o().bool.isRequired,isOpen:o().bool.isRequired,onAddComponent:o().func.isRequired,onToggle:o().func.isRequired};const ly=Ta,wa=({components:e,isOpen:t,onClickAddComponent:n})=>{const{formatMessage:s}=(0,A.useIntl)(),{getComponentLayout:a}=lt(),[c,i]=(0,r.useState)(""),u=(0,r.useMemo)(()=>{const m=e.map(y=>{const{category:h,info:b}=a(y);return{componentUid:y,category:h,info:b}}),f=oy()(m,"category");return Object.keys(f).reduce((y,h)=>(y.push({category:h,components:f[h]}),y),[])},[e,a]);(0,r.useEffect)(()=>{t&&u.length&&i(u[0].category)},[t,u]);const l=(0,r.useCallback)(m=>{n(m),i("")},[n]),d=(0,r.useCallback)(m=>{i(c===m?"":m)},[c]);return t?r.createElement(D.Box,{paddingBottom:6},r.createElement(D.Box,{paddingTop:6,paddingBottom:6,paddingLeft:5,paddingRight:5,background:"neutral0",shadow:"tableShadow",borderColor:"neutral150",hasRadius:!0},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral600"},s({id:v("components.DynamicZone.ComponentPicker-label"),defaultMessage:"Pick one component"}))),r.createElement(D.Box,{paddingTop:2},r.createElement(ba.KeyboardNavigable,{attributeName:"data-strapi-accordion-toggle"},u.map(({category:m,components:f},y)=>r.createElement(ly,{key:m,category:m,components:f,isOdd:y%2===1,isOpen:m===c,onAddComponent:l,onToggle:d})))))):null};wa.propTypes={components:o().array.isRequired,isOpen:o().bool.isRequired,onClickAddComponent:o().func.isRequired};const cy=(0,r.memo)(wa);var uy=Object.defineProperty,dy=Object.defineProperties,py=Object.getOwnPropertyDescriptors,Ia=Object.getOwnPropertySymbols,my=Object.prototype.hasOwnProperty,fy=Object.prototype.propertyIsEnumerable,Da=(e,t,n)=>t in e?uy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,gy=(e,t)=>{for(var n in t||(t={}))my.call(t,n)&&Da(e,n,t[n]);if(Ia)for(var n of Ia(t))fy.call(t,n)&&Da(e,n,t[n]);return e},yy=(e,t)=>dy(e,py(t));const xa=e=>Array.from({length:e}).map(()=>({isOpen:!1})),fr=({name:e,addComponentToDynamicZone:t,formErrors:n,isCreatingEntry:s,isFieldAllowed:a,isFieldReadable:c,labelAction:i,moveComponentUp:u,moveComponentDown:l,removeComponentFromDynamicZone:d,dynamicDisplayedComponents:m,fieldSchema:f,metadatas:y})=>{const h=(0,g.useNotification)(),[b,E]=(0,r.useState)(!1),[F,C]=(0,r.useState)(!1),P=m.length,I=y.description?{id:y.description,defaultMessage:y.description}:null,[R,z]=(0,r.useState)(xa(P));(0,r.useEffect)(()=>{z(xa(P))},[P]),(0,r.useEffect)(()=>{F&&(z(x=>x.map((O,G)=>G===x.length-1?yy(gy({},O),{isOpen:!0}):O)),C(!1))},[F]);const{max:M=1/0,min:V=-1/0}=f,B=(0,r.useMemo)(()=>Object.keys(n).filter(x=>x===e).map(x=>n[x]),[n,e]),Z=(0,r.useMemo)(()=>f.components||[],[f]),U=V-P,q=B.length>0,S=B.length>0&&T()(B,[0,"id"],"").includes("min"),_=q&&T()(B,[0,"id"],"")==="components.Input.error.validation.max",W=(0,r.useCallback)(x=>{E(!1),t(e,x,q),C(!0)},[t,q,e]),ee=()=>{P<M?E(x=>!x):h({type:"info",message:{id:v("components.notification.info.maximum-requirement")}})},w=x=>{z(O=>O.map(({isOpen:G},K)=>K===x?{isOpen:!G}:{isOpen:G}))},$=(x,O)=>{l(x,O),z(G=>G.map(({isOpen:K},ae,ce)=>ae===O+1?{isOpen:ce[O].isOpen}:ae===O?{isOpen:ce[ae+1].isOpen}:{isOpen:K}))},Y=(x,O)=>{u(x,O),z(G=>G.map(({isOpen:K},ae,ce)=>ae===O-1?{isOpen:ce[O].isOpen}:ae===O?{isOpen:ce[ae-1].isOpen}:{isOpen:K}))},Q=(x,O)=>{d(x,O)};return!a&&s?r.createElement(g.NotAllowedInput,{description:I,intlLabel:{id:y.label,defaultMessage:y.label},labelAction:i,name:e}):!a&&!c&&!s?r.createElement(g.NotAllowedInput,{description:I,intlLabel:{id:y.label,defaultMessage:y.label},labelAction:i,name:e}):r.createElement(se.Stack,{spacing:6},P>0&&r.createElement(D.Box,null,r.createElement(fd,{intlDescription:I,label:y.label,labelAction:i,name:e,numberOfComponents:P,required:f.required||!1}),m.map((x,O)=>{var G;const K=a&&P>0&&O<P-1,ae=a&&P>0&&O>0,ce=((G=R[O])==null?void 0:G.isOpen)||!1;return r.createElement(ny,{componentUid:x,formErrors:n,key:O,index:O,isOpen:ce,isFieldAllowed:a,moveComponentDown:$,moveComponentUp:Y,onToggle:w,name:e,removeComponentFromDynamicZone:Q,showDownIcon:K,showUpIcon:ae})})),r.createElement(pd,{hasError:q,hasMaxError:_,hasMinError:S,isDisabled:!a,label:y.label,missingComponentNumber:U,isOpen:b,name:e,onClick:ee}),r.createElement(cy,{isOpen:b,components:Z,onClickAddComponent:W}))};fr.defaultProps={dynamicDisplayedComponents:[],fieldSchema:{max:1/0,min:-1/0},labelAction:null},fr.propTypes={addComponentToDynamicZone:o().func.isRequired,dynamicDisplayedComponents:o().array,fieldSchema:o().shape({components:o().array.isRequired,max:o().number,min:o().number,required:o().bool}),formErrors:o().object.isRequired,isCreatingEntry:o().bool.isRequired,isFieldAllowed:o().bool.isRequired,isFieldReadable:o().bool.isRequired,labelAction:o().element,metadatas:o().shape({description:o().string,label:o().string}).isRequired,moveComponentUp:o().func.isRequired,moveComponentDown:o().func.isRequired,name:o().string.isRequired,removeComponentFromDynamicZone:o().func.isRequired};const hy=(0,r.memo)(fr,We()),by=ad(hy,ld);var tt=p(46781);const Xt=()=>({type:tt.ZA}),gr=e=>({type:tt.Id,data:e}),yr=(e,t=!1)=>({type:tt.TP,rawQuery:e,isSingleType:t}),Sa=()=>({type:tt.c2}),La=(e,t)=>({type:tt.w7,componentsDataStructure:e,contentTypeDataStructure:t}),he=e=>({type:tt.d0,status:e}),Ge=e=>({type:tt.t9,data:e}),Fa=e=>e["content-manager_editViewCrudReducer"];var Ey=p(25108),vy=Object.defineProperty,ka=Object.getOwnPropertySymbols,Cy=Object.prototype.hasOwnProperty,Py=Object.prototype.propertyIsEnumerable,Aa=(e,t,n)=>t in e?vy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Oy=(e,t)=>{for(var n in t||(t={}))Cy.call(t,n)&&Aa(e,n,t[n]);if(ka)for(var n of ka(t))Py.call(t,n)&&Aa(e,n,t[n]);return e},nt=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const hr=({allLayoutData:e,children:t,slug:n,id:s,origin:a})=>{const c=(0,g.useNotification)(),{setCurrentStep:i}=(0,g.useGuidedTour)(),{trackUsage:u}=(0,g.useTracking)(),{push:l,replace:d}=(0,X.useHistory)(),[{rawQuery:m}]=(0,g.useQueryParams)(),f=(0,fe.useDispatch)(),{componentsDataStructure:y,contentTypeDataStructure:h,data:b,isLoading:E,status:F}=(0,fe.useSelector)(Fa),C=Zo(n),P=(0,r.useRef)(!0),I=(0,r.useRef)(u),R=(0,r.useRef)(e),z=s===null,M=(0,r.useMemo)(()=>z&&!a?null:ve(`collection-types/${n}/${a||s}`),[n,s,z,a]),V=(0,r.useCallback)(w=>a?(0,g.contentManagementUtilRemoveFieldsFromData)(w,R.current.contentType,R.current.components):w,[a]),B=(0,r.useCallback)(w=>{const $=Fo(w,R.current.contentType,R.current.components);return(0,g.formatContentTypeData)($,R.current.contentType,R.current.components)},[]);(0,r.useEffect)(()=>{const w=Object.keys(e.components).reduce((Q,x)=>{const O=Bt(T()(e,["components",x,"attributes"],{}),e.components);return Q[x]=(0,g.formatContentTypeData)(O,e.components[x],e.components),Q},{}),$=Bt(e.contentType.attributes,e.components),Y=(0,g.formatContentTypeData)($,e.contentType,e.components);f(La(w,Y))},[e,f]),(0,r.useEffect)(()=>()=>{f(Sa())},[f]),(0,r.useEffect)(()=>{const $=Se().CancelToken.source(),Y=x=>nt(void 0,null,function*(){f(Xt());try{const{data:O}=yield ge.be.get(M,{cancelToken:x.token});f(gr(B(V(O))))}catch(O){if(Se().isCancel(O))return;Ey.error(O);const G=T()(O,"response.status",null);if(G===404){l(C);return}G===403&&(c({type:"info",message:{id:v("permissions.not-allowed.update")}}),l(C))}}),Q=()=>nt(void 0,null,function*(){yield f(Xt()),yield f(yr(m))});return P.current?(M?Y($):Q(),()=>{$.cancel("Operation canceled by the user.")}):()=>{}},[V,B,l,M,f,m,C,c]);const Z=(0,r.useCallback)(w=>{const $=w.response.data;let Y=T()($,["error","message"],"Bad Request");Array.isArray(Y)&&(Y=T()(Y,["0","messages","0","id"])),typeof Y=="string"&&c({type:"warning",message:Y})},[c]),U=(0,r.useCallback)(w=>nt(void 0,null,function*(){try{I.current("willDeleteEntry",w);const{data:$}=yield ge.be.delete(ve(`collection-types/${n}/${s}`));return c({type:"success",message:{id:v("success.record.delete")}}),I.current("didDeleteEntry",w),Promise.resolve($)}catch($){return I.current("didNotDeleteEntry",Oy({error:$},w)),Promise.reject($)}}),[s,n,c]),q=(0,r.useCallback)(()=>{d(C)},[C,d]),S=(0,r.useCallback)((w,$)=>nt(void 0,null,function*(){const Y=`${ve(`collection-types/${n}`)}${m}`;try{f(he("submit-pending"));const{data:Q}=yield ge.be.post(Y,w);return I.current("didCreateEntry",$),c({type:"success",message:{id:v("success.record.save")}}),i("contentManager.success"),f(Ge(B(Q))),f(he("resolved")),d(`/content-manager/collectionType/${n}/${Q.id}${m}`),Promise.resolve(Q)}catch(Q){return Z(Q),I.current("didNotCreateEntry",{error:Q,trackerProperty:$}),f(he("resolved")),Promise.reject(Q)}}),[B,Z,d,n,f,m,c,i]),_=(0,r.useCallback)(()=>nt(void 0,null,function*(){try{I.current("willPublishEntry");const w=ve(`collection-types/${n}/${s}/actions/publish`);f(he("publish-pending"));const{data:$}=yield ge.be.post(w);return I.current("didPublishEntry"),f(Ge(B($))),f(he("resolved")),c({type:"success",message:{id:v("success.record.publish")}}),Promise.resolve($)}catch(w){return Z(w),f(he("resolved")),Promise.reject(w)}}),[B,Z,s,n,f,c]),W=(0,r.useCallback)((w,$)=>nt(void 0,null,function*(){const Y=ve(`collection-types/${n}/${s}`);try{I.current("willEditEntry",$),f(he("submit-pending"));const{data:Q}=yield ge.be.put(Y,w);return I.current("didEditEntry",{trackerProperty:$}),c({type:"success",message:{id:v("success.record.save")}}),f(Ge(B(Q))),f(he("resolved")),Promise.resolve(Q)}catch(Q){return I.current("didNotEditEntry",{error:Q,trackerProperty:$}),Z(Q),f(he("resolved")),Promise.reject(Q)}}),[B,Z,n,s,f,c]),ee=(0,r.useCallback)(()=>nt(void 0,null,function*(){const w=ve(`collection-types/${n}/${s}/actions/unpublish`);f(he("unpublish-pending"));try{I.current("willUnpublishEntry");const{data:$}=yield ge.be.post(w);return I.current("didUnpublishEntry"),c({type:"success",message:{id:v("success.record.unpublish")}}),f(Ge(B($))),f(he("resolved")),Promise.resolve($)}catch($){return f(he("resolved")),Z($),Promise.reject($)}}),[B,Z,s,n,f,c]);return t({componentsDataStructure:y,contentTypeDataStructure:h,data:b,isCreatingEntry:z,isLoadingForData:E,onDelete:U,onDeleteSucceeded:q,onPost:S,onPublish:_,onPut:W,onUnpublish:ee,status:F,redirectionLink:C})};hr.defaultProps={id:null,origin:null},hr.propTypes={allLayoutData:o().exact({components:o().object.isRequired,contentType:o().shape({apiID:o().string.isRequired,attributes:o().object.isRequired,info:o().object.isRequired,isDisplayed:o().bool.isRequired,kind:o().string.isRequired,layouts:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,pluginOptions:o().object,settings:o().object.isRequired,uid:o().string.isRequired}).isRequired}).isRequired,children:o().func.isRequired,id:o().string,origin:o().string,slug:o().string.isRequired};const Ry=(0,r.memo)(hr,We());var My=p(18446),en=p.n(My),Ty=p(98601),wy=p.n(Ty);const br=(e,t,n,s)=>{const a=e.slice();return a.splice(t,1),a.splice(n,0,s),a},Iy=(e,t,n)=>{const s=(i,u)=>T()(i,["attributes",u,"type"],""),a=(i,u)=>T()(i,["attributes",...u],""),c=(i,u)=>Object.keys(i).reduce((l,d)=>{const m=s(u,d),f=T()(i,d),y=a(u,[d,"component"]),h=a(u,[d,"repeatable"]);let b;switch(m){case"json":b=JSON.parse(f);break;case"time":{b=f,f&&f.split(":").length<3&&(b=`${f}:00`);break}case"media":a(u,[d,"multiple"])===!0?b=f?f.filter(E=>!(E instanceof File)):null:b=T()(f,0)instanceof File?null:T()(f,"id",null);break;case"component":h?b=f&&f.map(E=>c(E,n[y])):b=f&&c(f,n[y]);break;case"dynamiczone":b=f.map(E=>c(E,n[E.__component]));break;default:b=Dy(f,"id")}return l[d]=b,l},{});return c(e,t)},Dy=(e,t)=>Bs()(e)?e.map(n=>n[t]?n[t]:n):Uo()(e)?e[t]:e,xy=Iy;var Sy=p(51584),Ly=p.n(Sy),Fy=p(7654),ky=p.n(Fy),Ay=p(14841),dt=p.n(Ay),be=p(53209);function Dt(e){return["integer","biginteger","decimal","float","number"].includes(e)}var jy=Object.defineProperty,$y=Object.defineProperties,By=Object.getOwnPropertyDescriptors,ja=Object.getOwnPropertySymbols,Ny=Object.prototype.hasOwnProperty,Vy=Object.prototype.propertyIsEnumerable,$a=(e,t,n)=>t in e?jy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ba=(e,t)=>{for(var n in t||(t={}))Ny.call(t,n)&&$a(e,n,t[n]);if(ja)for(var n of ja(t))Vy.call(t,n)&&$a(e,n,t[n]);return e},Na=(e,t)=>$y(e,By(t));be.kM(be.nK,"defined",function(){return this.test("defined",g.translatedErrors.required,e=>e!==void 0)}),be.kM(be.IX,"notEmptyMin",function(e){return this.test("notEmptyMin",g.translatedErrors.min,t=>Re()(t)?!0:t.length>=e)}),be.kM(be.Z_,"isInferior",function(e,t){return this.test("isInferior",e,function(n){return!n||Number.isNaN(dt()(n))?!0:dt()(t)>=dt()(n)})}),be.kM(be.Z_,"isSuperior",function(e,t){return this.test("isSuperior",e,function(n){return!n||Number.isNaN(dt()(n))?!0:dt()(n)>=dt()(t)})});const qy=e=>T()(e,["attributes"],{}),Er=(e,{components:t},n={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const s=qy(e);return be.Ry().shape(Object.keys(s).reduce((a,c)=>{const i=s[c];if(i.type!=="relation"&&i.type!=="component"&&i.type!=="dynamiczone"){const u=Wy(i.type,i,n);a[c]=u}if(i.type==="relation"&&(a[c]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(i.relationType)?be.Ry().nullable():be.IX().nullable()),i.type==="component"){const u=Er(t[i.component],{components:t},Na(Ba({},n),{isFromComponent:!0}));if(i.repeatable===!0){const{min:d,max:m,required:f}=i;let y=be.Vo(h=>{let b=be.IX().of(u);return d?f?b=b.min(d,g.translatedErrors.min):f!==!0&&Re()(h)?b=b.nullable():b=b.min(d,g.translatedErrors.min):f&&!n.isDraft&&(b=b.min(1,g.translatedErrors.required)),m&&(b=b.max(m,g.translatedErrors.max)),b});return a[c]=y,a}const l=be.Vo(d=>d!==void 0?i.required===!0&&!n.isDraft?u.defined():u.nullable():i.required===!0?be.Ry().defined():be.Ry().nullable());return a[c]=l,a}if(i.type==="dynamiczone"){let u=be.IX().of(be.Vo(({__component:m})=>Er(t[m],{components:t},Na(Ba({},n),{isFromComponent:!0}))));const{max:l,min:d}=i;d?i.required?u=u.test("min",g.translatedErrors.min,m=>n.isCreatingEntry?m&&m.length>=d:m===void 0?!0:m!==null&&m.length>=d).test("required",g.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null):u=u.notEmptyMin(d):i.required&&!n.isDraft&&(u=u.test("required",g.translatedErrors.required,m=>n.isCreatingEntry?m!==null||m!==void 0:m===void 0?!0:m!==null)),l&&(u=u.max(l,g.translatedErrors.max)),a[c]=u}return a},{}))},Wy=(e,t,n)=>{let s=be.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(e)&&(s=be.Z_()),e==="json"&&(s=be.nK(g.translatedErrors.json).test("isJSON",g.translatedErrors.json,a=>{if(a===void 0)return!0;try{return JSON.parse(a),!0}catch(c){return!1}}).nullable()),e==="email"&&(s=s.email(g.translatedErrors.email)),["number","integer","float","decimal"].includes(e)&&(s=be.Rx().transform(a=>ky()(a)?void 0:a).typeError()),e==="biginteger"&&(s=be.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(e)&&(s=be.hT()),Object.keys(t).forEach(a=>{const c=t[a];if(!!c||!Ly()(c)&&Number.isInteger(Math.floor(c))||c===0)switch(a){case"required":{n.isDraft||(e==="password"&&n.isCreatingEntry&&(s=s.required(g.translatedErrors.required)),e!=="password"&&(n.isCreatingEntry?s=s.required(g.translatedErrors.required):s=s.test("required",g.translatedErrors.required,i=>i===void 0&&!n.isFromComponent?!0:Dt(e)?i===0?!0:!!i:e==="boolean"?i!==null:e==="date"||e==="datetime"?typeof i=="string"?!Re()(i):!Re()(i==null?void 0:i.toString()):!Re()(i))));break}case"max":{e==="biginteger"?s=s.isInferior(g.translatedErrors.max,c):s=s.max(c,g.translatedErrors.max);break}case"maxLength":s=s.max(c,g.translatedErrors.maxLength);break;case"min":{e==="biginteger"?s=s.isSuperior(g.translatedErrors.min,c):s=s.min(c,g.translatedErrors.min);break}case"minLength":{n.isDraft||(s=s.min(c,g.translatedErrors.minLength));break}case"regex":s=s.matches(new RegExp(c),{message:g.translatedErrors.regex,excludeEmptyString:!t.required});break;case"lowercase":["text","textarea","email","string"].includes(e)&&(s=s.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(e)&&(s=s.strict().uppercase());break;case"positive":Dt(e)&&(s=s.positive());break;case"negative":Dt(e)&&(s=s.negative());break;default:s=s.nullable()}}),s},Va=Er;var zy=Object.defineProperty,Uy=Object.defineProperties,Hy=Object.getOwnPropertyDescriptors,qa=Object.getOwnPropertySymbols,Gy=Object.prototype.hasOwnProperty,_y=Object.prototype.propertyIsEnumerable,Wa=(e,t,n)=>t in e?zy(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,za=(e,t)=>{for(var n in t||(t={}))Gy.call(t,n)&&Wa(e,n,t[n]);if(qa)for(var n of qa(t))_y.call(t,n)&&Wa(e,n,t[n]);return e},Ua=(e,t)=>Uy(e,Hy(t));const Zy={componentsDataStructure:{},contentTypeDataStructure:{},formErrors:{},initialData:{},modifiedData:null,shouldCheckErrors:!1,modifiedDZName:null},Qy=(e,t)=>(0,Wt.default)(e,n=>{switch(t.type){case"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD":{ne()(n,["modifiedData",...t.keys],e.componentsDataStructure[t.componentUid]);break}case"ADD_REPEATABLE_COMPONENT_TO_FIELD":{let s=T()(e,["modifiedData",...t.keys],[]).slice();const a=Ua(za({},e.componentsDataStructure[t.componentUid]),{__temp_key__:Mo(s)+1});Array.isArray(s)?s.push(a):s=[a],ne()(n,["modifiedData",...t.keys],s),t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}case"ADD_COMPONENT_TO_DYNAMIC_ZONE":{n.modifiedDZName=t.keys[0],t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors);const s=Ua(za({},e.componentsDataStructure[t.componentUid]),{__component:t.componentUid}),a=T()(e,["modifiedData",...t.keys],null),c=a?[...a,s]:[s];ne()(n,["modifiedData",...t.keys],c);break}case"ADD_RELATION":{if(!Array.isArray(t.value)||!t.value.length)break;const s=t.value[0].value,a=T()(e,["modifiedData",...t.keys],null);if(!a){ne()(n,["modifiedData",...t.keys],[s]);break}ne()(n,["modifiedData",...t.keys],[...a,s]);break}case"INIT_FORM":{n.formErrors={},n.initialData=t.initialValues,n.modifiedData=t.initialValues,n.modifiedDZName=null,n.shouldCheckErrors=!1;break}case"MOVE_COMPONENT_FIELD":{const s=T()(e,["modifiedData",...t.pathToComponent]),a=T()(e,["modifiedData",...t.pathToComponent,t.dragIndex]),c=br(s,t.dragIndex,t.hoverIndex,a);ne()(n,["modifiedData",...t.pathToComponent],c);break}case"MOVE_COMPONENT_UP":case"MOVE_COMPONENT_DOWN":{const{currentIndex:s,dynamicZoneName:a,shouldCheckErrors:c}=t;c&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=e.modifiedData[a],u=t.type==="MOVE_COMPONENT_UP"?s-1:s+1,l=e.modifiedData[a][s],d=br(i,s,u,l);ne()(n,["modifiedData",t.dynamicZoneName],d);break}case"MOVE_FIELD":{const s=T()(e,["modifiedData",...t.keys],[]).slice(),a=T()(e,["modifiedData",...t.keys,t.dragIndex]),c=br(s,t.dragIndex,t.overIndex,a);ne()(n,["modifiedData",...t.keys],c);break}case"ON_CHANGE":{const[s]=t.keys;if(t.shouldSetInitialValue&&ne()(n,["initialData",...t.keys],t.value),t.keys.length===2&&T()(e,["modifiedData",s])===null){ne()(n,["modifiedData",s],{[t.keys[1]]:t.value});break}ne()(n,["modifiedData",...t.keys],t.value);break}case"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE":{t.shouldCheckErrors&&(n.shouldCheckErrors=!e.shouldCheckErrors),n.modifiedData[t.dynamicZoneName].splice(t.index,1);break}case"REMOVE_COMPONENT_FROM_FIELD":{const s=["modifiedData",...t.keys];ne()(n,s,null);break}case"REMOVE_PASSWORD_FIELD":{wy()(n,["modifiedData",...t.keys]);break}case"REMOVE_REPEATABLE_FIELD":{const s=t.keys.length-1,a=["modifiedData",...Zt()(t.keys,s)];Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);const i=T()(e,a).slice();i.splice(parseInt(t.keys[s],10),1),ne()(n,a,i);break}case"REMOVE_RELATION":{const s=t.keys.split("."),a=s.length-1,c=["modifiedData",...Zt()(s,a)],i=T()(e,c).slice(),u=parseInt(s[a],10);i.splice(u,1),ne()(n,c,i);break}case"SET_DEFAULT_DATA_STRUCTURES":{n.componentsDataStructure=t.componentsDataStructure,n.contentTypeDataStructure=t.contentTypeDataStructure;break}case"SET_FORM_ERRORS":{n.modifiedDZName=null,n.formErrors=t.errors;break}case"TRIGGER_FORM_VALIDATION":{Object.keys(e.formErrors).length>0&&(n.shouldCheckErrors=!e.shouldCheckErrors);break}default:return n}});var Ky=Object.defineProperty,Ha=Object.getOwnPropertySymbols,Yy=Object.prototype.hasOwnProperty,Jy=Object.prototype.propertyIsEnumerable,Ga=(e,t,n)=>t in e?Ky(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,tn=(e,t)=>{for(var n in t||(t={}))Yy.call(t,n)&&Ga(e,n,t[n]);if(Ha)for(var n of Ha(t))Jy.call(t,n)&&Ga(e,n,t[n]);return e},vr=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const Cr=({allLayoutData:e,allowedActions:{canRead:t,canUpdate:n},children:s,componentsDataStructure:a,contentTypeDataStructure:c,createActionAllowedFields:i,from:u,initialValues:l,isCreatingEntry:d,isLoadingForData:m,isSingleType:f,onPost:y,onPublish:h,onPut:b,onUnpublish:E,readActionAllowedFields:F,redirectToPreviousPage:C,slug:P,status:I,updateActionAllowedFields:R})=>{const[z,M]=(0,r.useReducer)(Qy,Zy),{formErrors:V,initialData:B,modifiedData:Z,modifiedDZName:U,shouldCheckErrors:q}=z,S=(0,g.useNotification)(),{lockApp:_,unlockApp:W}=(0,g.useOverlayBlocker)(),ee=T()(e,["contentType"],{}),w=(0,r.useMemo)(()=>T()(ee,["options","draftAndPublish"],!1),[ee]),$=(0,r.useMemo)(()=>w&&!B.publishedAt,[w,B.publishedAt]),{trackUsage:Y}=(0,g.useTracking)(),{formatMessage:Q}=(0,A.useIntl)(),x=(0,r.useRef)(Y),O=(0,r.useMemo)(()=>m||d?!1:t===!1&&n===!1,[m,d,t,n]);(0,r.useEffect)(()=>{I==="resolved"?W():_()},[_,W,I]),(0,r.useEffect)(()=>{m||rt()},[q]),(0,r.useEffect)(()=>{const re=Object.keys(V);if(re.length>0){const J=re[0],ue=document.getElementById(J);ue&&ue.focus()}},[V]),(0,r.useEffect)(()=>{O&&S({type:"info",message:{id:v("permissions.not-allowed.update")}})},[O,S]),(0,r.useEffect)(()=>{M({type:"SET_DEFAULT_DATA_STRUCTURES",componentsDataStructure:a,contentTypeDataStructure:c})},[a,c]),(0,r.useEffect)(()=>{l&&M({type:"INIT_FORM",initialValues:l})},[l]);const G=(0,r.useCallback)((re,J,ue=!1)=>{x.current("didAddComponentToDynamicZone"),M({type:"ADD_COMPONENT_TO_DYNAMIC_ZONE",keys:re.split("."),componentUid:J,shouldCheckErrors:ue})},[]),K=(0,r.useCallback)((re,J)=>{M({type:"ADD_NON_REPEATABLE_COMPONENT_TO_FIELD",keys:re.split("."),componentUid:J})},[]),ae=(0,r.useCallback)(({target:{name:re,value:J}})=>{M({type:"ADD_RELATION",keys:re.split("."),value:J})},[]),ce=(0,r.useCallback)((re,J,ue=!1)=>{M({type:"ADD_REPEATABLE_COMPONENT_TO_FIELD",keys:re.split("."),componentUid:J,shouldCheckErrors:ue})},[]),Fe=(0,r.useMemo)(()=>{const re={isCreatingEntry:d,isDraft:$,isFromComponent:!1};return Va(ee,{components:e.components||{}},re)},[e.components,ee,d,$]),rt=(0,r.useCallback)((...re)=>vr(void 0,[...re],function*(J={}){let ue={};const ot=qe()(Z);Re()(ot)||ne()(ot,J.path,J.value);try{yield Fe.validate(ot,{abortEarly:!1})}catch(hn){ue=(0,g.getYupInnerErrors)(hn),U&&(ue=Object.keys(ue).reduce((bc,ro)=>(ro.split(".")[0]!==U&&(bc[ro]=ue[ro]),bc),{}))}M({type:"SET_FORM_ERRORS",errors:ue})}),[U,Z,Fe]),H=(0,r.useCallback)(({target:{name:re,value:J,type:ue}},ot=!1)=>{let hn=J;if(["text","textarea","string","email","uid","select","select-one","number"].includes(ue)&&!J&&J!==0&&(hn=null),ue==="password"&&!J){M({type:"REMOVE_PASSWORD_FIELD",keys:re.split(".")});return}M({type:"ON_CHANGE",keys:re.split("."),value:hn,shouldSetInitialValue:ot})},[]),pe=(0,r.useCallback)(re=>{const J=cu(qe()(re),"__temp_key__");return xy(J,ee,e.components)},[e.components,ee]),je=(0,r.useMemo)(()=>w?$?{status:"draft"}:{}:{},[w,$]),Ue=(0,r.useCallback)(re=>vr(void 0,null,function*(){re.preventDefault();let J={};try{yield Fe.validate(Z,{abortEarly:!1})}catch(ue){J=(0,g.getYupInnerErrors)(ue)}try{if(Re()(J)){const ue=pe(Z);d?yield y(ue,je):yield b(ue,je)}}catch(ue){J=tn(tn({},J),(0,g.getAPIInnerErrors)(ue,{getTrad:v}))}M({type:"SET_FORM_ERRORS",errors:J})}),[pe,d,Z,y,b,je,Fe]),bt=(0,r.useCallback)(()=>vr(void 0,null,function*(){const re=Va(ee,{components:T()(e,"components",{})},{isCreatingEntry:d,isDraft:!1,isFromComponent:!1});let J={};try{yield re.validate(Z,{abortEarly:!1})}catch(ue){J=(0,g.getYupInnerErrors)(ue)}try{Re()(J)&&(yield h())}catch(ue){J=tn(tn({},J),(0,g.getAPIInnerErrors)(ue,{getTrad:v}))}M({type:"SET_FORM_ERRORS",errors:J})}),[e,ee,d,Z,h]),Ze=(0,r.useCallback)(re=>{const J=Object.keys(V).some(ot=>ot.split(".")[0]===re);return!Re()(V)&&J},[V]),Xr=(0,r.useCallback)((re,J)=>{x.current("changeComponentsOrder"),M({type:"MOVE_COMPONENT_DOWN",dynamicZoneName:re,currentIndex:J,shouldCheckErrors:Ze(re)})},[Ze]),eo=(0,r.useCallback)((re,J)=>{x.current("changeComponentsOrder"),M({type:"MOVE_COMPONENT_UP",dynamicZoneName:re,currentIndex:J,shouldCheckErrors:Ze(re)})},[Ze]),Ce=(0,r.useCallback)((re,J,ue)=>{M({type:"MOVE_COMPONENT_FIELD",pathToComponent:re,dragIndex:J,hoverIndex:ue})},[]),$e=(0,r.useCallback)((re,J,ue)=>{M({type:"MOVE_FIELD",dragIndex:re,overIndex:J,keys:ue.split(".")})},[]),Qe=(0,r.useCallback)(re=>{M({type:"REMOVE_RELATION",keys:re})},[]),to=(0,r.useCallback)((re,J)=>{x.current("removeComponentFromDynamicZone"),M({type:"REMOVE_COMPONENT_FROM_DYNAMIC_ZONE",dynamicZoneName:re,index:J,shouldCheckErrors:Ze(re)})},[Ze]),Ke=(0,r.useCallback)((re,J)=>{M({type:"REMOVE_COMPONENT_FROM_FIELD",keys:re.split("."),componentUid:J})},[]),yn=(0,r.useCallback)((re,J)=>{M({type:"REMOVE_REPEATABLE_FIELD",keys:re.split("."),componentUid:J})},[]),no=(0,r.useCallback)(()=>{M({type:"TRIGGER_FORM_VALIDATION"})},[]);return O?r.createElement(X.Redirect,{to:u}):Z?r.createElement(g.ContentManagerEditViewDataManagerContext.Provider,{value:{addComponentToDynamicZone:G,addNonRepeatableComponentToField:K,addRelation:ae,addRepeatableComponentToField:ce,allLayoutData:e,checkFormErrors:rt,createActionAllowedFields:i,formErrors:V,hasDraftAndPublish:w,initialData:B,isCreatingEntry:d,isSingleType:f,shouldNotRunValidations:$,status:I,layout:ee,modifiedData:Z,moveComponentDown:Xr,moveComponentField:Ce,moveComponentUp:eo,moveRelation:$e,onChange:H,onPublish:bt,onUnpublish:E,onRemoveRelation:Qe,readActionAllowedFields:F,redirectToPreviousPage:C,removeComponentFromDynamicZone:to,removeComponentFromField:Ke,removeRepeatableField:yn,slug:P,triggerFormValidation:no,updateActionAllowedFields:R}},r.createElement(r.Fragment,null,m||!d&&!B.id?r.createElement(oe.Main,{"aria-busy":"true"},r.createElement(g.LoadingIndicatorPage,null)):r.createElement(r.Fragment,null,r.createElement(X.Prompt,{when:!en()(Z,B),message:Q({id:"global.prompt.unsaved"})}),r.createElement("form",{noValidate:!0,onSubmit:Ue},s)))):null};Cr.defaultProps={from:"/",initialValues:null,redirectToPreviousPage(){}},Cr.propTypes={allLayoutData:o().object.isRequired,allowedActions:o().object.isRequired,children:o().node.isRequired,componentsDataStructure:o().object.isRequired,contentTypeDataStructure:o().object.isRequired,createActionAllowedFields:o().array.isRequired,from:o().string,initialValues:o().object,isCreatingEntry:o().bool.isRequired,isLoadingForData:o().bool.isRequired,isSingleType:o().bool.isRequired,onPost:o().func.isRequired,onPublish:o().func.isRequired,onPut:o().func.isRequired,onUnpublish:o().func.isRequired,readActionAllowedFields:o().array.isRequired,redirectToPreviousPage:o().func,slug:o().string.isRequired,status:o().string.isRequired,updateActionAllowedFields:o().array.isRequired};const Xy=Cr,pt=e=>ve(`single-types/${e}`),eh=e=>Object.values(e||{}).reduce((t,n)=>Object.assign(t,n),{});var th=Object.defineProperty,nn=Object.getOwnPropertySymbols,_a=Object.prototype.hasOwnProperty,Za=Object.prototype.propertyIsEnumerable,Qa=(e,t,n)=>t in e?th(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ka=(e,t)=>{for(var n in t||(t={}))_a.call(t,n)&&Qa(e,n,t[n]);if(nn)for(var n of nn(t))Za.call(t,n)&&Qa(e,n,t[n]);return e},nh=(e,t)=>{var n={};for(var s in e)_a.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&nn)for(var s of nn(e))t.indexOf(s)<0&&Za.call(e,s)&&(n[s]=e[s]);return n};const Ya=(e={})=>{const t=Ka(Ka({},e),eh(e.plugins)),{plugins:n,_q:s}=t,a=nh(t,["plugins","_q"]);return s&&ne()(a,"_q",encodeURIComponent(s)),`${(0,Ne.stringify)(a,{encode:!1,addQueryPrefix:!0})}`};var rh=Object.defineProperty,Ja=Object.getOwnPropertySymbols,oh=Object.prototype.hasOwnProperty,sh=Object.prototype.propertyIsEnumerable,Xa=(e,t,n)=>t in e?rh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ah=(e,t)=>{for(var n in t||(t={}))oh.call(t,n)&&Xa(e,n,t[n]);if(Ja)for(var n of Ja(t))sh.call(t,n)&&Xa(e,n,t[n]);return e},mt=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const ei=({allLayoutData:e,children:t,slug:n})=>{const{trackUsage:s}=(0,g.useTracking)(),{push:a}=(0,X.useHistory)(),{setCurrentStep:c}=(0,g.useGuidedTour)(),i=(0,r.useRef)(s),[u,l]=(0,r.useState)(!0),[{query:d,rawQuery:m}]=(0,g.useQueryParams)(),f=Ya(d),y=(0,g.useNotification)(),h=(0,fe.useDispatch)(),{componentsDataStructure:b,contentTypeDataStructure:E,data:F,isLoading:C,status:P}=(0,fe.useSelector)(Fa),I=(0,r.useCallback)(q=>{const S=Fo(q,e.contentType,e.components);return(0,g.formatContentTypeData)(S,e.contentType,e.components)},[e]);(0,r.useEffect)(()=>()=>{h(Sa())},[h]),(0,r.useEffect)(()=>{const q=Object.keys(e.components).reduce((W,ee)=>{const w=Bt(T()(e,["components",ee,"attributes"],{}),e.components);return W[ee]=(0,g.formatContentTypeData)(w,e.components[ee],e.components),W},{}),S=Bt(e.contentType.attributes,e.components),_=(0,g.formatContentTypeData)(S,e.contentType,e.components);h(La(q,_))},[e,h]),(0,r.useEffect)(()=>{const S=Se().CancelToken.source();return(W=>mt(void 0,null,function*(){h(Xt()),l(!0);try{const{data:ee}=yield(0,ge.be)(pt(`${n}${f}`),{cancelToken:W.token});h(gr(I(ee))),l(!1)}catch(ee){if(Se().isCancel(ee))return;const w=T()(ee,"response.status",null);w===404&&h(yr(m,!0)),w===403&&(y({type:"info",message:{id:v("permissions.not-allowed.update")}}),a("/"))}}))(S),()=>S.cancel("Operation canceled by the user.")},[I,a,n,h,f,m,y]);const R=(0,r.useCallback)(q=>{const S=q.response.data;let _=T()(S,["error","message"],"Bad Request");Array.isArray(_)&&(_=T()(_,["0","messages","0","id"])),typeof _=="string"&&y({type:"warning",message:_})},[y]),z=(0,r.useCallback)(q=>mt(void 0,null,function*(){try{i.current("willDeleteEntry",q);const{data:S}=yield ge.be.delete(pt(`${n}${f}`));return y({type:"success",message:{id:v("success.record.delete")}}),i.current("didDeleteEntry",q),Promise.resolve(S)}catch(S){return i.current("didNotDeleteEntry",ah({error:S},q)),R(S),Promise.reject(S)}}),[n,R,y,f]),M=(0,r.useCallback)(()=>{l(!0),h(yr(m,!0))},[h,m]),V=(0,r.useCallback)((q,S)=>mt(void 0,null,function*(){const _=pt(`${n}${m}`);try{h(he("submit-pending"));const{data:W}=yield ge.be.put(_,q);return i.current("didCreateEntry",S),y({type:"success",message:{id:v("success.record.save")}}),c("contentManager.success"),h(Ge(I(W))),l(!1),h(he("resolved")),Promise.resolve(W)}catch(W){return i.current("didNotCreateEntry",{error:W,trackerProperty:S}),R(W),h(he("resolved")),Promise.reject(W)}}),[I,R,n,h,m,y,c]),B=(0,r.useCallback)(()=>mt(void 0,null,function*(){try{i.current("willPublishEntry");const q=pt(`${n}/actions/publish${f}`);h(he("publish-pending"));const{data:S}=yield ge.be.post(q);return i.current("didPublishEntry"),y({type:"success",message:{id:v("success.record.publish")}}),h(Ge(I(S))),h(he("resolved")),Promise.resolve(S)}catch(q){return R(q),h(he("resolved")),Promise.reject(q)}}),[I,R,n,f,h,y]),Z=(0,r.useCallback)((q,S)=>mt(void 0,null,function*(){const _=pt(`${n}${m}`);try{i.current("willEditEntry",S),h(he("submit-pending"));const{data:W}=yield ge.be.put(_,q);return y({type:"success",message:{id:v("success.record.save")}}),i.current("didEditEntry",{trackerProperty:S}),h(Ge(I(W))),h(he("resolved")),Promise.resolve(W)}catch(W){return R(W),i.current("didNotEditEntry",{error:W,trackerProperty:S}),h(he("resolved")),Promise.reject(W)}}),[I,R,n,h,m,y]),U=(0,r.useCallback)(()=>mt(void 0,null,function*(){const q=pt(`${n}/actions/unpublish${f}`);h(he("unpublish-pending"));try{i.current("willUnpublishEntry");const{data:S}=yield ge.be.post(q);i.current("didUnpublishEntry"),y({type:"success",message:{id:v("success.record.unpublish")}}),h(Ge(I(S))),h(he("resolved"))}catch(S){h(he("resolved")),R(S)}}),[I,y,R,n,h,f]);return t({componentsDataStructure:b,contentTypeDataStructure:E,data:F,isCreatingEntry:u,isLoadingForData:C,onDelete:z,onDeleteSucceeded:M,onPost:V,onPublish:B,onPut:Z,onUnpublish:U,redirectionLink:"/",status:P})};ei.propTypes={allLayoutData:o().shape({components:o().object.isRequired,contentType:o().object.isRequired}).isRequired,children:o().func.isRequired,slug:o().string.isRequired};const ih=(0,r.memo)(ei);var lh=p(8743),ch=p.n(lh),uh=Object.defineProperty,ti=Object.getOwnPropertySymbols,dh=Object.prototype.hasOwnProperty,ph=Object.prototype.propertyIsEnumerable,ni=(e,t,n)=>t in e?uh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,ri=(e,t)=>{for(var n in t||(t={}))dh.call(t,n)&&ni(e,n,t[n]);if(ti)for(var n of ti(t))ph.call(t,n)&&ni(e,n,t[n]);return e};function mh(e,t){return n=>{const s=t();return r.createElement(e,ri(ri({},n),s))}}const fh=mh;function gh(){const{initialData:e,hasDraftAndPublish:t}=(0,g.useCMEditViewDataManager)(),n=e.publishedAt!==void 0&&e.publishedAt!==null;return{hasDraftAndPublish:t,isPublished:n}}const yh=gh;var hh=Object.defineProperty,oi=Object.getOwnPropertySymbols,bh=Object.prototype.hasOwnProperty,Eh=Object.prototype.propertyIsEnumerable,si=(e,t,n)=>t in e?hh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vh=(e,t)=>{for(var n in t||(t={}))bh.call(t,n)&&si(e,n,t[n]);if(oi)for(var n of oi(t))Eh.call(t,n)&&si(e,n,t[n]);return e};const Ch=(0,k.default)(ch())`
  width: ${(0,g.pxToRem)(6)};
  height: ${(0,g.pxToRem)(6)};
  * {
    fill: ${({theme:e,$bulletColor:t})=>e.colors[t]};
  }
`,ai=({hasDraftAndPublish:e,isPublished:t})=>{const{formatMessage:n}=(0,A.useIntl)();if(!e)return null;const s={draft:{textColor:"secondary700",bulletColor:"secondary600",box:{background:"secondary100",borderColor:"secondary200"}},published:{textColor:"success700",bulletColor:"success600",box:{background:"success100",borderColor:"success200"}}},a=t?s.published:s.draft;return r.createElement(D.Box,vh({hasRadius:!0,as:"aside",paddingTop:4,paddingBottom:4,paddingLeft:5,paddingRight:5},a.box),r.createElement(D.Box,{as:j.Flex},r.createElement(Ch,{$bulletColor:a.bulletColor}),r.createElement(D.Box,{paddingLeft:3},r.createElement(L.Typography,{textColor:a.textColor},n({id:v("containers.Edit.information.editing"),defaultMessage:"Editing"}),"\xA0"),r.createElement(L.Typography,{fontWeight:"bold",textColor:a.textColor},t&&n({id:v("containers.Edit.information.publishedVersion"),defaultMessage:"published version"}),!t&&n({id:v("containers.Edit.information.draftVersion"),defaultMessage:"draft version"})))))};ai.propTypes={hasDraftAndPublish:o().bool.isRequired,isPublished:o().bool.isRequired};const Ph=fh(ai,yh),Pr=60*1e3,Or=Pr*60,rn=Or*24,ii=rn*30,li=rn*365,Oh=e=>e<Pr?{unit:"second",value:-Math.round(e/1e3)}:e<Or?{unit:"minute",value:-Math.round(e/Pr)}:e<rn?{unit:"hour",value:-Math.round(e/Or)}:e<ii?{unit:"day",value:-Math.round(e/rn)}:e<li?{unit:"month",value:-Math.round(e/ii)}:{unit:"year",value:-Math.round(e/li)};var ci=p(8610);const Rh=()=>{const{formatMessage:e,formatRelativeTime:t}=(0,A.useIntl)(),{initialData:n,isCreatingEntry:s}=(0,g.useCMEditViewDataManager)(),a=(0,r.useRef)(Date.now()),c=(l,d)=>{var m,f,y;const h=((m=n[d])==null?void 0:m.firstname)||"",b=((f=n[d])==null?void 0:f.lastname)||"",F=((y=n[d])==null?void 0:y.username)||(0,ci.Pp)(h,b),P=(n[l]?new Date(n[l]).getTime():Date.now())-a.current,{unit:I,value:R}=Oh(-P);return{at:t(R,I,{numeric:"auto"}),by:s?"-":F}},i=c("updatedAt","updatedBy"),u=c("createdAt","createdBy");return r.createElement(D.Box,null,r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600",id:"additional-informations"},e({id:v("containers.Edit.information"),defaultMessage:"Information"})),r.createElement(D.Box,{paddingTop:2,paddingBottom:6},r.createElement(Ht.Divider,null)),r.createElement(se.Stack,{spacing:4},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.created"),defaultMessage:"Created"})),r.createElement(L.Typography,null,u.at)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(L.Typography,null,u.by)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.lastUpdate"),defaultMessage:"Last update"})),r.createElement(L.Typography,null,i.at)),r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"bold"},e({id:v("containers.Edit.information.by"),defaultMessage:"By"})),r.createElement(L.Typography,null,i.by))))};var Mh=p(68717),on=p.n(Mh),ke=p(16758),Th=p(84734),ft=p.n(Th),wh=Object.defineProperty,ui=Object.getOwnPropertySymbols,Ih=Object.prototype.hasOwnProperty,Dh=Object.prototype.propertyIsEnumerable,di=(e,t,n)=>t in e?wh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,pi=(e,t)=>{for(var n in t||(t={}))Ih.call(t,n)&&di(e,n,t[n]);if(ui)for(var n of ui(t))Dh.call(t,n)&&di(e,n,t[n]);return e};function xh(e,t){return n=>{const s=t();return r.createElement(e,pi(pi({},n),s))}}const Sh=xh,Lh=(e,t,n)=>{const s=(c,i)=>Object.keys(c).reduce((u,l)=>{const d=(0,N.get)(i,["attributes",l,"type"],"string"),m=(0,N.get)(i,["attributes",l,"relationType"],""),f=m.toLowerCase().includes("morph"),y=["oneWay","oneToOne","manyToOne"],h=c[l];if((0,N.isNil)(h))return u;if(d==="dynamiczone"&&h.forEach(b=>{const E=(0,N.get)(n,b.__component,{});u+=s(b,E)}),d==="component"){const b=(0,N.get)(i,["attributes",l,"repeatable"],!1),E=(0,N.get)(i,["attributes",l,"component"],""),F=(0,N.get)(n,E,{});b?h.forEach(C=>{u+=s(C,F)}):u+=s(h,F)}return d==="relation"&&!f&&(y.includes(m)?(0,N.has)(h,"publishedAt")&&(0,N.isEmpty)(h.publishedAt)&&(u+=1):h.forEach(b=>{(0,N.has)(b,"publishedAt")&&(0,N.isEmpty)(b.publishedAt)&&(u+=1)})),u},0);return s(e,t,n)};function Fh(){const{allLayoutData:e,initialData:t,isCreatingEntry:n,isSingleType:s,status:a,layout:c,hasDraftAndPublish:i,modifiedData:u,onPublish:l,onUnpublish:d}=(0,g.useCMEditViewDataManager)();return{componentLayouts:e.components,initialData:t,isCreatingEntry:n,isSingleType:s,status:a,layout:c,hasDraftAndPublish:i,modifiedData:u,onPublish:l,onUnpublish:d}}const kh=Fh,mi=({allowedActions:{canUpdate:e,canCreate:t,canPublish:n},componentLayouts:s,initialData:a,isCreatingEntry:c,isSingleType:i,hasDraftAndPublish:u,layout:l,modifiedData:d,onPublish:m,onUnpublish:f,status:y})=>{const{goBack:h}=(0,X.useHistory)(),[b,E]=(0,r.useState)(!1),[F,C]=(0,r.useState)(!1),{formatMessage:P}=(0,A.useIntl)(),I=(0,r.useRef)(0),R=T()(l,["settings","mainField"],"id"),z=T()(l,["info","displayName"],"NOT FOUND"),M=!en()(a,d)||c&&!Re()(d);let B=P({id:v("containers.Edit.pluginHeader.title.new"),defaultMessage:"Create an entry"});!c&&!i&&(B=a[R]||z),i&&(B=z);const Z=()=>{const w=Lh(d,l,s);return I.current=w,w};let U=null;if(c&&t&&(U=r.createElement(se.Stack,{horizontal:!0,spacing:2},u&&r.createElement(ye.Button,{disabled:!0,startIcon:r.createElement(ft(),null),variant:"secondary"},P({id:"app.utils.publish",defaultMessage:"Publish"})),r.createElement(ye.Button,{disabled:!M,isLoading:y==="submit-pending",type:"submit"},P({id:v("containers.Edit.submit"),defaultMessage:"Save"})))),!c&&e){const w=u&&n,$=!Re()(a.publishedAt),Y=$?y==="unpublish-pending":y==="publish-pending",Q=$?{id:"app.utils.unpublish",defaultMessage:"Unpublish"}:{id:"app.utils.publish",defaultMessage:"Publish"},x=$?()=>E(!0):()=>{Z()===0?m():C(!0)};U=r.createElement(j.Flex,null,w&&r.createElement(ye.Button,{disabled:M,loading:Y,onClick:x,startIcon:r.createElement(ft(),null),variant:"secondary"},P(Q)),r.createElement(D.Box,{paddingLeft:w?2:0},r.createElement(ye.Button,{disabled:!M,loading:y==="submit-pending",type:"submit"},P({id:v("containers.Edit.submit"),defaultMessage:"Save"}))))}const q=()=>E(w=>!w),S=()=>C(w=>!w),_=()=>{S(),I.current=0,m()},W=()=>{q(),f()},ee=`${P({id:v("api.id"),defaultMessage:"API ID "})} : ${l.apiID}`;return r.createElement(r.Fragment,null,r.createElement(te.HeaderLayout,{title:B.toString(),primaryAction:U,subtitle:ee,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(on(),null),onClick:w=>{w.preventDefault(),h()},to:"/"},P({id:"global.back",defaultMessage:"Back"}))}),b&&r.createElement(ke.Dialog,{onClose:q,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:b},r.createElement(ke.DialogBody,{icon:r.createElement(wt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},P({id:v("popUpWarning.warning.unpublish"),defaultMessage:"Unpublish this content will automatically change it to a draft."},{br:()=>r.createElement("br",null)}))),r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},P({id:v("popUpWarning.warning.unpublish-question"),defaultMessage:"Are you sure you want to unpublish it?"}))))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:q,variant:"tertiary"},P({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(ye.Button,{variant:"danger-light",onClick:W},P({id:"components.popUpWarning.button.confirm",defaultMessage:"Yes, confirm"}))})),F&&r.createElement(ke.Dialog,{onClose:S,title:"Confirmation",labelledBy:"confirmation",describedBy:"confirm-description",isOpen:F},r.createElement(ke.DialogBody,{icon:r.createElement(wt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},I.current,P({id:v("popUpwarning.warning.has-draft-relations.message"),defaultMessage:"<b>{count, plural, =0 { of your content relations is} one { of your content relations is} other { of your content relations are}}</b> not published yet.<br></br>It might engender broken links and errors on your project."},{br:()=>r.createElement("br",null),b:w=>r.createElement(L.Typography,{fontWeight:"bold"},w),count:I.current}))),r.createElement(j.Flex,{justifyContent:"center",style:{textAlign:"center"}},r.createElement(L.Typography,{id:"confirm-description"},P({id:v("popUpWarning.warning.publish-question"),defaultMessage:"Do you still want to publish it?"}))))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:S,variant:"tertiary"},P({id:"components.popUpWarning.button.cancel",defaultMessage:"No, cancel"})),endAction:r.createElement(ye.Button,{variant:"success",onClick:_},P({id:v("popUpwarning.warning.has-draft-relations.button-confirm"),defaultMessage:"Yes, publish"}))})))};mi.propTypes={allowedActions:o().shape({canUpdate:o().bool.isRequired,canCreate:o().bool.isRequired,canPublish:o().bool.isRequired}).isRequired,componentLayouts:o().object.isRequired,initialData:o().object.isRequired,isCreatingEntry:o().bool.isRequired,isSingleType:o().bool.isRequired,status:o().string.isRequired,layout:o().object.isRequired,hasDraftAndPublish:o().bool.isRequired,modifiedData:o().object.isRequired,onPublish:o().func.isRequired,onUnpublish:o().func.isRequired};const Ah=(0,r.memo)(mi,We()),jh=Sh(Ah,kh),$h=(e,t)=>{const n=c=>(0,N.get)(t,[c,"type"],"");let s=0;const a=[];for(let c of e){const i=c.some(({name:u})=>n(u)==="dynamiczone");a[s]||(a[s]=[]),i?(s=s===0&&(0,N.isEmpty)(a[0])?0:s+1,a[s]||(a[s]=[]),a[s].push(c),s+=1):a[s].push(c)}return a.filter(c=>c.length>0)},Bh=(e,t)=>{const n=s=>{const a=(0,g.findMatchingPermissions)(e,[{action:`plugin::content-manager.explorer.${s}`,subject:t}]);return(0,N.uniq)((0,N.flatMap)(a,"properties.fields"))};return{createActionAllowedFields:n("create"),readActionAllowedFields:n("read"),updateActionAllowedFields:n("update")}};var Nh=Object.defineProperty,fi=Object.getOwnPropertySymbols,Vh=Object.prototype.hasOwnProperty,qh=Object.prototype.propertyIsEnumerable,gi=(e,t,n)=>t in e?Nh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yi=(e,t)=>{for(var n in t||(t={}))Vh.call(t,n)&&gi(e,n,t[n]);if(fi)for(var n of fi(t))qh.call(t,n)&&gi(e,n,t[n]);return e};function Wh(e,t){return n=>{const s=t();return r.createElement(e,yi(yi({},n),s))}}const zh=Wh;function Uh(){const{hasDraftAndPublish:e,modifiedData:t}=(0,g.useCMEditViewDataManager)();let n={};return e&&(n=(0,N.isEmpty)(t.publishedAt)?{status:"draft"}:{status:"published"}),{hasDraftAndPublish:e,trackerProperty:n}}const Hh=Uh;var Gh=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const hi=({isCreatingEntry:e,onDelete:t,onDeleteSucceeded:n,trackerProperty:s})=>{const[a,c]=(0,r.useState)(!1),[i,u]=(0,r.useState)(!1),{formatMessage:l}=(0,A.useIntl)(),d=(0,g.useNotification)(),m=()=>c(y=>!y),f=()=>Gh(void 0,null,function*(){try{u(!0),yield t(s),u(!1),m(),n()}catch(y){const h=T()(y,"response.payload.message",l({id:v("error.record.delete")}));u(!1),m(),d({type:"warning",message:h})}});return e?null:r.createElement(r.Fragment,null,r.createElement(ye.Button,{onClick:m,size:"S",startIcon:r.createElement(Be(),null),variant:"danger-light"},l({id:v("containers.Edit.delete-entry"),defaultMessage:"Delete this entry"})),r.createElement(g.ConfirmDialog,{isConfirmButtonLoading:i,isOpen:a,onConfirm:f,onToggleDialog:m}))};hi.propTypes={isCreatingEntry:o().bool.isRequired,onDelete:o().func.isRequired,onDeleteSucceeded:o().func.isRequired,trackerProperty:o().object.isRequired};const _h=(0,r.memo)(hi,We()),Zh=zh(_h,Hh);var Qh=Object.defineProperty,Kh=Object.defineProperties,Yh=Object.getOwnPropertyDescriptors,bi=Object.getOwnPropertySymbols,Jh=Object.prototype.hasOwnProperty,Xh=Object.prototype.propertyIsEnumerable,Ei=(e,t,n)=>t in e?Qh(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,vi=(e,t)=>{for(var n in t||(t={}))Jh.call(t,n)&&Ei(e,n,t[n]);if(bi)for(var n of bi(t))Xh.call(t,n)&&Ei(e,n,t[n]);return e},eb=(e,t)=>Kh(e,Yh(t));const Ci=De.Z.contentManager,tb=[{action:"plugin::content-type-builder.read",subject:null}],Rr=({allowedActions:e,isSingleType:t,goBack:n,layout:s,slug:a,id:c,origin:i,userPermissions:u})=>{const{trackUsage:l}=(0,g.useTracking)(),{formatMessage:d}=(0,A.useIntl)(),{createActionAllowedFields:m,readActionAllowedFields:f,updateActionAllowedFields:y}=(0,r.useMemo)(()=>Bh(u,a),[u,a]),h=(0,r.useMemo)(()=>t?Ci.singleTypesConfigurations:Ci.collectionTypesConfigurations,[t]),b=`/content-manager/${t?"singleType":"collectionType"}/${a}/configurations/edit`,E=T()(s,["contentType"],{}),F=(0,r.useMemo)(()=>t?ih:Ry,[t]),C=(0,r.useCallback)(z=>z.every(M=>M.every(V=>V.fieldSchema.type==="dynamiczone")),[]),P=(0,r.useMemo)(()=>E.layouts?$h(E.layouts.edit,E.attributes):[],[E]),I=E.layouts.editRelations,R=I.length;return r.createElement(F,{allLayoutData:s,slug:a,id:c,origin:i},({componentsDataStructure:z,contentTypeDataStructure:M,data:V,isCreatingEntry:B,isLoadingForData:Z,onDelete:U,onDeleteSucceeded:q,onPost:S,onPublish:_,onPut:W,onUnpublish:ee,redirectionLink:w,status:$})=>r.createElement(Xy,{allowedActions:e,allLayoutData:s,createActionAllowedFields:m,componentsDataStructure:z,contentTypeDataStructure:M,from:w,initialValues:V,isCreatingEntry:B,isLoadingForData:Z,isSingleType:t,onPost:S,onPublish:_,onPut:W,onUnpublish:ee,readActionAllowedFields:f,redirectToPreviousPage:n,slug:a,status:$,updateActionAllowedFields:y},r.createElement(oe.Main,{"aria-busy":$!=="resolved"},r.createElement(jh,{allowedActions:e}),r.createElement(te.ContentLayout,null,r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{col:9,s:12},r.createElement(r.Suspense,{fallback:r.createElement(g.LoadingIndicatorPage,null)},r.createElement(se.Stack,{spacing:6},P.map((Y,Q)=>{if(C(Y)){const{0:{0:{name:x,fieldSchema:O,metadatas:G,labelAction:K}}}=Y;return r.createElement(D.Box,{key:Q},r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{col:12,s:12,xs:12},r.createElement(by,{name:x,fieldSchema:O,labelAction:K,metadatas:G}))))}return r.createElement(D.Box,{key:Q,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingLeft:6,paddingRight:6,paddingTop:6,paddingBottom:6,borderColor:"neutral150"},r.createElement(se.Stack,{spacing:6},Y.map((x,O)=>r.createElement(le.Grid,{gap:4,key:O},x.map(({fieldSchema:G,labelAction:K,metadatas:ae,name:ce,size:Fe})=>{if(G.type==="component"){const{component:H,max:pe,min:je,repeatable:Ue=!1,required:bt=!1}=G;return r.createElement(le.GridItem,{col:Fe,s:12,xs:12,key:H},r.createElement(Jt,{componentUid:H,labelAction:K,isRepeatable:Ue,intlLabel:{id:ae.label,defaultMessage:ae.label},max:pe,min:je,name:ce,required:bt}))}return r.createElement(le.GridItem,{col:Fe,key:ce,s:12,xs:12},r.createElement(sr,{fieldSchema:G,keys:ce,labelAction:K,metadatas:ae}))})))))})))),r.createElement(le.GridItem,{col:3,s:12},r.createElement(se.Stack,{spacing:2},r.createElement(Ph,null),r.createElement(D.Box,{as:"aside","aria-labelledby":"additional-informations",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(Rh,null),r.createElement(_t,{area:"contentManager.editView.informations"})),R>0&&r.createElement(D.Box,{as:"aside","aria-labelledby":"relations-title",background:"neutral0",borderColor:"neutral150",hasRadius:!0,paddingBottom:4,paddingLeft:4,paddingRight:4,paddingTop:6,shadow:"tableShadow"},r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600",id:"relations-title"},d({id:v("containers.Edit.relations"),defaultMessage:"{number, plural, =0 {relations} one {relation} other {relations}}"},{number:R})),r.createElement(D.Box,{paddingTop:2,paddingBottom:6},r.createElement(Ht.Divider,null)),r.createElement(se.Stack,{spacing:4},I.map(({name:Y,fieldSchema:Q,labelAction:x,metadatas:O,queryInfos:G})=>r.createElement(ta,eb(vi(vi({},Q),O),{key:Y,description:O.description,intlLabel:{id:O.label,defaultMessage:O.label},labelAction:x,name:Y,relationsType:Q.relationType,queryInfos:G,placeholder:O.placeholder?{id:O.placeholder,defaultMessage:O.placeholder}:null}))))),r.createElement(D.Box,{as:"aside","aria-labelledby":"links"},r.createElement(se.Stack,{spacing:2},r.createElement(_t,{area:"contentManager.editView.right-links",slug:a}),a!=="strapi::administrator"&&r.createElement(g.CheckPermissions,{permissions:tb},r.createElement(g.LinkButton,{onClick:()=>{l("willEditEditLayout")},size:"S",startIcon:r.createElement(it(),null),style:{width:"100%"},to:`/plugins/content-type-builder/content-types/${a}`,variant:"secondary"},d({id:v("link-to-ctb"),defaultMessage:"Edit the model"}))),r.createElement(g.CheckPermissions,{permissions:h},r.createElement(g.LinkButton,{size:"S",startIcon:r.createElement(Ku(),null),style:{width:"100%"},to:b,variant:"secondary"},d({id:"app.links.configure-view",defaultMessage:"Configure the view"}))),e.canDelete&&r.createElement(Zh,{isCreatingEntry:B,onDelete:U,onDeleteSucceeded:q}))))))))))};Rr.defaultProps={id:null,isSingleType:!1,origin:null,userPermissions:[]},Rr.propTypes={allowedActions:o().shape({canRead:o().bool.isRequired,canUpdate:o().bool.isRequired,canCreate:o().bool.isRequired,canDelete:o().bool.isRequired}).isRequired,layout:o().shape({components:o().object.isRequired,contentType:o().shape({uid:o().string.isRequired,settings:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().object.isRequired}).isRequired}).isRequired,id:o().string,isSingleType:o().bool,goBack:o().func.isRequired,origin:o().string,slug:o().string.isRequired,userPermissions:o().array};const nb=(0,r.memo)(Rr);var rb=Object.defineProperty,ob=Object.defineProperties,sb=Object.getOwnPropertyDescriptors,Pi=Object.getOwnPropertySymbols,ab=Object.prototype.hasOwnProperty,ib=Object.prototype.propertyIsEnumerable,Oi=(e,t,n)=>t in e?rb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lb=(e,t)=>{for(var n in t||(t={}))ab.call(t,n)&&Oi(e,n,t[n]);if(Pi)for(var n of Pi(t))ib.call(t,n)&&Oi(e,n,t[n]);return e},cb=(e,t)=>ob(e,sb(t));const Mr=e=>{const t=(0,r.useMemo)(()=>Oo(e.slug),[e.slug]),{isLoading:n,allowedActions:s}=(0,g.useRBAC)(t,e.userPermissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(nb,cb(lb({},e),{allowedActions:s}))};Mr.defaultProps={permissions:[]},Mr.propTypes={permissions:o().array,slug:o().string.isRequired,userPermissions:o().array.isRequired};const ub=(0,r.memo)(Mr,We());var db=Object.defineProperty,pb=Object.defineProperties,mb=Object.getOwnPropertyDescriptors,sn=Object.getOwnPropertySymbols,Ri=Object.prototype.hasOwnProperty,Mi=Object.prototype.propertyIsEnumerable,Ti=(e,t,n)=>t in e?db(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,fb=(e,t)=>{for(var n in t||(t={}))Ri.call(t,n)&&Ti(e,n,t[n]);if(sn)for(var n of sn(t))Mi.call(t,n)&&Ti(e,n,t[n]);return e},gb=(e,t)=>pb(e,mb(t)),yb=(e,t)=>{var n={};for(var s in e)Ri.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&sn)for(var s of sn(e))t.indexOf(s)<0&&Mi.call(e,s)&&(n[s]=e[s]);return n};const wi=e=>{var t=e,{layout:n}=t,s=yb(t,["layout"]);const a=(0,fe.useSelector)(mo),c=(0,fe.useDispatch)(),[{query:i}]=(0,g.useQueryParams)(),{runHookWaterfall:u}=(0,g.useStrapiApp)(),l=Yo(i,s.slug,"editView");return(0,r.useEffect)(()=>{const d=u(Ut.Eo,{layout:n,query:i});return c(_u(d.layout,i)),()=>{c(Gu())}},[n,c,i,u]),!a||!l?r.createElement(g.LoadingIndicatorPage,null):r.createElement(ub,gb(fb({},s),{layout:a,userPermissions:l}))};wi.propTypes={layout:o().shape({components:o().object.isRequired,contentType:o().shape({uid:o().string.isRequired,settings:o().object.isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().object.isRequired}).isRequired}).isRequired};const an=wi;var Tr=p(23724),hb=p(11700),xt=p.n(hb),bb=p(78718),Ii=p.n(bb),Eb=p(94654),vb=p.n(Eb),Cb=Object.defineProperty,Pb=Object.defineProperties,Ob=Object.getOwnPropertyDescriptors,Di=Object.getOwnPropertySymbols,Rb=Object.prototype.hasOwnProperty,Mb=Object.prototype.propertyIsEnumerable,xi=(e,t,n)=>t in e?Cb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tb=(e,t)=>{for(var n in t||(t={}))Rb.call(t,n)&&xi(e,n,t[n]);if(Di)for(var n of Di(t))Mb.call(t,n)&&xi(e,n,t[n]);return e},wb=(e,t)=>Pb(e,Ob(t));const wr=e=>e.reduce((t,n)=>t+n.size,0),Ib=e=>e.reduce((t,n,s)=>{const a={rowId:s,rowContent:n};return t.concat(a)},[]),gt=e=>e.reduce((t,n)=>{let s=[];const a=n.rowContent.reduce((u,l)=>{const d=wr(u);return l.name==="_TEMP_"||(d+l.size<=12?u.push(l):s.push(l)),u},[]),c=t.length===0?0:Math.max.apply(Math,t.map(u=>u.rowId))+1,i=wr(a);if(i<12&&a.push({name:"_TEMP_",size:12-i}),t.push({rowId:c,rowContent:a}),s.length>0){const u=wr(s);u<12&&s.push({name:"_TEMP_",size:12-u}),t.push({rowId:c+1,rowContent:s}),s=[]}return t},[]).filter(t=>t.rowContent.length>0).filter(t=>t.rowContent.length===1?t.rowContent[0].name!=="_TEMP_":!0),Db=e=>e.reduce((t,n)=>{const s=n.rowContent.filter(a=>a.name!=="_TEMP_");return t.concat([s])},[]),Si=e=>{switch(e){case"boolean":case"date":case"integer":case"float":case"biginteger":case"decimal":case"time":return 4;case"json":case"component":case"richtext":case"dynamiczone":return 12;default:return 6}},xb=(e,t=[])=>t.reduce((n,{rowContent:s})=>{var a,c;const i=(c=(a=s.find(u=>u.name===e))==null?void 0:a.size)!=null?c:null;return i&&(n=i),n},null),Sb=(e,t,n=[])=>n.map(s=>(s.rowContent=s.rowContent.map(a=>a.name===e?wb(Tb({},a),{size:t}):a),s)),Ir={fieldForm:{},componentLayouts:{},metaToEdit:"",initialData:{},metaForm:{},modifiedData:{}},Lb=(e=Ir,t)=>(0,Wt.default)(e,n=>{var s,a,c;const i=["modifiedData","layouts","edit"],u=["modifiedData","layouts","editRelations"];switch(t.type){case"ADD_RELATION":{const l=T()(e,u,[]);ne()(n,u,[...l,t.name]);break}case"MOVE_RELATION":{const l=T()(e,u,[]),{fromIndex:d,toIndex:m}=t;ne()(n,u,Ct(l,d,m));break}case"MOVE_ROW":{const l=T()(e,i,[]),{fromIndex:d,toIndex:m}=t;ne()(n,i,Ct(l,d,m));break}case"ON_ADD_FIELD":{const l=qe()(e),d=Si(T()(l,["modifiedData","attributes",t.name,"type"],"")),m=T()(l,i,[]).length,f=[...i,m-1,"rowContent"],y=T()(l,f,[]);let h=T()(l,i,[]);Array.isArray(y)?ne()(h,[m>0?m-1:0,"rowContent"],[...y,{name:t.name,size:d}]):ne()(h,[m>0?m-1:0,"rowContent"],[{name:t.name,size:d}]);const b=gt(h);ne()(n,i,b);break}case"ON_CHANGE":{ne()(n,["modifiedData",...t.keys],t.value);break}case"ON_CHANGE_META":{ne()(n,["metaForm","metadata",...t.keys],t.value);break}case"ON_CHANGE_SIZE":{ne()(n,["metaForm","size"],t.value);break}case"ON_RESET":{n.modifiedData=e.initialData;break}case"REMOVE_FIELD":{const l=T()(e,[...i,t.rowIndex,"rowContent"],[]);let d=qe()(e);if(l.length===1||l.length===2&&T()(l,[1,"name"],"")==="_TEMP_"){const f=T()(e,i,[]);ne()(d,i,f.filter((y,h)=>t.rowIndex!==h))}else ne()(d,[...i,t.rowIndex,"rowContent"],l.filter((f,y)=>y!==t.fieldIndex));const m=gt(T()(d,i,[]));ne()(n,i,m);break}case"REMOVE_RELATION":{const l=T()(e,u,[]);ne()(n,u,l.filter((d,m)=>t.index!==m));break}case"REORDER_DIFF_ROW":{const l=T()(e,[...i,t.dragRowIndex,"rowContent"],[]),d=T()(e,[...i,t.hoverRowIndex,"rowContent"],[]),m=T()(e,[...i,t.dragRowIndex,"rowContent",t.dragIndex],{}),f=[...d,m];let y=qe()(e);ne()(y,[...i,t.dragRowIndex,"rowContent"],l.filter((b,E)=>t.dragIndex!==E)),ne()(y,[...i,t.hoverRowIndex,"rowContent"],Ct(f,f.length-1,t.hoverIndex));const h=gt(T()(y,i,[]));ne()(n,i,h);break}case"REORDER_ROW":{const l=qe()(e),d=T()(l,[...i,t.dragRowIndex,"rowContent"],[]);ne()(l,[...i,t.dragRowIndex,"rowContent"],Ct(d,t.dragIndex,t.hoverIndex));const m=gt(T()(l,i,[]));ne()(n,i,m);break}case"SET_FIELD_TO_EDIT":{n.metaToEdit=t.name,n.metaForm={metadata:T()(e,["modifiedData","metadatas",t.name,"edit"],{}),size:(c=xb(t.name,(a=(s=e.modifiedData)==null?void 0:s.layouts)==null?void 0:a.edit))!=null?c:Si()};break}case"SUBMIT_META_FORM":{ne()(n,["modifiedData","metadatas",e.metaToEdit,"edit"],e.metaForm.metadata);const l=qe()(T()(e,i,[])),d=Sb(e.metaToEdit,e.metaForm.size,l);d.length>0&&ne()(n,i,gt(d));break}case"SUBMIT_SUCCEEDED":{n.initialData=e.modifiedData;break}case"UNSET_FIELD_TO_EDIT":{n.metaToEdit="",n.metaForm={};break}default:return n}});var Fb=Object.defineProperty,kb=Object.defineProperties,Ab=Object.getOwnPropertyDescriptors,Li=Object.getOwnPropertySymbols,jb=Object.prototype.hasOwnProperty,$b=Object.prototype.propertyIsEnumerable,Fi=(e,t,n)=>t in e?Fb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Bb=(e,t)=>{for(var n in t||(t={}))jb.call(t,n)&&Fi(e,n,t[n]);if(Li)for(var n of Li(t))$b.call(t,n)&&Fi(e,n,t[n]);return e},Nb=(e,t)=>kb(e,Ab(t));const Vb=(e,t,n)=>{let s=(0,N.cloneDeep)(t);return(0,N.set)(s,["layouts","edit"],gt(Ib(t.layouts.edit))),Nb(Bb({},e),{initialData:s,modifiedData:s,componentLayouts:n})};var Ae=p(33097),qb=p(70736),ki=p.n(qb);const Ai=({componentUid:e})=>{const{componentLayouts:t}=He(),{formatMessage:n}=(0,A.useIntl)(),s=T()(t,[e],{}),a=T()(s,["layouts","edit"],[]);return r.createElement(D.Box,{padding:3},a.map((c,i)=>r.createElement(le.Grid,{gap:4,key:i},c.map(u=>r.createElement(le.GridItem,{key:u.name,col:u.size},r.createElement(D.Box,{paddingTop:2},r.createElement(j.Flex,{alignItems:"center",background:"neutral0",paddingLeft:3,paddingRight:3,height:`${32/16}rem`,hasRadius:!0,borderColor:"neutral200"},r.createElement(L.Typography,{textColor:"neutral800"},u.name))))))),r.createElement(D.Box,{paddingTop:2},r.createElement(g.Link,{startIcon:r.createElement(ki(),null),to:`/content-manager/components/${e}/configurations/edit`},n({id:v("components.FieldItem.linkToComponentLayout"),defaultMessage:"Set the component's layout"}))))};Ai.propTypes={componentUid:o().string.isRequired};const Wb=Ai,ji=(0,k.default)(j.Flex)`
  border-radius: 50%;
  svg {
    & > * {
      fill: ${({theme:e})=>e.colors.neutral500};
    }
    width: 12px;
    height: 12px;
  }
`,zb=(0,k.default)(j.Flex)`
  text-decoration: none;
  &:hover {
    ${({theme:e})=>`
      background: ${e.colors.primary100};
      svg {
        & > * {
          fill: ${e.colors.primary600};
        }
      }
      ${L.Typography} {
          color: ${e.colors.primary600};
      }
      ${ji} {
        background: ${e.colors.primary200};
      }
      border-color: ${e.colors.primary200};
    `}
  }
`,$i=({components:e})=>{const{componentLayouts:t}=He();return r.createElement(se.Stack,{spacing:2,horizontal:!0,overflow:"scroll hidden",padding:3},e.map(n=>r.createElement(zb,{hasRadius:!0,background:"neutral0",justifyContent:"center",alignItems:"center",height:`${84/16}rem`,minWidth:`${140/16}rem`,key:n,padding:2,direction:"column",borderColor:"neutral200",as:X.Link,to:`/content-manager/components/${n}/configurations/edit`},r.createElement(ji,{width:`${32/16}rem`,height:`${32/16}rem`,background:"neutral150",justifyContent:"center",alignItems:"center",padding:2},r.createElement(xn.G,{icon:T()(t,[n,"info","icon"],"")})),r.createElement(D.Box,{paddingTop:1},r.createElement(L.Typography,{fontSize:1,textColor:"neutral600",fontWeight:"bold"},T()(t,[n,"info","displayName"],""))))))};$i.propTypes={components:o().arrayOf(o().string).isRequired};const Ub=$i,Bi=(0,k.default)(Me.IconButton)`
  background-color: transparent;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Dr=({attribute:e,onEditField:t,onDeleteField:n,children:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(D.Box,{overflow:"hidden",width:"100%"},r.createElement(j.Flex,{paddingLeft:3,alignItems:"center",justifyContent:"space-between"},r.createElement(L.Typography,{fontWeight:"semiBold",textColor:"neutral800",ellipsis:!0},s),r.createElement(j.Flex,null,r.createElement(Bi,{label:a({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:s}),onClick:t,icon:r.createElement(it(),null),noBorder:!0}),r.createElement(Bi,{label:a({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:s}),"data-testid":"delete-field",onClick:n,icon:r.createElement(Be(),null),noBorder:!0}))),(e==null?void 0:e.type)==="component"&&r.createElement(Wb,{componentUid:e.component}),(e==null?void 0:e.type)==="dynamiczone"&&r.createElement(Ub,{components:e.components}))};Dr.defaultProps={attribute:void 0},Dr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),onEditField:o().func.isRequired,onDeleteField:o().func.isRequired,children:o().string.isRequired};const Ni=Dr,Hb=(0,k.default)(j.Flex)`
  position: relative;
  ${({isFirst:e,isLast:t,hasHorizontalPadding:n})=>e?`
        padding-right: 4px;
      `:t?`
        padding-left: 4px;
      `:n?`
        padding: 0 4px;
      `:""}
  ${({showRightCarret:e,showLeftCarret:t,theme:n})=>e?`
        &:after {
          content: '';
          position: absolute;
          right: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:t?`
        &:before {
          content: '';
          position: absolute;
          left: -1px;
          background-color: ${n.colors.primary600};
          width: 2px;
          height: 100%;
          align-self: stretch;
          z-index: 1;
        }
      `:""};
`,Gb=(0,k.default)(Xe())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,_b=(0,k.default)(j.Flex)`
  display: ${({dragStart:e})=>e?"none":"flex"};
  opacity: ${({isDragging:e,isFullSize:t,isHidden:n})=>e&&!t?.2:e&&t||n?0:1};
`,Zb=(0,k.default)(j.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,xr=({attribute:e,children:t,index:n,lastIndex:s,moveItem:a,moveRow:c,name:i,onDeleteField:u,onEditField:l,rowIndex:d,size:m})=>{const[f,y]=(0,r.useState)(!1),h=i==="_TEMP_",{setIsDraggingSibling:b}=He(),E=m===12,F=(0,r.useRef)(null),C=(0,r.useRef)(null),[{clientOffset:P,isOver:I},R]=(0,Te.useDrop)({accept:Oe.EDIT_FIELD,hover(w,$){if(!C.current||w.size!==12)return;const Y=$.getItem().index,Q=n,x=$.getItem().rowIndex,O=d;if(Y===Q&&x===O)return;const G=C.current.getBoundingClientRect(),K=(G.bottom-G.top)/2,ce=$.getClientOffset().y-G.top;x<O&&ce<K||x>O&&ce>K||(c(x,O),w.rowIndex=O,w.itemIndex=Q)},drop(w,$){if(!C.current)return;const Y=$.getItem().index,Q=n,x=$.getItem().rowIndex,O=d;if(w.size===12||Y===Q&&x===O)return;const G=C.current.getBoundingClientRect();if(Math.abs($.getClientOffset().x-G.left)>G.width/1.8){a(Y,Q+1,x,O),w.itemIndex=Q+1,w.rowIndex=O;return}a(Y,Q,x,O),w.itemIndex=Q,w.rowIndex=O},collect:w=>({canDrop:w.canDrop(),clientOffset:w.getClientOffset(),isOver:w.isOver(),isOverCurrent:w.isOver({shallow:!0}),itemType:w.getItemType()})}),[{isDragging:z,getItem:M},V,B]=(0,Te.useDrag)({type:Oe.EDIT_FIELD,item(){return b(!0),{index:n,labelField:t,rowIndex:d,name:i,size:m}},canDrag(){return i!=="_TEMP_"},collect:w=>({isDragging:w.isDragging(),getItem:w.getItem()}),end(){b(!1)}});(0,r.useEffect)(()=>{B((0,Yt.rX)(),{captureDraggingState:!0})},[B]);const Z={dragRef:V(F),dropRef:R(C)};let U=!1,q=!1;if(C.current&&P){const w=C.current.getBoundingClientRect();U=I&&M.size!==12&&Math.abs(P.x-w.left)<w.width/2,q=I&&M.size!==12&&Math.abs(P.x-w.left)>w.width/2,i==="_TEMP_"&&(U=I&&M.size!==12,q=!1)}const S=()=>e&&E?`${74/16}rem`:`${32/16}rem`,_=n===0&&!E,W=n===s&&!E,ee=n!==0&&!E;return r.createElement(le.GridItem,{col:m},r.createElement(Hb,{ref:Z.dropRef,showLeftCarret:U,showRightCarret:q,isFirst:_,isLast:W,hasHorizontalPadding:ee,onDrag:()=>{E&&!f&&y(!0)},onDragEnd:()=>{E&&y(!1)}},f&&E&&r.createElement(D.Box,{width:"100%",height:"2px",background:"primary600"}),r.createElement(_b,{width:E&&f?0:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:S(),alignItems:"stretch",isDragging:z,dragStart:f,isFullSize:E,isHidden:h},r.createElement(Zb,{as:"span",type:"button",ref:Z.dragRef,onClick:w=>w.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(Gb,null)),!h&&r.createElement(Ni,{attribute:e,onEditField:l,onDeleteField:u},t))))};xr.defaultProps={attribute:void 0},xr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),children:o().string.isRequired,index:o().number.isRequired,moveItem:o().func.isRequired,moveRow:o().func.isRequired,name:o().string.isRequired,onDeleteField:o().func.isRequired,onEditField:o().func.isRequired,rowIndex:o().number.isRequired,lastIndex:o().number.isRequired,size:o().number.isRequired};const Qb=xr,Vi=({rowItem:e,onRemoveField:t,rowId:n,rowIndex:s,index:a,lastIndex:c})=>{const{setEditFieldToSelect:i,attributes:u,modifiedData:l,moveRow:d,moveItem:m}=He(),f=T()(u,[e.name],{}),y=T()(l,["metadatas",e.name,"edit","label"],"");return r.createElement(Qb,{onEditField:()=>i(e.name),onDeleteField:()=>t(n,a),attribute:f,index:a,lastIndex:c,rowIndex:s,name:e.name,size:e.size,moveRow:d,moveItem:m},y||e.name)};Vi.propTypes={index:o().number.isRequired,lastIndex:o().number.isRequired,onRemoveField:o().func.isRequired,rowId:o().number.isRequired,rowIndex:o().number.isRequired,rowItem:o().object.isRequired};const Kb=Vi,qi=({row:e,onRemoveField:t,rowIndex:n})=>r.createElement(le.Grid,null,e.rowContent.map((s,a)=>r.createElement(Kb,{key:s.name,rowItem:s,index:a,rowId:e.rowId,onRemoveField:t,rowIndex:n,lastIndex:e.rowContent.length-1})));qi.propTypes={onRemoveField:o().func.isRequired,row:o().object.isRequired,rowIndex:o().number.isRequired};const Yb=qi,Jb=[{action:"plugin::content-type-builder.read",subject:null}],Xb=()=>{const{trackUsage:e}=(0,g.useTracking)(),{formatMessage:t}=(0,A.useIntl)(),{slug:n,modifiedData:s,isContentTypeView:a}=He(),c=a?"content-types":"components",i=`/plugins/content-type-builder/${c==="content-types"?c:"component-categories"}`,u=T()(s,"category",""),l=c==="content-types"?n:`${u}/${n}`,d=()=>{e("willEditEditLayout")};return n==="strapi::administrator"?null:r.createElement(g.CheckPermissions,{permissions:Jb},r.createElement(g.LinkButton,{to:`${i}/${l}`,onClick:d,size:"S",startIcon:r.createElement(it(),null),variant:"secondary"},t({id:v(`edit-settings-view.link-to-ctb.${c}`),defaultMessage:"Edit the content type"})))},Wi=({editLayout:e,editLayoutRemainingFields:t,onRemoveField:n,onAddField:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(se.Stack,{spacing:4},r.createElement(j.Flex,{justifyContent:"space-between"},r.createElement("div",null,r.createElement(D.Box,null,r.createElement(L.Typography,{fontWeight:"bold"},a({id:v("containers.ListPage.displayedFields"),defaultMessage:"Displayed fields"}))),r.createElement(D.Box,null,r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},a({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(Xb,null)),r.createElement(D.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(se.Stack,{spacing:2},e.map((c,i)=>r.createElement(Yb,{key:c.rowId,row:c,rowIndex:i,onRemoveField:n})),r.createElement(Ae.SimpleMenu,{id:"label",label:a({id:v("containers.SettingPage.add.field"),defaultMessage:"Insert another field"}),as:ye.Button,"data-testid":"add-field",fullWidth:!0,startIcon:r.createElement(ut(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(c=>r.createElement(Ae.MenuItem,{key:c,onClick:()=>s(c)},c))))))};Wi.propTypes={editLayout:o().array.isRequired,editLayoutRemainingFields:o().array.isRequired,onAddField:o().func.isRequired,onRemoveField:o().func.isRequired};const eE=Wi,tE=(0,k.default)(Xe())`
  height: ${12/16}rem;
  width: ${12/16}rem;
  path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,nE=(0,k.default)(j.Flex)`
  opacity: ${({isDragging:e})=>e?0:1};
`,rE=(0,k.default)(j.Flex)`
  cursor: all-scroll;
  border-right: 1px solid ${({theme:e})=>e.colors.neutral200};
`,Sr=({attribute:e,onEditField:t,onDeleteField:n,children:s,index:a,name:c,onMoveField:i})=>{const u=(0,r.useRef)(),[,l]=(0,Te.useDrop)({accept:Oe.EDIT_RELATION,hover(h){if(!u.current)return;const b=h.index,E=a;b!==E&&(i(b,E),h.index=E)}}),[{isDragging:d},m,f]=(0,Te.useDrag)({type:Oe.EDIT_RELATION,item(){return{index:a,labelField:s,name:c}},collect:h=>({isDragging:h.isDragging()})});(0,r.useEffect)(()=>{f((0,Yt.rX)(),{captureDraggingState:!0})},[f]),m(l(u));const y=()=>e&&["json","text","file","media","component","richtext","dynamiczone"].includes(e.type)?`${74/16}rem`:`${32/16}rem`;return r.createElement(nE,{width:"100%",borderColor:"neutral150",hasRadius:!0,background:"neutral100",minHeight:y(),alignItems:"stretch",isDragging:d},r.createElement(rE,{as:"span",type:"button",ref:u,onClick:h=>h.stopPropagation(),alignItems:"center",paddingLeft:3,paddingRight:3,tabIndex:-1},r.createElement(tE,null)),r.createElement(Ni,{attribute:e,onEditField:t,onDeleteField:n},s))};Sr.defaultProps={attribute:void 0},Sr.propTypes={attribute:o().shape({components:o().array,component:o().string,type:o().string}),onEditField:o().func.isRequired,onDeleteField:o().func.isRequired,children:o().string.isRequired,index:o().number.isRequired,name:o().string.isRequired,onMoveField:o().func.isRequired};const oE=Sr,zi=({relationsLayout:e,editRelationsLayoutRemainingFields:t,onRemoveField:n,onAddField:s})=>{const{formatMessage:a}=(0,A.useIntl)(),{setEditFieldToSelect:c,modifiedData:i,onMoveRelation:u}=He();return r.createElement(se.Stack,{spacing:4},r.createElement("div",null,r.createElement(D.Box,null,r.createElement(L.Typography,{fontWeight:"bold"},a({id:v("containers.SettingPage.relations"),defaultMessage:"Relational fields"}))),r.createElement(D.Box,null,r.createElement(L.Typography,{variant:"pi",textColor:"neutral600"},a({id:"containers.SettingPage.editSettings.description",defaultMessage:"Drag & drop the fields to build the layout"})))),r.createElement(D.Box,{padding:4,hasRadius:!0,borderStyle:"dashed",borderWidth:"1px",borderColor:"neutral300"},r.createElement(se.Stack,{spacing:2},e.map((l,d)=>{const m=T()(i,["metadatas",l,"edit","label"],"");return r.createElement(oE,{onEditField:()=>c(l),onDeleteField:()=>n(d),key:l,index:d,name:l,onMoveField:u},m||l)}),r.createElement(Ae.SimpleMenu,{id:"label",label:a({id:"containers.SettingPage.add.relational-field",defaultMessage:"Insert another relational field"}),"data-testid":"add-relation",as:ye.Button,fullWidth:!0,startIcon:r.createElement(ut(),null),endIcon:null,variant:"secondary",disabled:t.length===0},t.map(l=>r.createElement(Ae.MenuItem,{id:`menuItem-${l}`,key:`menuItem-${l}`,onClick:()=>s(l)},l))))))};zi.propTypes={relationsLayout:o().array.isRequired,editRelationsLayoutRemainingFields:o().array.isRequired,onRemoveField:o().func.isRequired,onAddField:o().func.isRequired};const sE=zi;var _e=p(75146),aE=p(99544),ln=p.n(aE),iE=p(18561),lE=p.n(iE),cE=p(74642),uE=p.n(cE),dE=p(60178),Ui=p.n(dE),pE=p(46966),Lr=p.n(pE),mE=p(81641),fE=p.n(mE),gE=p(18772),Fr=p.n(gE),yE=p(10301),hE=p.n(yE),bE=p(35020),St=p.n(bE),EE=p(60493),vE=p.n(EE),CE=p(29685),PE=p.n(CE),OE=p(71066),RE=p.n(OE);const Hi={biginteger:r.createElement(St(),null),boolean:r.createElement(lE(),null),date:r.createElement(ln(),null),datetime:r.createElement(ln(),null),decimal:r.createElement(St(),null),email:r.createElement(uE(),null),enum:r.createElement(Ui(),null),enumeration:r.createElement(Ui(),null),file:r.createElement(Lr(),null),files:r.createElement(Lr(),null),float:r.createElement(St(),null),integer:r.createElement(St(),null),media:r.createElement(Lr(),null),number:r.createElement(St(),null),relation:r.createElement(fE(),null),string:r.createElement(Fr(),null),text:r.createElement(Fr(),null),richtext:r.createElement(Fr(),null),time:r.createElement(ln(),null),timestamp:r.createElement(ln(),null),json:r.createElement(vE(),null),uid:r.createElement(hE(),null),component:r.createElement(PE(),null),dynamiczone:r.createElement(RE(),null)},kr=({type:e,customFieldUid:t})=>{const n=(0,g.useCustomFields)();let s=Hi[e];if(t){const c=n.get(t).icon;c&&(s=r.createElement(D.Box,{marginRight:3,width:7,height:6},r.createElement(c,null)))}return Hi[e]?s:null};kr.defaultProps={customFieldUid:null},kr.propTypes={type:o().string.isRequired,customFieldUid:o().string};const Gi=kr,ME=e=>e.reduce((t,n)=>{const s=(0,N.get)(n,["attributes"],{}),a=Object.keys(s).filter(c=>!["boolean","component","dynamiczone","json","media","password","relation","text","richtext"].includes((0,N.get)(s,[c,"type"],"")));return t[n.uid]=a,t},{}),_i=e=>{let t;switch(e){case"description":case"label":case"placeholder":t="text";break;case"mainField":t="select";break;case"editable":t="bool";break;default:t=""}const n=v(e==="mainField"?"containers.SettingPage.editSettings.entry.title":`form.Input.${e}`);return{type:t,label:{id:n}}};var Lt=p(47857),TE=Object.defineProperty,cn=Object.getOwnPropertySymbols,Zi=Object.prototype.hasOwnProperty,Qi=Object.prototype.propertyIsEnumerable,Ki=(e,t,n)=>t in e?TE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Ar=(e,t)=>{for(var n in t||(t={}))Zi.call(t,n)&&Ki(e,n,t[n]);if(cn)for(var n of cn(t))Qi.call(t,n)&&Ki(e,n,t[n]);return e},wE=(e,t)=>{var n={};for(var s in e)Zi.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&cn)for(var s of cn(e))t.indexOf(s)<0&&Qi.call(e,s)&&(n[s]=e[s]);return n};const jr=e=>{var t=e,{type:n,options:s,onChange:a,value:c,name:i}=t,u=wE(t,["type","options","onChange","value","name"]);const{formatMessage:l}=(0,A.useIntl)();switch(n){case"text":return r.createElement(Un.TextInput,Ar({onChange:a,value:c,name:i},u));case"bool":return r.createElement(Lt.ToggleInput,Ar({onChange:d=>{a({target:{name:i,value:d.target.checked}})},checked:c,name:i,onLabel:l({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),offLabel:l({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"})},u));case"select":return r.createElement(de.Select,Ar({value:c,name:i,onChange:d=>a({target:{name:i,value:d}})},u),s.map(d=>r.createElement(de.Option,{key:d,value:d},d)));default:return null}};jr.defaultProps={options:void 0},jr.propTypes={type:o().string.isRequired,options:o().arrayOf(o().string),onChange:o().func.isRequired,value:o().oneOfType([o().string,o().bool]).isRequired,name:o().string.isRequired};const IE=jr,DE=[[4,"33%"],[6,"50%"],[8,"66%"],[12,"100%"]],xE=["dynamiczone","component","json","richtext"],SE=[1,5,10,15,30,60],LE=["datetime","time"],Yi=({onMetaChange:e,onSizeChange:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{modifiedData:s,selectedField:a,attributes:c,fieldForm:i}=He(),u=(0,r.useMemo)(Mn,[]),{schemas:l}=(0,fe.useSelector)(C=>u(C),fe.shallowEqual),d=(0,r.useMemo)(()=>{if(!a)return[];const C=T()(s,["metadatas",a,"edit"],{});return Object.keys(C).filter(P=>P!=="visible")},[a,s]),m=(0,r.useMemo)(()=>ME(l),[l]),f=(0,r.useCallback)(C=>{if(C!=="relation"&&C!=="component")return[];const P=C==="component"?"component":"targetModel",I=T()(s,["attributes",a,P],"");return T()(m,[I],[])},[a,m,s]),y=d.map(C=>{const P=T()(c,[a,"type"]);return["component","dynamiczone"].includes(P)&&!["label","description"].includes(C)||P==="component"&&C!=="label"||["media","json","boolean"].includes(P)&&C==="placeholder"||C==="step"?null:r.createElement(le.GridItem,{col:6,key:C},r.createElement(IE,{type:_i(C).type,hint:C==="mainField"?n({id:v("containers.SettingPage.editSettings.relation-field.description")}):"",label:n({id:T()(_i(C),"label.id","app.utils.defaultMessage")}),name:C,onChange:e,value:T()(i,["metadata",C],""),options:f(P)}))}),h=!xE.includes(c[a].type),b=r.createElement(le.GridItem,{col:6,key:"size"},r.createElement(de.Select,{value:i==null?void 0:i.size,name:"size",onChange:C=>{t({name:a,value:C})},label:n({id:v("containers.SettingPage.editSettings.size.label"),defaultMessage:"Size"})},DE.map(([C,P])=>r.createElement(de.Option,{key:C,value:C},P)))),E=LE.includes(c[a].type),F=r.createElement(le.GridItem,{col:6,key:"step"},r.createElement(de.Select,{value:T()(i,["metadata","step"],1),name:"step",onChange:C=>e({target:{name:"step",value:C}}),label:n({id:v("containers.SettingPage.editSettings.step.label"),defaultMessage:"Time interval (minutes)"})},SE.map(C=>r.createElement(de.Option,{key:C,value:C},C))));return r.createElement(r.Fragment,null,y,h&&b,E&&F)};Yi.propTypes={onMetaChange:o().func.isRequired,onSizeChange:o().func.isRequired};const FE=Yi,kE=(0,k.default)(j.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,$r=({onToggle:e,onMetaChange:t,onSizeChange:n,onSubmit:s,type:a,customFieldUid:c})=>{const{selectedField:i}=He(),{formatMessage:u}=(0,A.useIntl)(),l=()=>a==="timestamp"?"date":["decimal","float","integer","biginter"].includes(a)?"number":a;return r.createElement(_e.ModalLayout,{onClose:e,labelledBy:"title"},r.createElement("form",{onSubmit:s},r.createElement(_e.ModalHeader,null,r.createElement(kE,null,r.createElement(Gi,{type:l(),customFieldUid:c}),r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},u({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:xt()(i)})))),r.createElement(_e.ModalBody,null,r.createElement(le.Grid,{gap:4},r.createElement(FE,{onMetaChange:t,onSizeChange:n}))),r.createElement(_e.ModalFooter,{startActions:r.createElement(ye.Button,{onClick:e,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ye.Button,{type:"submit"},u({id:"global.finish",defaultMessage:"Finish"}))})))};$r.defaultProps={customFieldUid:null},$r.propTypes={customFieldUid:o().string,onSubmit:o().func.isRequired,onToggle:o().func.isRequired,onMetaChange:o().func.isRequired,onSizeChange:o().func.isRequired,type:o().string.isRequired};const AE=$r,jE=(e,t,n)=>ge.be.put(ve(n?`content-types/${t}/configuration`:`components/${t}/configuration`),e),Br=({mainLayout:e,components:t,isContentTypeView:n,slug:s,updateLayout:a})=>{const[c,i]=(0,r.useReducer)(Lb,Ir,()=>Vb(Ir,e,t)),[u,l]=(0,r.useState)(!1),{trackUsage:d}=(0,g.useTracking)(),m=(0,g.useNotification)(),{goBack:f}=(0,X.useHistory)(),[y,h]=(0,r.useState)(!1),[b,E]=(0,r.useState)(!1),{componentLayouts:F,initialData:C,modifiedData:P,metaToEdit:I,metaForm:R}=c,{formatMessage:z}=(0,A.useIntl)(),M=T()(e,["info","displayName"],""),V=T()(P,["attributes"],{}),B=Object.keys(V).filter(H=>{const pe=T()(V,[H,"type"],"");return!["dynamiczone","json","text","relation","component","boolean","media","password","richtext","timestamp"].includes(pe)&&!!pe}),Z=T()(P,["layouts","edit"],[]),U=vb()(Z,"rowContent"),q=Object.keys(P.attributes).filter(H=>n?T()(P,["attributes",H,"type"],"")!=="relation":!0).filter(H=>T()(P,["metadatas",H,"edit","visible"],!1)===!0).filter(H=>U.findIndex(pe=>pe.name===H)===-1).sort(),S=T()(P,["layouts","editRelations"],[]),_=Object.keys(V).filter(H=>V[H].type==="relation").filter(H=>S.indexOf(H)===-1),W=({target:{name:H,value:pe}})=>{i({type:"ON_CHANGE",keys:H.split("."),value:pe})},ee=()=>{h(H=>!H)},w=()=>{E(H=>!H)},$=({target:{name:H,value:pe}})=>{i({type:"ON_CHANGE_META",keys:H.split("."),value:pe})},Y=({name:H,value:pe})=>{i({type:"ON_CHANGE_SIZE",name:H,value:pe})},Q=H=>{H.preventDefault(),i({type:"SUBMIT_META_FORM"}),ee()},x=H=>{H.preventDefault(),w()},O=(0,Tr.useMutation)(H=>jE(H,s,n),{onSuccess({data:H}){a&&a(H.data),i({type:"SUBMIT_SUCCEEDED"}),w(),d("didEditEditSettings")},onError(){m({type:"warning",message:{id:"notification.error"}})}}),{isLoading:G}=O,K=()=>{const H=Ii()(qe()(P),["layouts","metadatas","settings"]);ne()(H,"layouts.edit",Db(H.layouts.edit)),O.mutate(H)},ae=(H,pe)=>{i({type:"MOVE_RELATION",fromIndex:H,toIndex:pe})},ce=(H,pe)=>{i({type:"MOVE_FIELD",fromIndex:H,toIndex:pe})},Fe=(H,pe,je,Ue)=>{i(je===Ue?{type:"REORDER_ROW",dragRowIndex:je,dragIndex:H,hoverIndex:pe}:{type:"REORDER_DIFF_ROW",dragIndex:H,hoverIndex:pe,dragRowIndex:je,hoverRowIndex:Ue})},rt=(H,pe)=>{i({type:"MOVE_ROW",fromIndex:H,toIndex:pe})};return r.createElement(Je,{isContentTypeView:n,attributes:V,modifiedData:P,slug:s,componentLayouts:F,selectedField:I,fieldForm:R,onMoveRelation:ae,onMoveField:ce,moveRow:rt,moveItem:Fe,setEditFieldToSelect:H=>{i({type:"SET_FIELD_TO_EDIT",name:H}),ee()},isDraggingSibling:u,setIsDraggingSibling:l},r.createElement(oe.Main,null,r.createElement("form",{onSubmit:x},r.createElement(te.HeaderLayout,{title:z({id:v("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:`Configure the view - ${xt()(M)}`},{name:xt()(M)}),subtitle:z({id:v("components.SettingsViewWrapper.pluginHeader.description.edit-settings"),defaultMessage:"Customize how the edit view will look like."}),navigationAction:r.createElement(g.Link,{startIcon:r.createElement(on(),null),onClick:H=>{H.preventDefault(),f()},to:"/"},z({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ye.Button,{disabled:en()(C,P),startIcon:r.createElement(ft(),null),type:"submit"},z({id:"global.save",defaultMessage:"Save"}))}),r.createElement(te.ContentLayout,null,r.createElement(D.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(se.Stack,{spacing:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},z({id:v("containers.SettingPage.settings"),defaultMessage:"Settings"})),r.createElement(le.Grid,null,r.createElement(le.GridItem,{col:6,s:12},r.createElement(de.Select,{label:z({id:v("containers.SettingPage.editSettings.entry.title"),defaultMessage:"Entry title"}),hint:z({id:v("containers.SettingPage.editSettings.entry.title.description"),defaultMessage:"Set the display field of your entry"}),onChange:H=>{W({target:{name:"settings.mainField",value:H===""?null:H}})},value:P.settings.mainField},B.map(H=>r.createElement(de.Option,{key:H,value:H},H))))),r.createElement(D.Box,{paddingTop:2,paddingBottom:2},r.createElement(Ht.Divider,null)),r.createElement(L.Typography,{variant:"delta",as:"h3"},z({id:v("containers.SettingPage.view"),defaultMessage:"View"})),r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{col:n?8:12,s:12},r.createElement(eE,{attributes:V,editLayout:Z,editLayoutRemainingFields:q,onAddField:H=>{i({type:"ON_ADD_FIELD",name:H})},onRemoveField:(H,pe)=>{i({type:"REMOVE_FIELD",rowIndex:H,fieldIndex:pe})}})),n&&r.createElement(le.GridItem,{col:4,s:12},r.createElement(sE,{editRelationsLayoutRemainingFields:_,relationsLayout:S,onAddField:H=>i({type:"ADD_RELATION",name:H}),onRemoveField:H=>i({type:"REMOVE_RELATION",index:H})})))))),r.createElement(g.ConfirmDialog,{bodyText:{id:v("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ft(),null),isConfirmButtonLoading:G,isOpen:b,onToggleDialog:w,onConfirm:K,variantRightButton:"success-light"})),y&&r.createElement(AE,{onSubmit:Q,onToggle:ee,onMetaChange:$,onSizeChange:Y,type:T()(V,[I,"type"],""),customFieldUid:T()(V,[I,"customField"],"")})))};Br.defaultProps={isContentTypeView:!1,updateLayout:null},Br.propTypes={components:o().object.isRequired,isContentTypeView:o().bool,mainLayout:o().shape({attributes:o().object.isRequired,info:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array.isRequired,edit:o().array.isRequired}).isRequired,metadatas:o().object.isRequired,options:o().object.isRequired}).isRequired,slug:o().string.isRequired,updateLayout:o().func};const Nr=Br;var yt=p(28933);const $E=()=>({type:yt.ZA}),BE=(e,t)=>({type:yt.Id,pagination:e,data:t}),NE=()=>({type:yt.MP});function VE(){return{type:yt.c2}}const qE=({components:e,contentType:t})=>{const{layouts:n}=t;return{contentType:t,components:e,displayedHeaders:n.list,type:yt.Zz}},Vr=e=>({type:yt.Rp,target:e});var Ji=p(35281),qr=p(84686),WE=p(37562);const zE=()=>e=>e["content-manager_listView"]||WE.E,UE=()=>(0,Rn.P1)(zE(),e=>e),Xi=e=>{const{displayedHeaders:t}=e["content-manager_listView"];return t},HE=UE,el=({isPublished:e})=>{const{formatMessage:t}=(0,A.useIntl)(),n=t({id:v(`containers.List.${e?"published":"draft"}`)}),s=e?"success100":"secondary100",a=e?"success700":"secondary700";return r.createElement(D.Box,{background:s,hasRadius:!0,paddingTop:1,paddingBottom:1,paddingLeft:2,paddingRight:2,style:{width:"fit-content"}},r.createElement(L.Typography,{fontWeight:"bold",textColor:a},n))};el.propTypes={isPublished:o().bool.isRequired};const GE=el;var _E=p(59522),Ft=p(41798),ZE=p(67483),QE=p.n(ZE),tl=p(86907),KE=Object.defineProperty,un=Object.getOwnPropertySymbols,nl=Object.prototype.hasOwnProperty,rl=Object.prototype.propertyIsEnumerable,ol=(e,t,n)=>t in e?KE(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,YE=(e,t)=>{for(var n in t||(t={}))nl.call(t,n)&&ol(e,n,t[n]);if(un)for(var n of un(t))rl.call(t,n)&&ol(e,n,t[n]);return e},JE=(e,t)=>{var n={};for(var s in e)nl.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&un)for(var s of un(e))t.indexOf(s)<0&&rl.call(e,s)&&(n[s]=e[s]);return n};const XE=(0,k.default)(j.Flex)`
  position: relative;
  border-radius: 50%;
  width: 26px;
  height: 26px;
  border: 1px solid ${({theme:e})=>e.colors.neutral200};
  background: ${({theme:e})=>e.colors.neutral150};
  padding-left: 1px;

  span {
    line-height: 0.6rem;
    font-size: 0.6rem;
  }
`,sl=e=>{var t=e,{children:n}=t,s=JE(t,["children"]);return r.createElement(XE,YE({justifyContent:"center",alignItems:"center",as:"span"},s),r.createElement(L.Typography,{variant:"sigma",textColor:"neutral600"},n))};sl.propTypes={children:o().string.isRequired};const al=sl,Wr=({url:e,mime:t,alternativeText:n,name:s,ext:a,formats:c})=>{var i;const u=(0,g.prefixFileUrlWithBackendUrl)(e);if(t.includes("image")){const m=((i=c==null?void 0:c.thumbnail)==null?void 0:i.url)||null,f=(0,g.prefixFileUrlWithBackendUrl)(m)||u;return r.createElement(tl.Avatar,{src:f,alt:n||s,preview:!0})}const l=(0,g.getFileExtension)(a),d=s.length>100?`${s.substring(0,100)}...`:s;return r.createElement(It.Tooltip,{description:d},r.createElement(al,null,l))};Wr.defaultProps={alternativeText:null,formats:null},Wr.propTypes={alternativeText:o().string,ext:o().string.isRequired,formats:o().object,mime:o().string.isRequired,name:o().string.isRequired,url:o().string.isRequired};const il=Wr;var e0=Object.defineProperty,ll=Object.getOwnPropertySymbols,t0=Object.prototype.hasOwnProperty,n0=Object.prototype.propertyIsEnumerable,cl=(e,t,n)=>t in e?e0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,r0=(e,t)=>{for(var n in t||(t={}))t0.call(t,n)&&cl(e,n,t[n]);if(ll)for(var n of ll(t))n0.call(t,n)&&cl(e,n,t[n]);return e};const ul=({value:e})=>r.createElement(tl.AvatarGroup,null,e.map((t,n)=>{const s=`${t.id}${n}`;if(n===3){const a=`+${e.length-3}`;return r.createElement(al,{key:s,preview:!1},a)}return n>3?null:r.createElement(il,r0({key:s},t))}));ul.propTypes={value:o().arrayOf(o().shape({alternativeText:o().string,ext:o().string.isRequired,formats:o().object,mime:o().string.isRequired,name:o().string.isRequired,url:o().string.isRequired})).isRequired};const o0=ul;var dl=p(49903),s0=p(51196),a0=p.n(s0);const pl=({type:e,value:t})=>{const{formatDate:n,formatTime:s,formatNumber:a}=(0,A.useIntl)();let c=t;if(e==="date"&&(c=n(a0()(t),{dateStyle:"full"})),e==="datetime"&&(c=n(t,{dateStyle:"full",timeStyle:"short"})),e==="time"){const[i,u,l]=t.split(":"),d=new Date;d.setHours(i),d.setMinutes(u),d.setSeconds(l),c=s(d,{numeric:"auto",style:"short"})}return["float","decimal"].includes(e)&&(c=a(t,{maximumFractionDigits:21})),["integer","biginteger"].includes(e)&&(c=a(t,{maximumFractionDigits:0})),pa()(c)};pl.propTypes={type:o().string.isRequired,value:o().any.isRequired};const ht=pl;var i0=Object.defineProperty,ml=Object.getOwnPropertySymbols,l0=Object.prototype.hasOwnProperty,c0=Object.prototype.propertyIsEnumerable,fl=(e,t,n)=>t in e?i0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,u0=(e,t)=>{for(var n in t||(t={}))l0.call(t,n)&&fl(e,n,t[n]);if(ml)for(var n of ml(t))c0.call(t,n)&&fl(e,n,t[n]);return e},d0=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const p0=(0,k.default)(L.Typography)`
  max-width: 500px;
`,m0=(e,t)=>d0(void 0,null,function*(){const{data:{results:n,pagination:s}}=yield ge.be.get(e);return t(),{results:n,pagination:s}}),gl=({fieldSchema:e,metadatas:t,queryInfos:n,name:s,rowId:a,value:c})=>{const{formatMessage:i}=(0,A.useIntl)(),{notifyStatus:u}=(0,qr.useNotifyAT)(),l=ve(`${n.endPoint}/${a}/${s.split(".")[0]}`),[d,m]=(0,r.useState)(!1),f=r.createElement(r.Fragment,null,r.createElement(dl.Badge,null,c.count)," ",i({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:c.count})),y=()=>{const E=i({id:v("DynamicTable.relation-loaded"),defaultMessage:"Relations have been loaded"});u(E)},{data:h,status:b}=(0,Tr.useQuery)([e.targetModel,a],()=>m0(l,y),{enabled:d,staleTime:0});return r.createElement(D.Box,u0({},g.stopPropagation),r.createElement(Ae.SimpleMenu,{label:f,size:"S",onOpen:()=>m(!0),onClose:()=>m(!1)},b!=="success"&&r.createElement(Ae.MenuItem,{"aria-disabled":!0},r.createElement(ls.Loader,{small:!0},i({id:v("DynamicTable.relation-loading"),defaultMessage:"Relations are loading"}))),b==="success"&&r.createElement(r.Fragment,null,h==null?void 0:h.results.map(E=>r.createElement(Ae.MenuItem,{key:E.id,"aria-disabled":!0},r.createElement(p0,{ellipsis:!0},r.createElement(ht,{type:t.mainField.schema.type,value:E[t.mainField.name]||E.id})))),(h==null?void 0:h.pagination.total)>10&&r.createElement(Ae.MenuItem,{"aria-disabled":!0,"aria-label":i({id:v("DynamicTable.relation-more"),defaultMessage:"This relation contains more entities than displayed"})},r.createElement(L.Typography,null,"...")))))};gl.propTypes={fieldSchema:o().shape({relation:o().string,targetModel:o().string,type:o().string.isRequired}).isRequired,metadatas:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired})}).isRequired,name:o().string.isRequired,rowId:o().oneOfType([o().string,o().number]).isRequired,queryInfos:o().shape({endPoint:o().string.isRequired}).isRequired,value:o().object.isRequired};const f0=gl,g0=(0,k.default)(L.Typography)`
  max-width: 500px;
`,yl=({metadatas:e,value:t})=>{var n;return r.createElement(g0,{textColor:"neutral800",ellipsis:!0},r.createElement(ht,{type:e.mainField.schema.type,value:(n=t[e.mainField.name])!=null?n:t.id}))};yl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string.isRequired,schema:o().shape({type:o().string.isRequired}).isRequired})}).isRequired,value:o().object.isRequired};const y0=yl;var h0=Object.defineProperty,hl=Object.getOwnPropertySymbols,b0=Object.prototype.hasOwnProperty,E0=Object.prototype.propertyIsEnumerable,bl=(e,t,n)=>t in e?h0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v0=(e,t)=>{for(var n in t||(t={}))b0.call(t,n)&&bl(e,n,t[n]);if(hl)for(var n of hl(t))E0.call(t,n)&&bl(e,n,t[n]);return e};const C0=(0,k.default)(L.Typography)`
  max-width: 500px;
`,El=({value:e,metadatas:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{mainField:{type:s,name:a}}=t,c=r.createElement(r.Fragment,null,r.createElement(dl.Badge,null,e.length)," ",n({id:"content-manager.containers.ListPage.items",defaultMessage:"{number, plural, =0 {items} one {item} other {items}}"},{number:e.length}));return r.createElement(D.Box,v0({},g.stopPropagation),r.createElement(Ae.SimpleMenu,{label:c,size:"S"},e.map(i=>r.createElement(Ae.MenuItem,{key:i.id,"aria-disabled":!0},r.createElement(C0,{ellipsis:!0},r.createElement(ht,{type:s,value:i[a]||i.id}))))))};El.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string,type:o().string,value:o().string})}).isRequired,value:o().array.isRequired};const P0=El,O0=(0,k.default)(L.Typography)`
  max-width: 250px;
`,vl=({value:e,metadatas:t})=>{const{mainField:n}=t,s=e[n.name];return r.createElement(It.Tooltip,{label:s},r.createElement(O0,{textColor:"neutral800",ellipsis:!0},r.createElement(ht,{type:n.type,value:s})))};vl.propTypes={metadatas:o().shape({mainField:o().shape({name:o().string,type:o().string,value:o().string})}).isRequired,value:o().object.isRequired};const R0=vl;var M0=p(81763),Cl=p.n(M0);function Pl(e){return["oneToOne","manyToOne","oneToOneMorph"].includes(e)}function T0(e,t,n,s){if(e==="component"){const{mainField:{name:a,type:c}}=n;if(s!=null&&s.repeatable)return t.length>0;const i=t==null?void 0:t[a];return a==="id"&&![void 0,null].includes(i)?!0:Dt(c)&&c!=="biginteger"&&a!=="id"?Cl()(i):!Re()(i)}return e==="relation"?Pl(s.relation)?!Re()(t):(t==null?void 0:t.count)>0:Dt(e)&&e!=="biginteger"?Cl()(t):e==="boolean"?t!==null:!Re()(t)}var w0=Object.defineProperty,Ol=Object.getOwnPropertySymbols,I0=Object.prototype.hasOwnProperty,D0=Object.prototype.propertyIsEnumerable,Rl=(e,t,n)=>t in e?w0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,x0=(e,t)=>{for(var n in t||(t={}))I0.call(t,n)&&Rl(e,n,t[n]);if(Ol)for(var n of Ol(t))D0.call(t,n)&&Rl(e,n,t[n]);return e};const Ml=(0,k.default)(L.Typography)`
  max-width: 300px;
`,zr=({content:e,fieldSchema:t,metadatas:n,name:s,queryInfos:a,rowId:c})=>{const{type:i}=t;if(!T0(i,e,n,t))return r.createElement(L.Typography,{textColor:"neutral800"},"-");switch(i){case"media":return t.multiple?r.createElement(o0,{value:e}):r.createElement(il,x0({},e));case"relation":return Pl(t.relation)?r.createElement(y0,{metadatas:n,value:e}):r.createElement(f0,{fieldSchema:t,queryInfos:a,metadatas:n,value:e,name:s,rowId:c});case"component":return t.repeatable===!0?r.createElement(P0,{value:e,metadatas:n}):r.createElement(R0,{value:e,metadatas:n});case"string":return r.createElement(It.Tooltip,{description:e},r.createElement(Ml,{ellipsis:!0,textColor:"neutral800"},r.createElement(ht,{type:i,value:e})));default:return r.createElement(Ml,{ellipsis:!0,textColor:"neutral800"},r.createElement(ht,{type:i,value:e}))}};zr.defaultProps={content:void 0,queryInfos:void 0},zr.propTypes={content:o().any,fieldSchema:o().shape({component:o().string,multiple:o().bool,type:o().string.isRequired,repeatable:o().bool,relation:o().string}).isRequired,metadatas:o().object.isRequired,name:o().string.isRequired,rowId:o().oneOfType([o().string,o().number]).isRequired,queryInfos:o().shape({endPoint:o().string.isRequired})};const S0=zr;var L0=Object.defineProperty,F0=Object.defineProperties,k0=Object.getOwnPropertyDescriptors,dn=Object.getOwnPropertySymbols,Tl=Object.prototype.hasOwnProperty,wl=Object.prototype.propertyIsEnumerable,Il=(e,t,n)=>t in e?L0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,kt=(e,t)=>{for(var n in t||(t={}))Tl.call(t,n)&&Il(e,n,t[n]);if(dn)for(var n of dn(t))wl.call(t,n)&&Il(e,n,t[n]);return e},A0=(e,t)=>F0(e,k0(t)),j0=(e,t)=>{var n={};for(var s in e)Tl.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&dn)for(var s of dn(e))t.indexOf(s)<0&&wl.call(e,s)&&(n[s]=e[s]);return n};const Ur=({canCreate:e,canDelete:t,headers:n,entriesToDelete:s,onClickDelete:a,onSelectRow:c,withMainAction:i,withBulkActions:u,rows:l})=>{const{push:d,location:{pathname:m}}=(0,X.useHistory)(),{formatMessage:f}=(0,A.useIntl)(),{trackUsage:y}=(0,g.useTracking)(),h=Qo();return r.createElement(Ft.Tbody,null,l.map((b,E)=>{const F=s.findIndex(P=>P===b.id)!==-1,C=f({id:"content-manager.components.DynamicTable.row-line",defaultMessage:"item line {number}"},{number:E});return r.createElement(Ft.Tr,kt({key:b.id},(0,g.onRowClick)({fn(){y("willEditEntryFromList"),d({pathname:`${m}/${b.id}`,state:{from:m},search:h})},condition:u})),i&&r.createElement(Ft.Td,kt({},g.stopPropagation),r.createElement(_E.BaseCheckbox,{"aria-label":f({id:"app.component.table.select.one-entry",defaultMessage:"Select {target}"},{target:(0,ci.Pp)(b.firstname,b.lastname)}),checked:F,onChange:()=>{c({name:b.id,value:!F})}})),n.map(P=>{var I=P,{key:R,cellFormatter:z,name:M}=I,V=j0(I,["key","cellFormatter","name"]);return r.createElement(Ft.Td,{key:R},typeof z=="function"?z(b,kt({key:R,name:M},V)):r.createElement(S0,A0(kt({content:b[M.split(".")[0]],name:M},V),{rowId:b.id})))}),u&&r.createElement(Ft.Td,null,r.createElement(j.Flex,kt({justifyContent:"end"},g.stopPropagation),r.createElement(Me.IconButton,{forwardedAs:X.Link,onClick:()=>{y("willEditEntryFromButton")},to:{pathname:`${m}/${b.id}`,state:{from:m},search:h},label:f({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:C}),noBorder:!0,icon:r.createElement(it(),null)}),e&&r.createElement(D.Box,{paddingLeft:1},r.createElement(Me.IconButton,{forwardedAs:X.Link,to:{pathname:`${m}/create/clone/${b.id}`,state:{from:m},search:h},label:f({id:"app.component.table.duplicate",defaultMessage:"Duplicate {target}"},{target:C}),noBorder:!0,icon:r.createElement(QE(),null)})),t&&r.createElement(D.Box,{paddingLeft:1},r.createElement(Me.IconButton,{onClick:()=>{y("willDeleteEntryFromList"),a(b.id)},label:f({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:C}),noBorder:!0,icon:r.createElement(Be(),null)})))))}))};Ur.defaultProps={canCreate:!1,canDelete:!1,entriesToDelete:[],onClickDelete(){},onSelectRow(){},rows:[],withBulkActions:!1,withMainAction:!1},Ur.propTypes={canCreate:o().bool,canDelete:o().bool,entriesToDelete:o().array,headers:o().array.isRequired,onClickDelete:o().func,onSelectRow:o().func,rows:o().array,withBulkActions:o().bool,withMainAction:o().bool};const $0=Ur;var B0=Object.defineProperty,pn=Object.getOwnPropertySymbols,Dl=Object.prototype.hasOwnProperty,xl=Object.prototype.propertyIsEnumerable,Sl=(e,t,n)=>t in e?B0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,N0=(e,t)=>{for(var n in t||(t={}))Dl.call(t,n)&&Sl(e,n,t[n]);if(pn)for(var n of pn(t))xl.call(t,n)&&Sl(e,n,t[n]);return e},V0=(e,t)=>{var n={};for(var s in e)Dl.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&pn)for(var s of pn(e))t.indexOf(s)<0&&xl.call(e,s)&&(n[s]=e[s]);return n};const Ll=e=>{var t=e,{area:n}=t,s=V0(t,["area"]);const a=Xo(n);return a?r.createElement("ul",null,a.map(c=>c.Component(s)?r.createElement(D.Box,{key:c.name,padding:3,style:{textAlign:"center"}},r.createElement(c.Component,N0({},s))):null)):null};Ll.propTypes={area:o().string.isRequired};const Fl=Ll,kl=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(ke.Dialog,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(ke.DialogBody,{icon:r.createElement(wt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{id:"confirm-description"},a({id:v("popUpWarning.bodyMessage.contentType.delete.all"),defaultMessage:"Are you sure you want to delete these entries?"}))),r.createElement(j.Flex,null,r.createElement(Fl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ye.Button,{onClick:s,variant:"danger-light",startIcon:r.createElement(Be(),null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};kl.propTypes={isConfirmButtonLoading:o().bool.isRequired,isOpen:o().bool.isRequired,onConfirm:o().func.isRequired,onToggleDialog:o().func.isRequired};const q0=kl,Al=({isConfirmButtonLoading:e,isOpen:t,onToggleDialog:n,onConfirm:s})=>{const{formatMessage:a}=(0,A.useIntl)();return r.createElement(ke.Dialog,{onClose:n,title:a({id:"app.components.ConfirmDialog.title",defaultMessage:"Confirmation"}),labelledBy:"confirmation",describedBy:"confirm-description",isOpen:t},r.createElement(ke.DialogBody,{icon:r.createElement(wt(),null)},r.createElement(se.Stack,{spacing:2},r.createElement(j.Flex,{justifyContent:"center"},r.createElement(L.Typography,{id:"confirm-description"},a({id:"components.popUpWarning.message",defaultMessage:"Are you sure you want to delete this?"}))),r.createElement(j.Flex,null,r.createElement(Fl,{area:"contentManager.listView.deleteModalAdditionalInfos"})))),r.createElement(ke.DialogFooter,{startAction:r.createElement(ye.Button,{onClick:n,variant:"tertiary"},a({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endAction:r.createElement(ye.Button,{onClick:s,variant:"danger-light",startIcon:r.createElement(Be(),null),id:"confirm-delete",loading:e},a({id:"app.components.Button.confirm",defaultMessage:"Confirm"}))}))};Al.propTypes={isConfirmButtonLoading:o().bool.isRequired,isOpen:o().bool.isRequired,onConfirm:o().func.isRequired,onToggleDialog:o().func.isRequired};const W0=Al;var z0=Object.defineProperty,U0=Object.defineProperties,H0=Object.getOwnPropertyDescriptors,jl=Object.getOwnPropertySymbols,G0=Object.prototype.hasOwnProperty,_0=Object.prototype.propertyIsEnumerable,$l=(e,t,n)=>t in e?z0(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,mn=(e,t)=>{for(var n in t||(t={}))G0.call(t,n)&&$l(e,n,t[n]);if(jl)for(var n of jl(t))_0.call(t,n)&&$l(e,n,t[n]);return e},fn=(e,t)=>U0(e,H0(t));const Hr=({canCreate:e,canDelete:t,contentTypeName:n,action:s,isBulkable:a,isLoading:c,onConfirmDelete:i,onConfirmDeleteAll:u,layout:l,rows:d})=>{const{runHookWaterfall:m}=(0,g.useStrapiApp)(),f=l.contentType.options.draftAndPublish||!1,{formatMessage:y}=(0,A.useIntl)(),h=(0,fe.useSelector)(Xi),b=(0,r.useMemo)(()=>{const F=m(Ut.No,{displayedHeaders:h,layout:l}).displayedHeaders.map(C=>{const{metadatas:P}=C;if(C.fieldSchema.type==="relation"){const I=`${C.name}.${C.metadatas.mainField.name}`;return fn(mn({},C),{metadatas:fn(mn({},P),{label:y({id:v(`containers.ListPage.table-headers.${C.name}`),defaultMessage:P.label})}),name:I})}return fn(mn({},C),{metadatas:fn(mn({},P),{label:y({id:v(`containers.ListPage.table-headers.${C.name}`),defaultMessage:P.label})})})});return f?[...F,{key:"__published_at_temp_key__",name:"publishedAt",fieldSchema:{type:"custom"},metadatas:{label:y({id:v("containers.ListPage.table-headers.publishedAt"),defaultMessage:"publishedAt"}),searchable:!1,sortable:!0},cellFormatter(C){const P=!Re()(C.publishedAt);return r.createElement(GE,{isPublished:P})}}]:F},[m,h,l,f,y]);return r.createElement(g.DynamicTable,{components:{ConfirmDialogDelete:W0,ConfirmDialogDeleteAll:q0},contentType:n,action:s,isLoading:c,headers:b,onConfirmDelete:i,onConfirmDeleteAll:u,onOpenDeleteAllModalTrackedEvent:"willBulkDeleteEntries",rows:d,withBulkActions:!0,withMainAction:t&&a},r.createElement($0,{canCreate:e,canDelete:t,headers:b,rows:d,withBulkActions:!0,withMainAction:t&&a}))};Hr.defaultProps={action:void 0},Hr.propTypes={canCreate:o().bool.isRequired,canDelete:o().bool.isRequired,contentTypeName:o().string.isRequired,action:o().node,isBulkable:o().bool.isRequired,isLoading:o().bool.isRequired,layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired,onConfirmDelete:o().func.isRequired,onConfirmDeleteAll:o().func.isRequired,rows:o().array.isRequired};const Z0=Hr,Q0=["json","component","media","richtext","dynamiczone","password"],K0=["createdAt","updatedAt"],Y0=(e,t)=>{const{allPermissions:n}=(0,g.useRBACProvider)(),s=(0,g.findMatchingPermissions)(n,[{action:"plugin::content-manager.explorer.read",subject:t}]),a=T()(s,["0","properties","fields"],[]);return Object.keys(T()(e,["attributes"]),{}).filter(u=>{const l=T()(e,["attributes",u],{});return!(!l.type||Q0.includes(l.type)||!a.includes(u)&&u!=="id"&&!K0.includes(u))}).sort()};var J0=p(23980),X0=p.n(J0);const Bl=({displayedFilters:e})=>{const[t,n]=(0,r.useState)(!1),{formatMessage:s}=(0,A.useIntl)(),a=(0,r.useRef)(),{trackUsage:c}=(0,g.useTracking)(),i=()=>{t||c("willFilterEntries"),n(u=>!u)};return r.createElement(r.Fragment,null,r.createElement(D.Box,{paddingTop:1,paddingBottom:1},r.createElement(ye.Button,{variant:"tertiary",ref:a,startIcon:r.createElement(X0(),null),onClick:i,size:"S"},s({id:"app.utils.filters",defaultMessage:"Filters"})),t&&r.createElement(g.FilterPopoverURLQuery,{displayedFilters:e,isVisible:t,onToggle:i,source:a})),r.createElement(g.FilterListURLQuery,{filtersSchema:e}))};Bl.propTypes={displayedFilters:o().arrayOf(o().shape({name:o().string.isRequired,metadatas:o().shape({label:o().string}),fieldSchema:o().shape({type:o().string})})).isRequired};const ev=Bl,Nl=({contentType:e,slug:t,metadatas:n})=>{const{formatMessage:s}=(0,A.useIntl)(),c=Y0(e,t).map(i=>{const u=e.attributes[i],{type:l,enum:d}=u,m={name:"didFilterEntries",properties:{useRelation:l==="relation"}},{mainField:f,label:y}=n[i].list;return{name:i,metadatas:{label:s({id:y,defaultMessage:y})},fieldSchema:{type:l,options:d,mainField:f},trackedEvent:m}});return r.createElement(ev,{displayedFilters:c})};Nl.propTypes={contentType:o().object.isRequired,metadatas:o().object.isRequired,slug:o().string.isRequired};const tv=Nl,nv=e=>Object.keys(e).reduce((n,s)=>{const a=e[s];return yo(a)&&n.push(s),n},[]).sort(),Vl=({layout:e})=>{const t=(0,fe.useDispatch)(),n=(0,fe.useSelector)(Xi),{trackUsage:s}=(0,g.useTracking)(),{formatMessage:a}=(0,A.useIntl)(),c=nv(e.contentType.attributes).map(l=>{const d=e.contentType.metadatas[l].list;return{name:l,intlLabel:{id:d.label,defaultMessage:d.label}}}),i=n.map(({name:l})=>l),u=l=>{if(s("didChangeDisplayedFields"),l.length<i.length){const d=i.filter(m=>l.indexOf(m)===-1);t(Vr({name:d[0],value:!0}))}else{const d=l.filter(m=>i.indexOf(m)===-1);t(Vr({name:d[0],value:!1}))}};return r.createElement(D.Box,{paddingTop:1,paddingBottom:1},r.createElement(de.Select,{"aria-label":"change displayed fields",value:i,onChange:u,customizeContent:l=>a({id:v("select.currently.selected"),defaultMessage:"{count} currently selected"},{count:l.length}),multi:!0,size:"S"},c.map(l=>r.createElement(de.Option,{key:l.name,value:l.name},a({id:l.intlLabel.id||l.name,defaultMessage:l.intlLabel.defaultMessage||l.name})))))};Vl.propTypes={layout:o().shape({contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired};const rv=(0,r.memo)(Vl),Gr=({pagination:e})=>r.createElement(D.Box,{paddingTop:4},r.createElement(j.Flex,{alignItems:"flex-end",justifyContent:"space-between"},r.createElement(g.PageSizeURLQuery,{trackedEvent:"willChangeNumberOfEntriesPerPage"}),r.createElement(g.PaginationURLQuery,{pagination:e})));Gr.defaultProps={pagination:{pageCount:0,pageSize:10,total:0}},Gr.propTypes={pagination:o().shape({page:o().number,pageCount:o().number,pageSize:o().number,total:o().number})};const ov=Gr;var sv=p(25108),av=Object.defineProperty,iv=Object.defineProperties,lv=Object.getOwnPropertyDescriptors,ql=Object.getOwnPropertySymbols,cv=Object.prototype.hasOwnProperty,uv=Object.prototype.propertyIsEnumerable,Wl=(e,t,n)=>t in e?av(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,dv=(e,t)=>{for(var n in t||(t={}))cv.call(t,n)&&Wl(e,n,t[n]);if(ql)for(var n of ql(t))uv.call(t,n)&&Wl(e,n,t[n]);return e},pv=(e,t)=>iv(e,lv(t)),_r=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const mv=De.Z.contentManager,fv=(0,k.default)(D.Box)`
  svg {
    path {
      fill: ${({theme:e})=>e.colors.neutral900};
    }
  }
`;function zl({canCreate:e,canDelete:t,canRead:n,data:s,getData:a,getDataSucceeded:c,isLoading:i,layout:u,pagination:l,slug:d}){const{total:m}=l,{contentType:{metadatas:f,settings:{bulkable:y,filterable:h,searchable:b}}}=u,E=(0,g.useNotification)(),{trackUsage:F}=(0,g.useTracking)(),{refetchPermissions:C}=(0,g.useRBACProvider)(),P=(0,r.useRef)(F),I=(0,r.useRef)(C),{notifyStatus:R}=(0,qr.useNotifyAT)();(0,g.useFocusWhenNavigate)();const[{query:z}]=(0,g.useQueryParams)(),M=Ya(z),V=(0,Ne.stringify)({plugins:z.plugins},{encode:!1}),{pathname:B}=(0,X.useLocation)(),{push:Z}=(0,X.useHistory)(),{formatMessage:U}=(0,A.useIntl)(),q=u.contentType,S=T()(q,"options.draftAndPublish",!1),_=(0,r.useRef)(""),W=(0,r.useCallback)((O,G)=>_r(this,null,function*(){a();try{const K=G?{cancelToken:G.token}:null,{data:{results:ae,pagination:ce}}=yield ge.be.get(O,K);R(U({id:v("utils.data-loaded"),defaultMessage:"{number, plural, =1 {# entry has} other {# entries have}} successfully been loaded"},{number:ce.count})),c(ce,ae)}catch(K){if(Se().isCancel(K))return;if(T()(K,"response.status",null)===403){yield I.current(),E({type:"info",message:{id:v("permissions.not-allowed.update")}}),Z("/");return}sv.error(K),E({type:"warning",message:{id:v("error.model.fetch")}})}}),[U,a,c,R,Z,E]),ee=(0,r.useCallback)(O=>_r(this,null,function*(){try{yield ge.be.post(ve(`collection-types/${d}/actions/bulkDelete`),{ids:O});const G=ve(`collection-types/${d}${M}`);W(G),P.current("didBulkDeleteEntries")}catch(G){E({type:"warning",message:{id:v("error.record.delete")}})}}),[W,M,d,E]),w=(0,r.useCallback)(O=>_r(this,null,function*(){try{yield ge.be.delete(ve(`collection-types/${d}/${O}`));const G=ve(`collection-types/${d}${M}`);W(G),E({type:"success",message:{id:v("success.record.delete")}})}catch(G){const K=T()(G,"response.payload.message",U({id:v("error.record.delete")}));E({type:"warning",message:K})}}),[d,M,W,E,U]);(0,r.useEffect)(()=>{const G=Se().CancelToken.source(),K=n,ae=ve(`collection-types/${d}${M}`);return K&&ae.includes(_.current)&&W(ae,G),()=>{_.current=d,G.cancel("Operation canceled by the user.")}},[n,a,d,M,c,W]);const $=U({id:v("header.name"),defaultMessage:"Content"}),Y=U({id:q.info.displayName,defaultMessage:q.info.displayName||$}),Q=n?U({id:v("pages.ListView.header-subtitle"),defaultMessage:"{number, plural, =0 {# entries} one {# entry} other {# entries}} found"},{number:m}):null,x=O=>e?r.createElement(ye.Button,pv(dv({},O),{forwardedAs:X.Link,onClick:()=>{const G=S?{status:"draft"}:{};P.current("willCreateEntry",G)},to:{pathname:`${B}/create`,search:z.plugins?V:""},startIcon:r.createElement(ut(),null),style:{textDecoration:"none"}}),U({id:v("HeaderLayout.button.label-add-entry"),defaultMessage:"Create new entry"})):null;return r.createElement(oe.Main,{"aria-busy":i},r.createElement(te.HeaderLayout,{primaryAction:x(),subtitle:Q,title:Y,navigationAction:r.createElement(g.Link,{startIcon:r.createElement(on(),null),to:"/content-manager/"},U({id:"global.back",defaultMessage:"Back"}))}),!n&&r.createElement(te.ActionLayout,{endActions:r.createElement(_t,{area:"contentManager.listView.actions"})}),n&&r.createElement(te.ActionLayout,{endActions:r.createElement(r.Fragment,null,r.createElement(_t,{area:"contentManager.listView.actions"}),r.createElement(rv,{layout:u}),r.createElement(g.CheckPermissions,{permissions:mv.collectionTypesConfigurations},r.createElement(fv,{paddingTop:1,paddingBottom:1},r.createElement(Me.IconButton,{onClick:()=>{F("willEditListLayout")},forwardedAs:X.Link,to:{pathname:`${d}/configurations/list`,search:V},icon:r.createElement(ki(),null),label:U({id:"app.links.configure-view",defaultMessage:"Configure the view"})})))),startActions:r.createElement(r.Fragment,null,b&&r.createElement(g.SearchURLQuery,{label:U({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:Y}),placeholder:U({id:"global.search",defaultMessage:"Search"}),trackedEvent:"didSearch"}),h&&r.createElement(tv,{contentType:q,slug:d,metadatas:f}))}),r.createElement(te.ContentLayout,null,n?r.createElement(r.Fragment,null,r.createElement(Z0,{canCreate:e,canDelete:t,contentTypeName:Y,onConfirmDeleteAll:ee,onConfirmDelete:w,isBulkable:y,isLoading:i,layout:u,rows:s,action:x({variant:"secondary"})}),r.createElement(ov,{pagination:{pageCount:(l==null?void 0:l.pageCount)||1}})):r.createElement(g.NoPermissions,null)))}zl.propTypes={canCreate:o().bool.isRequired,canDelete:o().bool.isRequired,canRead:o().bool.isRequired,data:o().array.isRequired,layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,info:o().shape({displayName:o().string.isRequired}).isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired}).isRequired}).isRequired,isLoading:o().bool.isRequired,getData:o().func.isRequired,getDataSucceeded:o().func.isRequired,pagination:o().shape({total:o().number.isRequired,pageCount:o().number}).isRequired,slug:o().string.isRequired};const gv=HE();function yv(e){return(0,Ji.bindActionCreators)({getData:$E,getDataSucceeded:BE,onChangeListHeaders:Vr,onResetListHeaders:NE},e)}const hv=(0,fe.connect)(gv,yv),bv=(0,Ji.compose)(hv)((0,r.memo)(zl,We()));var Ev=Object.defineProperty,Ul=Object.getOwnPropertySymbols,vv=Object.prototype.hasOwnProperty,Cv=Object.prototype.propertyIsEnumerable,Hl=(e,t,n)=>t in e?Ev(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gl=(e,t)=>{for(var n in t||(t={}))vv.call(t,n)&&Hl(e,n,t[n]);if(Ul)for(var n of Ul(t))Cv.call(t,n)&&Hl(e,n,t[n]);return e};const Zr=e=>{const t=(0,r.useMemo)(()=>Oo(e.slug),[e.slug]),{isLoading:n,allowedActions:s}=(0,g.useRBAC)(t,e.permissions);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(bv,Gl(Gl({},e),s))};Zr.defaultProps={permissions:[]},Zr.propTypes={permissions:o().array,slug:o().string.isRequired};const Pv=(0,r.memo)(Zr,(e,t)=>{const n=(0,g.difference)(e,t);return Object.keys(n).filter(a=>a!=="state").length>0});var Ov=Object.defineProperty,Rv=Object.defineProperties,Mv=Object.getOwnPropertyDescriptors,gn=Object.getOwnPropertySymbols,_l=Object.prototype.hasOwnProperty,Zl=Object.prototype.propertyIsEnumerable,Ql=(e,t,n)=>t in e?Ov(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Tv=(e,t)=>{for(var n in t||(t={}))_l.call(t,n)&&Ql(e,n,t[n]);if(gn)for(var n of gn(t))Zl.call(t,n)&&Ql(e,n,t[n]);return e},wv=(e,t)=>Rv(e,Mv(t)),Iv=(e,t)=>{var n={};for(var s in e)_l.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(e!=null&&gn)for(var s of gn(e))t.indexOf(s)<0&&Zl.call(e,s)&&(n[s]=e[s]);return n};const Kl=e=>{var t=e,{layout:n}=t,s=Iv(t,["layout"]);const a=(0,fe.useDispatch)(),{replace:c}=(0,X.useHistory)(),[{query:i,rawQuery:u}]=(0,g.useQueryParams)(),l=Yo(i,s.slug,"listView"),d=Zo(s.slug);return(0,r.useEffect)(()=>{u||c(d)},[u,c,d]),(0,r.useEffect)(()=>{a(qE(n))},[a,n]),(0,r.useEffect)(()=>()=>{a(VE())},[a]),l?r.createElement(Pv,wv(Tv({},s),{layout:n,permissions:l})):null};Kl.propTypes={layout:o().exact({components:o().object.isRequired,contentType:o().shape({attributes:o().object.isRequired,metadatas:o().object.isRequired,layouts:o().shape({list:o().array.isRequired,editRelations:o().array}).isRequired,options:o().object.isRequired,settings:o().object.isRequired,pluginOptions:o().object}).isRequired}).isRequired,slug:o().string.isRequired};const Dv=Kl,xv=(e,t)=>ge.be.put(ve(`content-types/${t}/configuration`),e),Sv=(0,k.default)(j.Flex)`
  gap: ${({theme:e})=>e.spaces[4]};
`,Qr=({modifiedData:e,onChange:t,sortOptions:n})=>{const{formatMessage:s}=(0,A.useIntl)(),{settings:a,metadatas:c}=e;return r.createElement(r.Fragment,null,r.createElement(D.Box,{paddingBottom:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},s({id:v("containers.SettingPage.settings"),defaultMessage:"Settings"}))),r.createElement(Sv,{justifyContent:"space-between",wrap:"wrap",paddingBottom:6},r.createElement(Lt.ToggleInput,{label:s({id:v("form.Input.search"),defaultMessage:"Enable search"}),onChange:i=>{t({target:{name:"settings.searchable",value:i.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.searchable",checked:a.searchable}),r.createElement(Lt.ToggleInput,{label:s({id:v("form.Input.filters"),defaultMessage:"Enable filters"}),onChange:i=>{t({target:{name:"settings.filterable",value:i.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.filterable",checked:a.filterable}),r.createElement(Lt.ToggleInput,{label:s({id:v("form.Input.bulkActions"),defaultMessage:"Enable bulk actions"}),onChange:i=>{t({target:{name:"settings.bulkable",value:i.target.checked}})},onLabel:s({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:s({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"}),name:"settings.bulkable",checked:a.bulkable})),r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{s:12,col:6},r.createElement(de.Select,{label:s({id:v("form.Input.pageEntries"),defaultMessage:"Entries per page"}),hint:s({id:v("form.Input.pageEntries.inputDescription"),defaultMessage:"Note: You can override this value in the Collection Type settings page."}),onChange:i=>t({target:{name:"settings.pageSize",value:i}}),name:"settings.pageSize",value:e.settings.pageSize||""},[10,20,50,100].map(i=>r.createElement(de.Option,{key:i,value:i},i)))),r.createElement(le.GridItem,{s:12,col:3},r.createElement(de.Select,{label:s({id:v("form.Input.defaultSort"),defaultMessage:"Default sort attribute"}),onChange:i=>t({target:{name:"settings.defaultSortBy",value:i}}),name:"settings.defaultSortBy",value:e.settings.defaultSortBy||""},n.map(i=>r.createElement(de.Option,{key:i,value:i},c[i].list.label||i)))),r.createElement(le.GridItem,{s:12,col:3},r.createElement(de.Select,{label:s({id:v("form.Input.sort.order"),defaultMessage:"Default sort order"}),onChange:i=>t({target:{name:"settings.defaultSortOrder",value:i}}),name:"settings.defaultSortOrder",value:e.settings.defaultSortOrder||""},["ASC","DESC"].map(i=>r.createElement(de.Option,{key:i,value:i},i))))))};Qr.defaultProps={modifiedData:{},sortOptions:[]},Qr.propTypes={modifiedData:o().object,onChange:o().func.isRequired,sortOptions:o().array};const Lv=Qr,Kr=k.default.button`
  display: flex;
  align-items: center;
  height: ${({theme:e})=>e.spaces[7]};

  &:last-child {
    padding: 0 ${({theme:e})=>e.spaces[3]};
  }
`,Yl=(0,k.default)(Kr)`
  padding: 0 ${({theme:e})=>e.spaces[3]};
  border-right: 1px solid ${({theme:e})=>e.colors.neutral150};
  cursor: all-scroll;

  svg {
    width: ${12/16}rem;
    height: ${12/16}rem;
  }
`,Fv=(0,k.default)(j.Flex)`
  max-height: ${32/16}rem;
  cursor: pointer;

  svg {
    width: ${10/16}rem;
    height: ${10/16}rem;

    path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    background-color: ${({theme:e})=>e.colors.primary100};
    border-color: ${({theme:e})=>e.colors.primary200};

    svg {
      path {
        fill: ${({theme:e})=>e.colors.primary600};
      }
    }

    ${L.Typography} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${Yl} {
      border-right: 1px solid ${({theme:e})=>e.colors.primary200};
    }
  }
`,kv=(0,k.default)(D.Box)`
  &:last-child {
    padding-right: ${({theme:e})=>e.spaces[3]};
  }
`,Jl=({index:e,isDraggingSibling:t,labelField:n,onClickEditField:s,onMoveField:a,onRemoveField:c,name:i,setIsDraggingSibling:u})=>{const{formatMessage:l}=(0,A.useIntl)(),d=(0,r.useRef)(null),m=(0,r.useRef)(null),[,f]=(0,r.useState)(!1),y=(0,r.useRef)(),h=lo(n),b=()=>{y.current&&y.current.click()},[,E]=(0,Te.useDrop)({accept:Oe.FIELD,hover(R,z){if(!m.current)return;const M=R.index,V=e;if(M===V)return;const B=m.current.getBoundingClientRect(),Z=(B.right-B.left)/2,q=z.getClientOffset().x-B.left;M>V&&q>Z||M<V&&q<Z||(a(M,V),R.index=V)}}),[{isDragging:F},C,P]=(0,Te.useDrag)({type:Oe.FIELD,item(){return{index:e,labelField:n,name:i}},collect:R=>({isDragging:R.isDragging()}),end(){u(!1)}});(0,r.useEffect)(()=>{P((0,Yt.rX)(),{captureDraggingState:!1})},[P]),(0,r.useEffect)(()=>{F&&u(!0)},[F,u]),(0,r.useEffect)(()=>{t||f(R=>!R)},[t]);const I={dragRef:C(d),dropRef:E(m)};return r.createElement(kv,{ref:I?I.dropRef:null},F&&r.createElement(vn,{transparent:!0,labelField:h}),!F&&t&&r.createElement(vn,{isSibling:!0,labelField:h}),!F&&!t&&r.createElement(Fv,{borderColor:"neutral150",background:"neutral100",hasRadius:!0,justifyContent:"space-between",onClick:b,isDragging:F},r.createElement(se.Stack,{horizontal:!0,spacing:3},r.createElement(Yl,{as:"span","aria-label":l({id:v("components.DraggableCard.move.field"),defaultMessage:"Move {item}"},{item:n}),onClick:R=>R.stopPropagation(),ref:I.dragRef,type:"button"},r.createElement(Xe(),null)),r.createElement(L.Typography,{fontWeight:"bold"},h)),r.createElement(j.Flex,{paddingLeft:3},r.createElement(Kr,{ref:y,onClick:R=>{R.stopPropagation(),s(i)},"aria-label":l({id:v("components.DraggableCard.edit.field"),defaultMessage:"Edit {item}"},{item:n}),type:"button"},r.createElement(it(),null)),r.createElement(Kr,{onClick:c,"data-testid":`delete-${i}`,"aria-label":l({id:v("components.DraggableCard.delete.field"),defaultMessage:"Delete {item}"},{item:n}),type:"button"},r.createElement(io(),null)))))};Jl.propTypes={index:o().number.isRequired,isDraggingSibling:o().bool.isRequired,labelField:o().string.isRequired,name:o().string.isRequired,onClickEditField:o().func.isRequired,onMoveField:o().func.isRequired,onRemoveField:o().func.isRequired,setIsDraggingSibling:o().func.isRequired};const Av=Jl,Xl=(0,k.default)(D.Box)`
  flex: ${({size:e})=>e};
`,jv=(0,k.default)(Xl)`
  overflow-x: scroll;
  overflow-y: hidden;
`,$v=(0,k.default)(Xl)`
  max-width: ${32/16}rem;
`,ec=({displayedFields:e,listRemainingFields:t,metadatas:n,onAddField:s,onClickEditField:a,onMoveField:c,onRemoveField:i})=>{const{formatMessage:u}=(0,A.useIntl)(),[l,d]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),y=(0,r.useRef)();function h(...E){f("add"),s(...E)}function b(...E){f("remove"),i(...E)}return(0,r.useEffect)(()=>{m==="add"&&(y==null?void 0:y.current)&&(y.current.scrollLeft=y.current.scrollWidth)},[e,m]),r.createElement(r.Fragment,null,r.createElement(D.Box,{paddingBottom:4},r.createElement(L.Typography,{variant:"delta",as:"h2"},u({id:v("containers.SettingPage.view"),defaultMessage:"View"}))),r.createElement(j.Flex,{paddingTop:4,paddingLeft:4,paddingRight:4,borderColor:"neutral300",borderStyle:"dashed",borderWidth:"1px",hasRadius:!0},r.createElement(jv,{size:"1",paddingBottom:4,ref:y},r.createElement(se.Stack,{horizontal:!0,spacing:3},e.map((E,F)=>r.createElement(Av,{key:E,index:F,isDraggingSibling:l,onMoveField:c,onClickEditField:a,onRemoveField:C=>b(C,F),name:E,labelField:n[E].list.label||E,setIsDraggingSibling:d})))),r.createElement($v,{size:"auto",paddingBottom:4},r.createElement(Ae.SimpleMenu,{label:u({id:v("components.FieldSelect.label"),defaultMessage:"Add a field"}),as:Me.IconButton,icon:r.createElement(ut(),null),disabled:t.length<=0,"data-testid":"add-field"},t.map(E=>r.createElement(Ae.MenuItem,{key:E,onClick:()=>h(E)},n[E].list.label||E))))))};ec.propTypes={displayedFields:xe.PropTypes.array.isRequired,listRemainingFields:xe.PropTypes.array.isRequired,metadatas:xe.PropTypes.objectOf(xe.PropTypes.shape({list:xe.PropTypes.shape({label:xe.PropTypes.string})})).isRequired,onAddField:xe.PropTypes.func.isRequired,onClickEditField:xe.PropTypes.func.isRequired,onMoveField:xe.PropTypes.func.isRequired,onRemoveField:xe.PropTypes.func.isRequired};const Bv=ec,Nv=(0,k.default)(j.Flex)`
  svg {
    width: ${32/16}rem;
    height: ${24/16}rem;
    margin-right: ${({theme:e})=>e.spaces[3]};
  }
`,tc=({attributes:e,fieldForm:t,fieldToEdit:n,onCloseModal:s,onChangeEditLabel:a,onSubmit:c,type:i})=>{const{formatMessage:u}=(0,A.useIntl)(),l=e[n].relationType;let d=!["media","relation"].includes(i);return["oneWay","oneToOne","manyToOne"].includes(l)&&(d=!0),r.createElement(_e.ModalLayout,{onClose:s,labelledBy:"title"},r.createElement("form",{onSubmit:c},r.createElement(_e.ModalHeader,null,r.createElement(Nv,null,r.createElement(Gi,{type:i}),r.createElement(L.Typography,{fontWeight:"bold",textColor:"neutral800",as:"h2",id:"title"},u({id:v("containers.ListSettingsView.modal-form.edit-label"),defaultMessage:"Edit {fieldName}"},{fieldName:xt()(n)})))),r.createElement(_e.ModalBody,null,r.createElement(le.Grid,{gap:4},r.createElement(le.GridItem,{s:12,col:6},r.createElement(Un.TextInput,{id:"label-input",label:u({id:v("form.Input.label"),defaultMessage:"Label"}),name:"label",onChange:m=>a(m),value:t.label,hint:u({id:v("form.Input.label.inputDescription"),defaultMessage:"This value overrides the label displayed in the table's head"})})),d&&r.createElement(le.GridItem,{s:12,col:6},r.createElement(Lt.ToggleInput,{"data-testid":"Enable sort on this field",checked:t.sortable,label:u({id:v("form.Input.sort.field"),defaultMessage:"Enable sort on this field"}),name:"sortable",onChange:m=>a({target:{name:"sortable",value:m.target.checked}}),onLabel:u({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"on"}),offLabel:u({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"off"})})))),r.createElement(_e.ModalFooter,{startActions:r.createElement(ye.Button,{onClick:s,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:r.createElement(ye.Button,{type:"submit"},u({id:"global.finish",defaultMessage:"Finish"}))})))};tc.propTypes={attributes:o().objectOf(o().shape({relationType:o().string})).isRequired,fieldForm:o().shape({label:o().string,sortable:o().bool}).isRequired,fieldToEdit:o().string.isRequired,onChangeEditLabel:o().func.isRequired,onCloseModal:o().func.isRequired,onSubmit:o().func.isRequired,type:o().string.isRequired};const Vv=tc;var qv=Object.defineProperty,Wv=Object.defineProperties,zv=Object.getOwnPropertyDescriptors,nc=Object.getOwnPropertySymbols,Uv=Object.prototype.hasOwnProperty,Hv=Object.prototype.propertyIsEnumerable,rc=(e,t,n)=>t in e?qv(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Gv=(e,t)=>{for(var n in t||(t={}))Uv.call(t,n)&&rc(e,n,t[n]);if(nc)for(var n of nc(t))Hv.call(t,n)&&rc(e,n,t[n]);return e},_v=(e,t)=>Wv(e,zv(t));const Zv=(e,t)=>_v(Gv({},e),{initialData:t,modifiedData:t}),Yr={fieldForm:{},fieldToEdit:"",initialData:{},modifiedData:{}},Qv=(e=Yr,t)=>(0,Wt.default)(e,n=>{const s=["modifiedData","layouts","list"];switch(t.type){case"ADD_FIELD":{const a=T()(e,s,[]);ne()(n,s,[...a,t.item]);break}case"MOVE_FIELD":{const a=T()(e,s,[]),{originalIndex:c,atIndex:i}=t;ne()(n,s,Ct(a,c,i));break}case"ON_CHANGE":{ne()(n,["modifiedData",...t.keys.split(".")],t.value);break}case"ON_CHANGE_FIELD_METAS":{ne()(n,["fieldForm",t.name],t.value);break}case"REMOVE_FIELD":{const a=T()(e,s,[]);ne()(n,s,a.filter((c,i)=>t.index!==i));break}case"SET_FIELD_TO_EDIT":{const{fieldToEdit:a}=t;n.fieldToEdit=a,n.fieldForm.label=T()(n,["modifiedData","metadatas",a,"list","label"],""),n.fieldForm.sortable=T()(n,["modifiedData","metadatas",a,"list","sortable"],"");break}case"UNSET_FIELD_TO_EDIT":{n.fieldForm={},n.fieldToEdit="";break}case"SUBMIT_FIELD_FORM":{const a=["modifiedData","metadatas",e.fieldToEdit,"list"];ne()(n,[...a,"label"],e.fieldForm.label),ne()(n,[...a,"sortable"],e.fieldForm.sortable);break}default:return n}}),Kv=["media","richtext","dynamiczone","relation","component","json"];var Yv=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const oc=({layout:e,slug:t})=>{const{formatMessage:n}=(0,A.useIntl)(),{trackUsage:s}=(0,g.useTracking)(),a=Qo(),c=(0,g.useNotification)(),{refetchData:i}=(0,r.useContext)(uo),[u,l]=(0,r.useState)(!1),d=()=>l(x=>!x),[m,f]=(0,r.useState)(!1),y=()=>f(x=>!x),[h,b]=(0,r.useReducer)(Qv,Yr,()=>Zv(Yr,e)),{fieldToEdit:E,fieldForm:F,initialData:C,modifiedData:P}=h,{attributes:I}=e,R=P.layouts.list,z=()=>{const{settings:{pageSize:x,defaultSortBy:O,defaultSortOrder:G},kind:K,uid:ae}=C,ce=`${O}:${G}`,Fe=`${(0,Ne.stringify)({page:1,pageSize:x,sort:ce},{encode:!1})}${a?`&${a}`:""}`;return`/content-manager/${K}/${ae}?${Fe}`},M=({target:{name:x,value:O}})=>{b({type:"ON_CHANGE",keys:x,value:x==="settings.pageSize"?parseInt(O,10):O})},V=()=>Yv(void 0,null,function*(){const x=Ii()(P,["layouts","settings","metadatas"]);W.mutate(x)}),B=x=>{b({type:"ADD_FIELD",item:x})},Z=(x,O)=>{x.stopPropagation(),R.length===1?c({type:"info",message:{id:v("notification.info.minimumFields")}}):b({type:"REMOVE_FIELD",index:O})},U=x=>{x.preventDefault(),d(),s("willSaveContentTypeLayout")},q=x=>{b({type:"SET_FIELD_TO_EDIT",fieldToEdit:x}),y()},S=()=>{b({type:"UNSET_FIELD_TO_EDIT"}),y()},_=x=>{x.preventDefault(),y(),b({type:"SUBMIT_FIELD_FORM"})},W=(0,Tr.useMutation)(x=>xv(x,t),{onSuccess(){s("didEditListSettings"),i()},onError(){c({type:"warning",message:{id:"notification.error"}})}}),{isLoading:ee}=W,w=({target:{name:x,value:O}})=>{b({type:"ON_CHANGE_FIELD_METAS",name:x,value:O})},$=Object.entries(I).reduce((x,O)=>{const[G,K]=O,ae=yo(K),ce=R.includes(G);return ae&&!ce&&x.push(G),x},[]).sort(),Y=Object.entries(I).reduce((x,O)=>{const[G,{type:K}]=O;return Kv.includes(K)||x.push(G),x},[]),Q=(x,O)=>{b({type:"MOVE_FIELD",originalIndex:x,atIndex:O})};return r.createElement(te.Layout,null,r.createElement(oe.Main,{"aria-busy":ee},r.createElement("form",{onSubmit:U},r.createElement(te.HeaderLayout,{navigationAction:r.createElement(g.Link,{startIcon:r.createElement(on(),null),to:z,id:"go-back"},n({id:"global.back",defaultMessage:"Back"})),primaryAction:r.createElement(ye.Button,{size:"S",startIcon:r.createElement(ft(),null),disabled:en()(P,C),type:"submit"},n({id:"global.save",defaultMessage:"Save"})),subtitle:n({id:v("components.SettingsViewWrapper.pluginHeader.description.list-settings"),defaultMessage:"Define the settings of the list view."}),title:n({id:v("components.SettingsViewWrapper.pluginHeader.title"),defaultMessage:"Configure the view - {name}"},{name:xt()(P.info.displayName)})}),r.createElement(te.ContentLayout,null,r.createElement(D.Box,{background:"neutral0",hasRadius:!0,shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},r.createElement(Lv,{modifiedData:P,onChange:M,sortOptions:Y}),r.createElement(D.Box,{paddingTop:6,paddingBottom:6},r.createElement(Ht.Divider,null)),r.createElement(Bv,{listRemainingFields:$,displayedFields:R,onAddField:B,onClickEditField:q,onMoveField:Q,onRemoveField:Z,metadatas:P.metadatas}))),r.createElement(g.ConfirmDialog,{bodyText:{id:v("popUpWarning.warning.updateAllSettings"),defaultMessage:"This will modify all your settings"},iconRightButton:r.createElement(ft(),null),isConfirmButtonLoading:ee,isOpen:u,onToggleDialog:d,onConfirm:V,variantRightButton:"success-light"})),m&&r.createElement(Vv,{attributes:I,fieldForm:F,fieldToEdit:E,onChangeEditLabel:w,onCloseModal:S,onSubmit:_,type:T()(I,[E,"type"],"text")})))};oc.propTypes={layout:o().shape({uid:o().string.isRequired,settings:o().shape({bulkable:o().bool,defaultSortBy:o().string,defaultSortOrder:o().string,filterable:o().bool,pageSize:o().number,searchable:o().bool}).isRequired,metadatas:o().object.isRequired,options:o().object.isRequired,attributes:o().objectOf(o().shape({type:o().string})).isRequired}).isRequired,slug:o().string.isRequired};const Jv=(0,r.memo)(oc),sc=De.Z.contentManager,ac=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:s,updateLayout:a}=zo(e),{rawContentTypeLayout:c,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let m={},f={};return s.contentType&&(m=Vt(s.contentType)),s.components&&(f=Object.keys(s.components).reduce((y,h)=>(y[h]=Vt(s.components[h]),y),{})),{rawContentTypeLayout:m,rawComponentsLayouts:f}},[s]);if((0,N.get)(s,["contentType","uid"],null)!==e||n)return r.createElement(g.LoadingIndicatorPage,null);const l=({location:{state:m},history:{goBack:f},match:{params:{id:y,origin:h}}},b)=>r.createElement(b,{slug:e,layout:s,state:m,goBack:f,id:y,origin:h}),d=[{path:"create/clone/:origin",comp:an},{path:"create",comp:an},{path:":id",comp:an},{path:"",comp:Dv}].map(({path:m,comp:f})=>r.createElement(X.Route,{key:m,path:`${t}/${m}`,render:y=>l(y,f)}));return r.createElement(Fc.SV,{FallbackComponent:g.ErrorFallback},r.createElement(po.Provider,{value:s},r.createElement(X.Switch,null,r.createElement(X.Route,{path:`${t}/configurations/list`},r.createElement(g.CheckPagePermissions,{permissions:sc.collectionTypesConfigurations},r.createElement(Jv,{layout:c,slug:e,updateLayout:a}))),r.createElement(X.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:sc.collectionTypesConfigurations},r.createElement(Nr,{components:i,isContentTypeView:!0,mainLayout:c,slug:e,updateLayout:a}))),d)))};ac.propTypes={match:o().shape({url:o().string.isRequired,params:o().shape({slug:o().string.isRequired}).isRequired}).isRequired};const Xv=(0,r.memo)(ac);var ic=p(23089),eC=p(25108),tC=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const nC=De.Z.contentManager,rC=()=>{const[{isLoading:e,data:t},n]=(0,r.useReducer)(ic.Z,ic.q),s=(0,r.useMemo)(Mn,[]),{schemas:a}=(0,fe.useSelector)(i=>s(i),fe.shallowEqual),{uid:c}=(0,X.useParams)();return(0,r.useEffect)(()=>{const u=Se().CancelToken.source();return(d=>tC(void 0,null,function*(){try{n(Xt());const{data:{data:m}}=yield ge.be.get(ve(`components/${c}/configuration`),{cancelToken:d.token});n(gr(Io(m,a,"component")))}catch(m){if(Se().isCancel(m))return;eC.error(m)}}))(u),()=>{u.cancel("Operation canceled by the user.")}},[c,a]),e?r.createElement(g.LoadingIndicatorPage,null):r.createElement(g.CheckPagePermissions,{permissions:nC.componentsConfigurations},r.createElement(Nr,{components:t.components,mainLayout:t.component,slug:c}))},oC=(0,r.memo)(rC);var sC=p(62791),aC=p(85407),iC=p.n(aC);const lC=()=>{const{formatMessage:e}=(0,A.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(oe.Main,null,r.createElement(te.HeaderLayout,{title:e({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(te.ContentLayout,null,r.createElement(sC.EmptyStateLayout,{action:r.createElement(g.LinkButton,{variant:"secondary",startIcon:r.createElement(ut(),null),to:"/plugins/content-type-builder/content-types/create-content-type"},e({id:"app.components.HomePage.create",defaultMessage:"Create your first Content-type"})),content:e({id:"content-manager.pages.NoContentType.text",defaultMessage:"You don't have any content yet, we recommend you to create your first Content-Type."}),hasRadius:!0,icon:r.createElement(iC(),{width:"10rem"}),shadow:"tableShadow"})))},cC=()=>{const{formatMessage:e}=(0,A.useIntl)();return(0,g.useFocusWhenNavigate)(),r.createElement(oe.Main,null,r.createElement(te.HeaderLayout,{title:e({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(te.ContentLayout,null,r.createElement(g.NoPermissions,null)))},uC=De.Z.contentManager,lc=({match:{params:{slug:e},url:t}})=>{const{isLoading:n,layout:s,updateLayout:a}=zo(e),{rawContentTypeLayout:c,rawComponentsLayouts:i}=(0,r.useMemo)(()=>{let u={},l={};return s.contentType&&(l=Vt(s.contentType)),s.components&&(u=Object.keys(s.components).reduce((d,m)=>(d[m]=Vt(s.components[m]),d),{})),{rawContentTypeLayout:l,rawComponentsLayouts:u}},[s]);return n?r.createElement(g.LoadingIndicatorPage,null):r.createElement(po.Provider,{value:s},r.createElement(X.Switch,null,r.createElement(X.Route,{path:`${t}/configurations/edit`},r.createElement(g.CheckPagePermissions,{permissions:uC.singleTypesConfigurations},r.createElement(Nr,{components:i,isContentTypeView:!0,mainLayout:c,slug:e,updateLayout:a}))),r.createElement(X.Route,{path:t,render:({location:{state:u},history:{goBack:l}})=>r.createElement(an,{layout:s,slug:e,isSingleType:!0,state:u,goBack:l})})))};lc.propTypes={match:o().shape({url:o().string.isRequired,params:o().shape({slug:o().string.isRequired}).isRequired}).isRequired};const dC=(0,r.memo)(lc);var pC=p(63852),mC=p(7334),cc=p.n(mC),At=p(37909),fC=Object.defineProperty,gC=Object.defineProperties,yC=Object.getOwnPropertyDescriptors,uc=Object.getOwnPropertySymbols,hC=Object.prototype.hasOwnProperty,bC=Object.prototype.propertyIsEnumerable,dc=(e,t,n)=>t in e?fC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,EC=(e,t)=>{for(var n in t||(t={}))hC.call(t,n)&&dc(e,n,t[n]);if(uc)for(var n of uc(t))bC.call(t,n)&&dc(e,n,t[n]);return e},vC=(e,t)=>gC(e,yC(t));const pc=(e,t)=>(0,pC.ZP)(e,cc()(t),{keys:[n=>cc()(n.title)]}),CC=()=>{const[e,t]=(0,r.useState)(""),{formatMessage:n}=(0,A.useIntl)(),s=(0,r.useMemo)(Iu,[]),{collectionTypeLinks:a,singleTypeLinks:c}=(0,fe.useSelector)(h=>s(h),fe.shallowEqual),i=h=>h.map(b=>vC(EC({},b),{title:n({id:b.title,defaultMessage:b.title})})),u=i(a),l=i(c),d=[{id:"collectionTypes",title:{id:v("components.LeftMenu.collection-types"),defaultMessage:"Collection Types"},searchable:!0,links:ie()(pc(u,e),h=>h.title.toLowerCase())},{id:"singleTypes",title:{id:v("components.LeftMenu.single-types"),defaultMessage:"Single Types"},searchable:!0,links:ie()(pc(l,e),h=>h.title.toLowerCase())}],m=()=>{t("")},f=({target:{value:h}})=>{t(h)},y=n({id:v("header.name"),defaultMessage:"Content"});return r.createElement(At.SubNav,{ariaLabel:y},r.createElement(At.SubNavHeader,{label:y,searchable:!0,value:e,onChange:f,onClear:m,searchLabel:n({id:"content-manager.components.LeftMenu.Search.label",defaultMessage:"Search for a content type"})}),r.createElement(At.SubNavSections,null,d.map(h=>{const b=n({id:h.title.id,defaultMessage:h.title.defaultMessage},h.title.values);return r.createElement(At.SubNavSection,{key:h.id,label:b,badgeLabel:h.links.length.toString()},h.links.map(E=>{const F=E.search?`?${E.search}`:"";return r.createElement(At.SubNavLink,{as:X.NavLink,key:E.uid,to:`${E.to}${F}`},E.title)}))})))};var Jr=p(21358);const PC=()=>({type:Jr.ZA}),OC=()=>({type:Jr.c2}),RC=(e,t,n,s)=>({type:Jr.ix,data:{authorizedCtLinks:e,authorizedStLinks:t,components:s,contentTypeSchemas:n}}),mc=(e,t,n=[])=>e.filter(s=>s.isDisplayed).map(s=>{const a=[{action:"plugin::content-manager.explorer.create",subject:s.uid},{action:"plugin::content-manager.explorer.read",subject:s.uid}],c=[{action:"plugin::content-manager.explorer.read",subject:s.uid}],i=t==="collectionTypes"?a:c,u=n.find(({uid:d})=>d===s.uid);let l=null;if(u){const d={page:1,pageSize:u.settings.pageSize,sort:`${u.settings.defaultSortBy}:${u.settings.defaultSortOrder}`};l=(0,Ne.stringify)(d,{encode:!1})}return{permissions:i,search:l,kind:s.kind,title:s.info.displayName,to:`/content-manager/${s.kind}/${s.uid}`,uid:s.uid,name:s.uid,isDisplayed:s.isDisplayed}}),MC=(e,t)=>{const[n,s]=(0,N.chain)(e).groupBy("kind").map((a,c)=>({name:c,links:a})).sortBy("name").value();return{collectionTypesSectionLinks:mc((0,N.get)(n,"links",[]),"collectionTypes",t),singleTypesSectionLinks:mc((0,N.get)(s,"links",[]),"singleTypes")}},fc=(e,t)=>t.map(({permissions:n})=>(0,g.hasPermissions)(e,n));var TC=p(25108),wC=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const IC=(e,t,n)=>wC(void 0,null,function*(){try{const{data:{data:s}}=yield ge.be.get(ve("content-types-settings")),{collectionTypesSectionLinks:a,singleTypesSectionLinks:c}=MC(e,s),i=fc(t,a),u=yield Promise.all(i),l=a.filter((y,h)=>u[h]),d=fc(t,c),m=yield Promise.all(d),f=c.filter((y,h)=>m[h]);return{authorizedCtLinks:l,authorizedStLinks:f}}catch(s){return TC.error(s),n({type:"warning",message:{id:"notification.error"}}),{authorizedCtLinks:[],authorizedStLinks:[],contentTypes:[]}}});var DC=p(25108),xC=Object.defineProperty,SC=Object.defineProperties,LC=Object.getOwnPropertyDescriptors,gc=Object.getOwnPropertySymbols,FC=Object.prototype.hasOwnProperty,kC=Object.prototype.propertyIsEnumerable,yc=(e,t,n)=>t in e?xC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,AC=(e,t)=>{for(var n in t||(t={}))FC.call(t,n)&&yc(e,n,t[n]);if(gc)for(var n of gc(t))kC.call(t,n)&&yc(e,n,t[n]);return e},jC=(e,t)=>SC(e,LC(t)),$C=(e,t,n)=>new Promise((s,a)=>{var c=l=>{try{u(n.next(l))}catch(d){a(d)}},i=l=>{try{u(n.throw(l))}catch(d){a(d)}},u=l=>l.done?s(l.value):Promise.resolve(l.value).then(c,i);u((n=n.apply(e,t)).next())});const BC=()=>{const e=(0,fe.useDispatch)(),t=(0,g.useNotification)(),n=(0,fe.useSelector)(Mt()),s=(0,r.useRef)(),{allPermissions:a}=(0,g.useRBACProvider)(),{runHookWaterfall:c}=(0,g.useStrapiApp)(),u=Se().CancelToken.source(),{notifyStatus:l}=(0,qr.useNotifyAT)(),{formatMessage:d}=(0,A.useIntl)(),m=()=>$C(void 0,null,function*(){e(PC());try{const[{data:{data:f}},{data:{data:y}}]=yield Promise.all(["components","content-types"].map(P=>ge.be.get(ve(P),{cancelToken:u.token})));l(d({id:v("App.schemas.data-loaded"),defaultMessage:"The schemas have been successfully loaded."}));const{authorizedCtLinks:h,authorizedStLinks:b}=yield IC(y,a,t),{ctLinks:E}=c(Ut.LK,{ctLinks:h,models:y}),{stLinks:F}=c(Ut.dV,{stLinks:b,models:y}),C=RC(E,F,y,f);e(C)}catch(f){if(Se().isCancel(f))return;DC.error(f),t({type:"warning",message:{id:"notification.error"}})}});return s.current=m,(0,r.useEffect)(()=>(s.current(),()=>{u.cancel("Operation canceled by the user."),e(OC())}),[e,t]),jC(AC({},n),{refetchData:s.current})},NC=De.Z.contentManager,hc=()=>{const e=(0,X.useRouteMatch)("/content-manager/:kind/:uid"),{status:t,collectionTypeLinks:n,singleTypeLinks:s,models:a,refetchData:c}=BC(),i=ie()([...n,...s],y=>y.title.toLowerCase()),{pathname:u}=(0,X.useLocation)(),{formatMessage:l}=(0,A.useIntl)(),{startSection:d}=(0,g.useGuidedTour)(),m=(0,r.useRef)(d);if((0,r.useEffect)(()=>{m.current&&m.current("contentManager")},[]),t==="loading")return r.createElement(oe.Main,{"aria-busy":"true"},r.createElement(te.HeaderLayout,{title:l({id:v("header.name"),defaultMessage:"Content"})}),r.createElement(g.LoadingIndicatorPage,null));const f=a.filter(({isDisplayed:y})=>y);return i.length===0&&f.length>0&&u!=="/content-manager/403"?r.createElement(X.Redirect,{to:"/content-manager/403"}):f.length===0&&u!=="/content-manager/no-content-types"?r.createElement(X.Redirect,{to:"/content-manager/no-content-types"}):!e&&i.length>0?r.createElement(X.Redirect,{to:`${i[0].to}${i[0].search?`?${i[0].search}`:""}`}):r.createElement(te.Layout,{sideNav:r.createElement(CC,null)},r.createElement(Lc,null),r.createElement(uo.Provider,{value:{refetchData:c}},r.createElement(X.Switch,null,r.createElement(X.Route,{path:"/content-manager/components/:uid/configurations/edit"},r.createElement(g.CheckPagePermissions,{permissions:NC.componentsConfigurations},r.createElement(oC,null))),r.createElement(X.Route,{path:"/content-manager/collectionType/:slug",component:Xv}),r.createElement(X.Route,{path:"/content-manager/singleType/:slug",component:dC}),r.createElement(X.Route,{path:"/content-manager/403"},r.createElement(cC,null)),r.createElement(X.Route,{path:"/content-manager/no-content-types"},r.createElement(lC,null)),r.createElement(X.Route,{path:"",component:g.NotFound}))))};function VC(){const{formatMessage:e}=(0,A.useIntl)();return r.createElement(r.Fragment,null,r.createElement(at.Helmet,{title:e({id:v("plugin.name"),defaultMessage:"Content Manager"})}),r.createElement(hc,null))}},22868:()=>{},14777:()=>{},99830:()=>{},70209:()=>{},87414:()=>{}}]);
